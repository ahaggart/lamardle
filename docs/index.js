(()=>{"use strict";var t,e={508:(t,e,s)=>{s.r(e),s.d(e,{LamardleGame:()=>g});var i=s(601);class r extends HTMLElement{constructor(t){super(),this.grid=t,this.letters="",this.enabled=!0,this.container=document.createElement("div"),this.container.style.margin="0 5px",this.container.appendChild(this.createRow("qwertyuiop")),this.container.appendChild(this.createRow(" asdfghjkl ")),this.container.appendChild(this.createRow("+zxcvbnm-")),this.appendChild(this.container)}backspace(){this.enabled&&0!=this.letters.length&&(this.letters=this.letters.substring(0,this.letters.length-1),this.grid.setLetters(this.letters))}appendLetter(t){this.enabled&&5!=this.letters.length&&(this.letters+=t,this.grid.setLetters(this.letters))}submit(){this.enabled&&this.grid.submit()&&(this.letters="")}createRow(t){const e=document.createElement("div");e.classList.add("game-keyboard-row");for(let s of t)if(" "===s){const t=document.createElement("div");t.classList.add("point-five"),e.appendChild(t)}else if("+"===s){const t=document.createElement("button");t.classList.add("key","one-point-five","enter"),t.innerText="enter",t.addEventListener("click",(()=>this.submit())),e.appendChild(t)}else if("-"===s){const t=document.createElement("button");t.classList.add("key","one-point-five","delete"),t.innerText="del",t.addEventListener("click",(()=>this.backspace())),e.appendChild(t)}else{const t=document.createElement("button");t.classList.add("key"),t.addEventListener("click",(()=>this.appendLetter(s))),t.innerText=s,e.appendChild(t)}return e}disable(){this.enabled=!1}enable(){this.enabled=!0}show(){this.container.classList.remove("hidden")}hide(){this.container.classList.add("hidden")}}customElements.define("game-keyboard",r);class a extends HTMLElement{constructor(t,e){super(),this.pos=e,this.setLetter(t||""),this.classList.add("letter","no-match")}setLetter(t){this.letter=t,this.innerText=t}setMatch(t,e){this.classList.remove("both-match","upper-match","lower-match","no-match"),t&&e?this.classList.add("both-match"):e?this.classList.add("lower-match"):t?this.classList.add("upper-match"):this.classList.add("no-match")}setHighlight(t){this.style.borderColor=t?"var(--highlight-color)":"var(--non-highlight-color)"}}customElements.define("grid-letter",a);class n extends HTMLElement{constructor(t){super(),this.tiles=[],this.letters="",this.config=t,this.classList.add("grid-row");for(let t=0;t<this.config.letters;t++){const e=new a("",t);this.tiles.push(e),this.appendChild(e)}this.setLetters(this.getAttribute("letters"))}getLetters(){return this.letters}setLetters(t){this.letters=t||"";const e=this.letters.substring(0,this.config.letters).padEnd(this.config.letters," ");for(let t=0;t<this.config.letters;t++)this.tiles[t].setLetter(e[t])}updateMatches(t,e){for(let s=0;s<this.tiles.length;s++)this.tiles[s].setMatch(this.tiles[s].letter===t.tiles[s].letter,this.tiles[s].letter===e.tiles[s].letter)}setHighlight(t){this.tiles.forEach((e=>e.setHighlight(t)))}isComplete(){return this.letters.length===this.config.letters}doesMatch(t){if(!this.isComplete()||!t.isComplete())return!1;var e=0;for(let s=0;s<this.config.letters;s++)this.letters[s]===t.letters[s]&&e++;return!(e<this.config.matches)}wiggle(){this.setAttribute("wiggle",""),window.setTimeout((()=>this.removeAttribute("wiggle")),i.xw)}}customElements.define("grid-row",n);var h=s(200);class o extends HTMLElement{constructor(t,e){super(),this.config=t,this.callbacks=e,this.rowConfig={letters:this.config.letters,matches:this.config.matches},this.numGuesses=0,this.upperMatches=[],this.lowerMatches=[],this.id="game-grid",this.grid=document.createElement("div"),this.grid.classList.add("grid"),this.grid.id="grid",this.grid.style.setProperty("--num-rows",this.config.rows.toString()),this.appendChild(this.grid),h.W.addListener((t=>{this.words=t,this.createRows(),e.onLoad&&e.onLoad(this)}))}getRandomWord(t){return this.words[Math.abs(this.getHashCode(t))%this.words.length]}createRows(){this.upper=new n(this.rowConfig),this.upperStart=this.getRandomWord(this.config.seed),this.upper.setLetters(this.upperStart),this.lower=new n(this.rowConfig),this.lowerStart=this.getRandomWord(this.config.seed+"salt"),this.lower.setLetters(this.lowerStart),this.lower.id="goal",this.current=new n(this.rowConfig),this.current.setHighlight(!0);const t=Math.ceil((this.config.rows-3)/2),e=Math.floor((this.config.rows-3)/2);Array(t).fill(0).forEach((()=>this.grid.appendChild(new n(this.rowConfig)))),this.grid.appendChild(this.upper),this.grid.appendChild(this.current),this.grid.appendChild(this.lower),Array(e).fill(0).forEach((()=>this.grid.appendChild(new n(this.rowConfig))))}setLetters(t){this.current.setLetters(t),this.current.updateMatches(this.upper,this.lower)}getTileSize(t){const e=i.V2*(this.config.letters-1),s=Math.floor((t.width-e)/this.config.letters),r=2*i.ff,a=i.V2*(this.config.rows-1),n=Math.floor((t.height-a-r)/this.config.rows);return Math.min(s,n)}resize(t){const e=i.V2*(this.config.letters-1),s=i.V2*(this.config.rows-1),r=this.getTileSize(t),a=r*this.config.letters+e,n=r*this.config.rows+s;return this.grid.style.width=a+"px",this.grid.style.height=n+"px",t.height-n-10}submit(){if(!this.current.isComplete())return this.current.wiggle(),!1;if(!this.words.includes(this.current.getLetters()))return this.current.wiggle(),!1;const t=this.current.doesMatch(this.upper),e=this.current.doesMatch(this.lower);if(!t&&!e)return this.current.wiggle(),!1;if(this.numGuesses++,t&&e)return this.upperMatches.push(this.upper.getLetters()),this.lowerMatches.push(this.lower.getLetters()),this.callbacks.onWin({upper:this.upperMatches,solution:this.current.getLetters(),lower:this.lowerMatches}),!0;const s=new n(this.rowConfig);return s.setHighlight(!0),this.current.setHighlight(!1),t?(this.upperMatches.push(this.upper.getLetters()),this.grid.children[0].remove(),this.upper=this.current,this.current=s,this.grid.insertBefore(this.current,this.lower)):(this.lowerMatches.push(this.lower.getLetters()),this.grid.children[this.grid.children.length-1].remove(),this.lower=this.current,this.current=s,this.grid.insertBefore(this.current,this.lower)),!0}getHashCode(t){for(var e=0,s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e&=e;return e}getUpper(){return this.upper}getLower(){return this.lower}getContainer(){return this.grid}getNumGuesses(){return this.numGuesses}getUpperStart(){return this.upperStart}getLowerStart(){return this.lowerStart}}function d(t){const e=document.createElement("p");return e.innerText=t.join(" "),e}customElements.define("game-grid",o);class l extends HTMLElement{constructor(t,e,s){super(),this.overlay=document.createElement("div"),this.overlay.classList.add("overlay","tutorial","hidden"),this.appendChild(this.overlay),this.textContainer=document.createElement("div"),this.textContainer.style.width=s.width+"px",this.textContainer.style.margin="auto",this.overlay.appendChild(this.textContainer);const i=document.createElement("div");i.classList.add("tutorial-title"),i.innerText="How to Play",this.textContainer.appendChild(i),this.textContainer.appendChild(d(['The goal of LAMARDLE is to find words which "match" the words','above or below them. Two words "match" when they share 3 or more',"letters in the same position."]));const r=new o(Object.assign(Object.assign({},e),{rows:3}),{onLoad:()=>{r.getUpper().setLetters("hello"),r.getLower().setLetters("world")}});r.resize({width:s.width,height:200}),this.textContainer.appendChild(r),this.textContainer.appendChild(d(["When you enter a word that matches the word above or below, it","will replace that word. If the word matches both words, you win!"]));const a=new o(Object.assign(Object.assign({},e),{rows:3}),{onLoad:()=>{a.getUpper().setLetters("hello"),a.getLower().setLetters("world"),a.setLetters("would")}});a.resize({width:s.width,height:200}),this.textContainer.appendChild(a),this.textContainer.appendChild(d(['In the example above, the middle word "would" matches "w", "o",','"l", and "d" from "world". It also matches "l" from "hello". When','entered, the lower word "world" is replaced with "would", so the','next word should match either "hello" or "would".']));const n=new o(Object.assign(Object.assign({},e),{rows:3}),{onLoad:()=>{n.getUpper().setLetters("hello"),n.getLower().setLetters("world"),n.setLetters("would"),n.submit()}});n.resize({width:s.width,height:200}),this.textContainer.appendChild(n),this.textContainer.appendChild(d(["Tap anywhere to continue. Happy Mother's Day!"])),t.hasVisited()||this.show(),this.overlay.onclick=()=>{this.hide(),t.setVisited()}}show(){this.overlay.classList.remove("hidden")}hide(){this.overlay.classList.add("hidden")}}customElements.define("game-tutorial",l);class c{constructor(){}solve(t,e){const s=new Map;s.set(t,null);for(var i=[t],r=[];i.length>0;){const t=i.pop();var a=!1;if(this.graph[t].forEach((i=>{s.has(i)||(s.set(i,t),r.push(i),i===e&&(a=!0))})),a)break;0===i.length&&0!==r.length&&(i=r,r=[])}const n=[e];var h=e;if(s.has(e)){for(;h!==t;)h=s.get(h),n.push(h);return n}return[]}loadGraph(){const t=new XMLHttpRequest;return new Promise((e=>{t.onreadystatechange=s=>{t.readyState===XMLHttpRequest.DONE&&200===t.status&&(this.graph=JSON.parse(t.responseText),e(this))},t.open("GET","graph.json"),t.send()}))}}class p{constructor(t){var e,s,i;this.schema={visited:t=>"true"===t,streak:t=>parseInt(t),mostRecent:t=>t},this.date=t;const r=this.parseCookie();this.data={visited:null!==(e=r.visited)&&void 0!==e&&e,streak:null!==(s=r.streak)&&void 0!==s?s:0,mostRecent:null!==(i=r.mostRecent)&&void 0!==i?i:""},this.checkStreak()}setVisited(){this.data.visited=!0,this.saveData()}hasVisited(){return this.data.visited}checkStreak(){if(this.data.mostRecent===this.formatDate(this.date))return;const t=new Date(this.date);t.setDate(this.date.getDate()-1),this.data.mostRecent!==this.formatDate(t)&&(this.data.streak=0)}addStreak(){this.data.mostRecent!==this.formatDate(this.date)&&(this.data.streak++,this.data.mostRecent=this.formatDate(this.date),this.saveData())}saveData(){const t=new Date;t.setDate((new Date).getDate()+i.c1);const e="expires="+t.toUTCString();Object.entries(this.data).forEach((([t,s])=>{document.cookie=t+"="+s.toString()+";"+e}))}parseCookie(){const t={};return document.cookie&&decodeURI(document.cookie).split(";").map((t=>t.split("="))).forEach((e=>{const s=e[0].trim(),i=e[1];this.schema.hasOwnProperty(s)&&(t[s]=this.schema[s](i))})),t}formatDate(t){return[t.getFullYear().toString(),(t.getMonth()+1).toString().padStart(2,"0"),t.getDate().toString().padStart(2,"0")].join("")}getDate(){return this.date}getStreak(){return this.data.streak}}class g extends HTMLElement{constructor(){var t;super(),this.gameData=new p(new Date),this.container=document.createElement("div"),this.container.classList.add("container"),this.appendChild(this.container),this.winPopup=document.createElement("div"),this.winPopup.classList.add("overlay","hidden"),this.container.appendChild(this.winPopup),this.winPopup.onclick=()=>{this.winPopup.classList.add("hidden"),this.keyboard.disable()},this.winMessage=document.createElement("div"),this.winMessage.classList.add("winMessage"),this.winPopup.appendChild(this.winMessage),this.winMessageText=document.createElement("div"),this.winMessage.appendChild(this.winMessageText),this.winMessageShare=document.createElement("div"),this.winMessageShare.classList.add("share-result"),this.winMessageShare.innerText="Share!",this.winMessage.appendChild(this.winMessageShare),this.header=document.createElement("div"),this.header.classList.add("header"),this.container.appendChild(this.header),this.spacerLeft=document.createElement("div"),this.spacerLeft.classList.add("spacer-left"),this.header.appendChild(this.spacerLeft),this.spacerLeft.appendChild(this.createHeaderLink("home.svg",this.getDailyPuzzleLink(),{altText:"go to daily puzzle"})),this.spacerLeft.appendChild(this.createHeaderLink("dice-3.svg",this.getRandomPuzzleLink(),{altText:"go to random puzzle"})),this.titleText=document.createElement("div"),this.titleText.innerText="LAMARDLE",this.titleText.classList.add("title-text"),this.header.appendChild(this.titleText),this.spacerRight=document.createElement("div"),this.spacerRight.classList.add("spacer-right"),this.header.appendChild(this.spacerRight),this.spacerRight.appendChild(this.createHeaderLink("source.svg","https://github.com/ahaggart/lamardle",{newTab:!0,altText:"go to source code"}));const e=this.createHeaderIcon("help.svg",{altText:"show tutorial"});this.spacerRight.appendChild(e),this.urlSeed=new URL(document.location.href).searchParams.get("seed");const s=this.gameData.formatDate(this.gameData.getDate());this.seed=null!==(t=this.urlSeed)&&void 0!==t?t:s;const i={seed:this.seed,rows:7,letters:5,matches:3};this.tutorial=new l(this.gameData,i,this.getGridArea()),this.container.appendChild(this.tutorial),e.onclick=()=>this.tutorial.show(),this.grid=new o(i,{onWin:t=>this.winGame(t)}),this.container.append(this.grid),this.keyboard=new r(this.grid),this.container.append(this.keyboard),this.solver=new c,this.resizeGrid(),window.addEventListener("resize",(()=>this.resizeGrid())),document.addEventListener("keydown",(t=>{"Backspace"===t.key?this.keyboard.backspace():"Enter"===t.key?this.keyboard.submit():t.key.match(/^[a-z]$/)&&this.keyboard.appendLetter(t.key)}))}createHeaderLink(t,e,s={}){const i=document.createElement("a");return i.setAttribute("href",e),s.newTab&&i.setAttribute("target","_blank"),i.appendChild(this.createHeaderIcon(t,s)),i}createHeaderIcon(t,e={}){var s;const r=document.createElement("img");return r.setAttribute("src",t),r.setAttribute("width",i.L1.toString()),r.setAttribute("height",i.L1.toString()),e.altText&&r.setAttribute("alt",e.altText),(e.title||e.altText)&&r.setAttribute("title",null!==(s=e.title)&&void 0!==s?s:e.altText),r}getGridArea(){return{width:Math.min(i.d,window.innerWidth-i.XC),height:window.innerHeight-i.aK-i.Mz}}resizeGrid(){const t=this.grid.resize(this.getGridArea());this.grid.getContainer().style.marginBottom=t+"px"}computeMatching(t,e){const s=[];var i=t;for(let t=0;t<e.length;t++){const r=e[e.length-t-1],a=i.split("").map(((t,e)=>[t,r.charAt(e)])).map((([t,e])=>t===e));s.push(a),i=r}return s.reverse(),s}formatMatching(t,e,s){return t.map((t=>t.map((t=>t?e:s)).join("")))}createShareMessage(t,e){const s=this.formatMatching(this.computeMatching(t.solution,t.upper),i.JH,i.lw),r=this.formatMatching(this.computeMatching(t.solution,t.lower),i.LH,i.lw);return r.reverse(),Array.prototype.concat(["lamardle",e,this.grid.getNumGuesses().toString()+" tries"],s,[t.solution.split("").map((()=>i.V3)).join("")],r).join("\n")}computePar(){const t=this.solver.solve(this.grid.getUpperStart(),this.grid.getLowerStart());return Math.max(1,t.length-2)}winGame(t){return e=this,s=void 0,r=function*(){const e=[];e.push("You won in "+this.grid.getNumGuesses()+" tries!"),yield this.solver.loadGraph(),e.push("Par: "+this.computePar()),this.seed===this.gameData.formatDate(this.gameData.getDate())&&(this.gameData.addStreak(),e.push("Current Streak: "+this.gameData.getStreak())),this.winPopup.classList.remove("hidden"),this.winMessageText.innerText=e.join("\n"),this.winMessageShare.onclick=e=>{e.stopPropagation();const s=this.createShareMessage(t,document.location.origin+"?seed="+this.seed),i="Failed to Share :(",r=this.winMessageShare.innerText;navigator.share?navigator.share({title:document.title,text:s}).catch((()=>this.winMessageShare.innerText=i)):navigator.clipboard?(navigator.clipboard.writeText(s),this.winMessageShare.innerText="Copied to clipboard!",window.setTimeout((()=>this.winMessageShare.innerText=r),3e3)):this.winMessageShare.innerText=i}},new((i=void 0)||(i=Promise))((function(t,a){function n(t){try{o(r.next(t))}catch(t){a(t)}}function h(t){try{o(r.throw(t))}catch(t){a(t)}}function o(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i((function(t){t(s)}))).then(n,h)}o((r=r.apply(e,s||[])).next())}));var e,s,i,r}getDailyPuzzleLink(){return"./"}getRandomPuzzleLink(){return"./?seed="+this.randomString()}randomString(){const t=[];for(let e=0;e<16;e++)t.push(Math.floor(10*Math.random()));return t.join("")}}customElements.define("lamardle-game",g)},601:(t,e,s)=>{s.d(e,{JH:()=>u,L1:()=>c,LH:()=>g,Mz:()=>h,V2:()=>i,V3:()=>w,XC:()=>l,XV:()=>a,aK:()=>d,c1:()=>p,d:()=>r,ff:()=>n,lw:()=>m,xw:()=>o});const i=5,r=500,a=5,n=10,h=50,o=400,d=184,l=2*n,c=25,p=3,g="🔼",u="🔽",m="⏺",w="*️⃣"},200:(t,e,s)=>{s.d(e,{W:()=>r,y:()=>a});var i=s(601);const r=new class{constructor(t){this.numLetters=t,this.isReady=!1,this.onReady=[],this.words=[]}addListener(t){this.onReady.push(t),this.isReady&&t(this.words)}setWords(t){this.words=t.split("\n"),this.isReady=!0,this.onReady.forEach((t=>t(this.words)))}}(i.XV);function a(t){const e=new XMLHttpRequest;e.onreadystatechange=s=>{e.readyState===XMLHttpRequest.DONE&&200===e.status&&t(e.responseText)},e.open("GET","five-letters.txt"),e.send()}}},s={};function i(t){var r=s[t];if(void 0!==r)return r.exports;var a=s[t]={exports:{}};return e[t](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t=i(200),i(508),(0,t.y)((e=>t.W.setWords(e)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWJwYWNrOi8vbGFtYXJkbGUvLi9zcmMvR3JpZExldHRlci50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9HcmlkUm93LnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0dhbWVHcmlkLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0dhbWVUdXRvcmlhbC50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9HYW1lU29sdmVyLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0dhbWVEYXRhLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0xhbWFyZGxlR2FtZS50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvLi9zcmMvY29udGV4dC50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9Xb3JkTGlzdC50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9sYW1hcmRsZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9sYW1hcmRsZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVHcmlkIH0gZnJvbSAnLi9HYW1lR3JpZCc7XG5cbmV4cG9ydCBjbGFzcyBHYW1lS2V5Ym9hcmQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgcHJpdmF0ZSBncmlkOiBHYW1lR3JpZDtcbiAgICBwcml2YXRlIGxldHRlcnM6IHN0cmluZztcbiAgICBwcml2YXRlIGVuYWJsZWQ6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoZ3JpZDogR2FtZUdyaWQpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmdyaWQgPSBncmlkO1xuXG4gICAgICAgIHRoaXMubGV0dGVycyA9ICcnO1xuXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUubWFyZ2luID0gXCIwIDVweFwiO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVJvdygncXdlcnR5dWlvcCcpKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVSb3coJyBhc2RmZ2hqa2wgJykpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVJvdygnK3p4Y3Zibm0tJykpO1xuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBiYWNrc3BhY2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkIHx8IHRoaXMubGV0dGVycy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGV0dGVycyA9IHRoaXMubGV0dGVycy5zdWJzdHJpbmcoMCwgdGhpcy5sZXR0ZXJzLmxlbmd0aCAtIDEpO1xuICAgICAgICB0aGlzLmdyaWQuc2V0TGV0dGVycyh0aGlzLmxldHRlcnMpO1xuICAgIH1cblxuICAgIGFwcGVuZExldHRlcihsZXR0ZXI6IHN0cmluZykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCB8fCB0aGlzLmxldHRlcnMubGVuZ3RoID09IDUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxldHRlcnMgKz0gbGV0dGVyO1xuICAgICAgICB0aGlzLmdyaWQuc2V0TGV0dGVycyh0aGlzLmxldHRlcnMpO1xuICAgIH1cblxuICAgIHN1Ym1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCAmJiB0aGlzLmdyaWQuc3VibWl0KCkpIHtcbiAgICAgICAgICAgIHRoaXMubGV0dGVycyA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlUm93KGxldHRlcnM6IHN0cmluZykge1xuICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2dhbWUta2V5Ym9hcmQtcm93Jyk7XG4gICAgICAgIGZvciAobGV0IGxldHRlciBvZiBsZXR0ZXJzKSB7XG4gICAgICAgICAgICBpZiAobGV0dGVyID09PSAnICcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGFjZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBzcGFjZXIuY2xhc3NMaXN0LmFkZCgncG9pbnQtZml2ZScpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChzcGFjZXIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICcrJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGtleS5jbGFzc0xpc3QuYWRkKCdrZXknLCAnb25lLXBvaW50LWZpdmUnLCAnZW50ZXInKTtcbiAgICAgICAgICAgICAgICBrZXkuaW5uZXJUZXh0ID0gJ2VudGVyJztcbiAgICAgICAgICAgICAgICBrZXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoa2V5KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnLScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgICAgICBrZXkuY2xhc3NMaXN0LmFkZCgna2V5JywgJ29uZS1wb2ludC1maXZlJywgJ2RlbGV0ZScpO1xuICAgICAgICAgICAgICAgIGtleS5pbm5lclRleHQgPSAnZGVsJztcbiAgICAgICAgICAgICAgICBrZXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmJhY2tzcGFjZSgpKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoa2V5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAga2V5LmNsYXNzTGlzdC5hZGQoJ2tleScpO1xuICAgICAgICAgICAgICAgIGtleS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuYXBwZW5kTGV0dGVyKGxldHRlcikpO1xuICAgICAgICAgICAgICAgIGtleS5pbm5lclRleHQgPSBsZXR0ZXI7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcm93O1xuICAgIH1cblxuICAgIGRpc2FibGUoKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dhbWUta2V5Ym9hcmQnLCBHYW1lS2V5Ym9hcmQpO1xuIiwiZXhwb3J0IGNsYXNzIEdyaWRMZXR0ZXIgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgcG9zOiBudW1iZXI7XG4gICAgbGV0dGVyOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihsZXR0ZXI6IHN0cmluZyB8IHVuZGVmaW5lZCwgcG9zOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuc2V0TGV0dGVyKGxldHRlciB8fCAnJyk7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnbGV0dGVyJywgJ25vLW1hdGNoJyk7XG4gICAgfVxuXG4gICAgc2V0TGV0dGVyKGxldHRlcjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubGV0dGVyID0gbGV0dGVyO1xuICAgICAgICB0aGlzLmlubmVyVGV4dCA9IGxldHRlcjtcbiAgICB9XG5cbiAgICBzZXRNYXRjaChtYXRjaFVwcGVyOiBib29sZWFuLCBtYXRjaExvd2VyOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYm90aC1tYXRjaCcsICd1cHBlci1tYXRjaCcsICdsb3dlci1tYXRjaCcsICduby1tYXRjaCcpO1xuICAgICAgICBpZiAobWF0Y2hVcHBlciAmJiBtYXRjaExvd2VyKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2JvdGgtbWF0Y2gnKTtcbiAgICAgICAgfSBlbHNlIGlmIChtYXRjaExvd2VyKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2xvd2VyLW1hdGNoJyk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hVcHBlcikge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCd1cHBlci1tYXRjaCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCduby1tYXRjaCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0SGlnaGxpZ2h0KGlzSGlnaGxpZ2h0ZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5zdHlsZS5ib3JkZXJDb2xvciA9IGlzSGlnaGxpZ2h0ZWQgPyAndmFyKC0taGlnaGxpZ2h0LWNvbG9yKScgOiAndmFyKC0tbm9uLWhpZ2hsaWdodC1jb2xvciknO1xuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZ3JpZC1sZXR0ZXInLCBHcmlkTGV0dGVyKTtcbiIsImltcG9ydCB7IEdyaWRMZXR0ZXIgfSBmcm9tIFwiLi9HcmlkTGV0dGVyXCI7XG5pbXBvcnQgeyBJTlZBTElEX0FOSU1BVElPTl9MRU5HVEhfTVMgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuZXhwb3J0IHR5cGUgR3JpZFJvd0NvbmZpZyA9IHtcbiAgICBsZXR0ZXJzOiBudW1iZXI7XG4gICAgbWF0Y2hlczogbnVtYmVyO1xufTtcblxuZXhwb3J0IGNsYXNzIEdyaWRSb3cgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgcHJpdmF0ZSB0aWxlczogR3JpZExldHRlcltdID0gW107XG4gICAgcHJpdmF0ZSBsZXR0ZXJzOiBzdHJpbmcgPSAnJztcbiAgICBwcml2YXRlIGNvbmZpZzogR3JpZFJvd0NvbmZpZztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogR3JpZFJvd0NvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdncmlkLXJvdycpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWcubGV0dGVyczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB0aWxlID0gbmV3IEdyaWRMZXR0ZXIoJycsIGkpO1xuICAgICAgICAgICAgdGhpcy50aWxlcy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0TGV0dGVycyh0aGlzLmdldEF0dHJpYnV0ZShcImxldHRlcnNcIikpO1xuICAgIH1cblxuICAgIGdldExldHRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxldHRlcnM7XG4gICAgfVxuXG4gICAgc2V0TGV0dGVycyhsZXR0ZXJzOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5sZXR0ZXJzID0gbGV0dGVycyB8fCAnJztcbiAgICAgICAgY29uc3QgcGFkZGVkTGV0dGVycyA9IHRoaXMubGV0dGVyc1xuICAgICAgICAgICAgLnN1YnN0cmluZygwLCB0aGlzLmNvbmZpZy5sZXR0ZXJzKVxuICAgICAgICAgICAgLnBhZEVuZCh0aGlzLmNvbmZpZy5sZXR0ZXJzLCAnICcpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWcubGV0dGVyczsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVzW2ldLnNldExldHRlcihwYWRkZWRMZXR0ZXJzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZU1hdGNoZXModXBwZXI6IEdyaWRSb3csIGxvd2VyOiBHcmlkUm93KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50aWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50aWxlc1tpXS5zZXRNYXRjaChcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVzW2ldLmxldHRlciA9PT0gdXBwZXIudGlsZXNbaV0ubGV0dGVyLFxuICAgICAgICAgICAgICAgIHRoaXMudGlsZXNbaV0ubGV0dGVyID09PSBsb3dlci50aWxlc1tpXS5sZXR0ZXJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRIaWdobGlnaHQoaXNIaWdobGlnaHRlZDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLnRpbGVzLmZvckVhY2godGlsZSA9PiB0aWxlLnNldEhpZ2hsaWdodChpc0hpZ2hsaWdodGVkKSk7XG4gICAgfVxuXG4gICAgaXNDb21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGV0dGVycy5sZW5ndGggPT09IHRoaXMuY29uZmlnLmxldHRlcnM7XG4gICAgfVxuXG4gICAgZG9lc01hdGNoKG90aGVyOiBHcmlkUm93KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBsZXRlKCkgfHwgIW90aGVyLmlzQ29tcGxldGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1hdGNoQ291bnQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlnLmxldHRlcnM7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMubGV0dGVyc1tpXSA9PT0gb3RoZXIubGV0dGVyc1tpXSkge1xuICAgICAgICAgICAgICAgIG1hdGNoQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXRjaENvdW50IDwgdGhpcy5jb25maWcubWF0Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgd2lnZ2xlKCkge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnd2lnZ2xlJywgJycpO1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgnd2lnZ2xlJyksIElOVkFMSURfQU5JTUFUSU9OX0xFTkdUSF9NUyk7XG4gICAgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdncmlkLXJvdycsIEdyaWRSb3cpO1xuIiwiaW1wb3J0IHsgR3JpZFJvdywgR3JpZFJvd0NvbmZpZyB9IGZyb20gXCIuL0dyaWRSb3dcIjtcbmltcG9ydCB7IEdSSURfUk9XX0dBUCwgR1JJRF9QQURESU5HIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBXT1JEX0xJU1QgfSBmcm9tIFwiLi9jb250ZXh0XCI7XG5cbmV4cG9ydCB0eXBlIEdhbWVHcmlkQ29uZmlnID0ge1xuICAgIHNlZWQ6IHN0cmluZztcbiAgICBsZXR0ZXJzOiBudW1iZXI7XG4gICAgbWF0Y2hlczogbnVtYmVyO1xuICAgIHJvd3M6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIEdhbWVHcmlkQXJlYSA9IHtcbiAgICB3aWR0aDogbnVtYmVyO1xuICAgIGhlaWdodDogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgR3JpZFNvbHV0aW9uID0ge1xuICAgIHVwcGVyOiBzdHJpbmdbXTtcbiAgICBzb2x1dGlvbjogc3RyaW5nO1xuICAgIGxvd2VyOiBzdHJpbmdbXTtcbn07XG5cbnR5cGUgR2FtZUdyaWRDYWxsYmFja3MgPSB7XG4gICAgb25XaW4/OiAoc29sdXRpb246IEdyaWRTb2x1dGlvbikgPT4gdm9pZDtcbiAgICBvbkxvYWQ/OiAoZ3JpZDogR2FtZUdyaWQpID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgY2xhc3MgR2FtZUdyaWQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgcHJpdmF0ZSBjb25maWc6IEdhbWVHcmlkQ29uZmlnO1xuICAgIHByaXZhdGUgY2FsbGJhY2tzOiBHYW1lR3JpZENhbGxiYWNrcztcbiAgICBwcml2YXRlIHJvd0NvbmZpZzogR3JpZFJvd0NvbmZpZztcbiAgICBwcml2YXRlIG51bUd1ZXNzZXM6IG51bWJlcjtcbiAgICBwcml2YXRlIHVwcGVyTWF0Y2hlczogc3RyaW5nW107XG4gICAgcHJpdmF0ZSBsb3dlck1hdGNoZXM6IHN0cmluZ1tdO1xuICAgIHByaXZhdGUgZ3JpZDogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB3b3Jkczogc3RyaW5nW107XG4gICAgcHJpdmF0ZSB1cHBlcjogR3JpZFJvdztcbiAgICBwcml2YXRlIHVwcGVyU3RhcnQ6IHN0cmluZztcbiAgICBwcml2YXRlIGxvd2VyOiBHcmlkUm93O1xuICAgIHByaXZhdGUgbG93ZXJTdGFydDogc3RyaW5nO1xuICAgIHByaXZhdGUgY3VycmVudDogR3JpZFJvdztcbiAgICB3aWR0aDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnOiBHYW1lR3JpZENvbmZpZywgY2FsbGJhY2tzOiBHYW1lR3JpZENhbGxiYWNrcykge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcblxuICAgICAgICB0aGlzLnJvd0NvbmZpZyA9IHtcbiAgICAgICAgICAgIGxldHRlcnM6IHRoaXMuY29uZmlnLmxldHRlcnMsXG4gICAgICAgICAgICBtYXRjaGVzOiB0aGlzLmNvbmZpZy5tYXRjaGVzLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubnVtR3Vlc3NlcyA9IDA7XG4gICAgICAgIHRoaXMudXBwZXJNYXRjaGVzID0gW107XG4gICAgICAgIHRoaXMubG93ZXJNYXRjaGVzID0gW107XG5cbiAgICAgICAgdGhpcy5pZCA9ICdnYW1lLWdyaWQnO1xuICAgICAgICB0aGlzLmdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5ncmlkLmNsYXNzTGlzdC5hZGQoJ2dyaWQnKTtcbiAgICAgICAgdGhpcy5ncmlkLmlkID0gJ2dyaWQnO1xuICAgICAgICB0aGlzLmdyaWQuc3R5bGUuc2V0UHJvcGVydHkoJy0tbnVtLXJvd3MnLCB0aGlzLmNvbmZpZy5yb3dzLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMuZ3JpZCk7XG5cbiAgICAgICAgV09SRF9MSVNULmFkZExpc3RlbmVyKCh3b3Jkczogc3RyaW5nW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMud29yZHMgPSB3b3JkcztcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUm93cygpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcy5vbkxvYWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Mub25Mb2FkKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRSYW5kb21Xb3JkKHNlZWQ6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy53b3Jkc1tNYXRoLmFicyh0aGlzLmdldEhhc2hDb2RlKHNlZWQpKSAlIHRoaXMud29yZHMubGVuZ3RoXTtcbiAgICB9XG5cbiAgICBjcmVhdGVSb3dzKCkge1xuICAgICAgICB0aGlzLnVwcGVyID0gbmV3IEdyaWRSb3codGhpcy5yb3dDb25maWcpO1xuICAgICAgICB0aGlzLnVwcGVyU3RhcnQgPSB0aGlzLmdldFJhbmRvbVdvcmQodGhpcy5jb25maWcuc2VlZCk7XG4gICAgICAgIHRoaXMudXBwZXIuc2V0TGV0dGVycyh0aGlzLnVwcGVyU3RhcnQpO1xuXG4gICAgICAgIHRoaXMubG93ZXIgPSBuZXcgR3JpZFJvdyh0aGlzLnJvd0NvbmZpZyk7XG4gICAgICAgIHRoaXMubG93ZXJTdGFydCA9IHRoaXMuZ2V0UmFuZG9tV29yZCh0aGlzLmNvbmZpZy5zZWVkICsgJ3NhbHQnKTtcbiAgICAgICAgdGhpcy5sb3dlci5zZXRMZXR0ZXJzKHRoaXMubG93ZXJTdGFydCk7XG4gICAgICAgIHRoaXMubG93ZXIuaWQgPSAnZ29hbCc7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gbmV3IEdyaWRSb3codGhpcy5yb3dDb25maWcpO1xuICAgICAgICB0aGlzLmN1cnJlbnQuc2V0SGlnaGxpZ2h0KHRydWUpO1xuXG4gICAgICAgIGNvbnN0IHJvd3NBYm92ZSA9IE1hdGguY2VpbCgodGhpcy5jb25maWcucm93cyAtIDMpIC8gMi4wKTtcbiAgICAgICAgY29uc3Qgcm93c0JlbG93ID0gTWF0aC5mbG9vcigodGhpcy5jb25maWcucm93cyAtIDMpIC8gMi4wKTtcblxuICAgICAgICBBcnJheShyb3dzQWJvdmUpLmZpbGwoMClcbiAgICAgICAgICAgIC5mb3JFYWNoKCgpID0+IHRoaXMuZ3JpZC5hcHBlbmRDaGlsZChuZXcgR3JpZFJvdyh0aGlzLnJvd0NvbmZpZykpKTtcbiAgICAgICAgdGhpcy5ncmlkLmFwcGVuZENoaWxkKHRoaXMudXBwZXIpO1xuICAgICAgICB0aGlzLmdyaWQuYXBwZW5kQ2hpbGQodGhpcy5jdXJyZW50KTtcbiAgICAgICAgdGhpcy5ncmlkLmFwcGVuZENoaWxkKHRoaXMubG93ZXIpO1xuICAgICAgICBBcnJheShyb3dzQmVsb3cpLmZpbGwoMClcbiAgICAgICAgICAgIC5mb3JFYWNoKCgpID0+IHRoaXMuZ3JpZC5hcHBlbmRDaGlsZChuZXcgR3JpZFJvdyh0aGlzLnJvd0NvbmZpZykpKTtcbiAgICB9XG5cbiAgICBzZXRMZXR0ZXJzKGxldHRlcnM6IHN0cmluZykge1xuICAgICAgICB0aGlzLmN1cnJlbnQuc2V0TGV0dGVycyhsZXR0ZXJzKTtcbiAgICAgICAgdGhpcy5jdXJyZW50LnVwZGF0ZU1hdGNoZXModGhpcy51cHBlciwgdGhpcy5sb3dlcik7XG4gICAgfVxuXG4gICAgZ2V0VGlsZVNpemUoZ3JpZEFyZWE6IEdhbWVHcmlkQXJlYSkge1xuICAgICAgICBjb25zdCBjb2x1bW5HYXBXaWR0aCA9IEdSSURfUk9XX0dBUCAqICh0aGlzLmNvbmZpZy5sZXR0ZXJzIC0gMSk7XG4gICAgICAgIGNvbnN0IG1heFRpbGVXaWR0aCA9IE1hdGguZmxvb3IoKGdyaWRBcmVhLndpZHRoIC0gY29sdW1uR2FwV2lkdGgpIC8gdGhpcy5jb25maWcubGV0dGVycyk7XG5cbiAgICAgICAgY29uc3QgZ3JpZFBhZGRpbmdIZWlnaHQgPSBHUklEX1BBRERJTkcgKiAyO1xuICAgICAgICBjb25zdCByb3dHYXBIZWlnaHQgPSBHUklEX1JPV19HQVAgKiAodGhpcy5jb25maWcucm93cyAtIDEpO1xuICAgICAgICBjb25zdCBtYXhUaWxlSGVpZ2h0ID0gTWF0aC5mbG9vcigoZ3JpZEFyZWEuaGVpZ2h0IC0gcm93R2FwSGVpZ2h0IC0gZ3JpZFBhZGRpbmdIZWlnaHQpIC8gdGhpcy5jb25maWcucm93cyk7XG5cbiAgICAgICAgcmV0dXJuIE1hdGgubWluKG1heFRpbGVXaWR0aCwgbWF4VGlsZUhlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3dpZHRoLCBoZWlnaHR9IHNpemVcbiAgICAgKiBAcmV0dXJucyBhbW91bnQgb2YgXCJsZWZ0b3ZlclwiIHNwYWNlIHVuZGVyIHRoZSBncmlkXG4gICAgICovXG4gICAgcmVzaXplKHNpemU6IEdhbWVHcmlkQXJlYSkge1xuICAgICAgICBjb25zdCBjb2x1bW5HYXBXaWR0aCA9IEdSSURfUk9XX0dBUCAqICh0aGlzLmNvbmZpZy5sZXR0ZXJzIC0gMSk7XG4gICAgICAgIGNvbnN0IHJvd0dhcEhlaWdodCA9IEdSSURfUk9XX0dBUCAqICh0aGlzLmNvbmZpZy5yb3dzIC0gMSk7XG4gICAgICAgIGNvbnN0IHRpbGVTaXplID0gdGhpcy5nZXRUaWxlU2l6ZShzaXplKTtcbiAgICAgICAgY29uc3QgZ3JpZFdpZHRoID0gdGlsZVNpemUgKiB0aGlzLmNvbmZpZy5sZXR0ZXJzICsgY29sdW1uR2FwV2lkdGg7XG4gICAgICAgIGNvbnN0IGdyaWRIZWlnaHQgPSB0aWxlU2l6ZSAqIHRoaXMuY29uZmlnLnJvd3MgKyByb3dHYXBIZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5ncmlkLnN0eWxlLndpZHRoID0gZ3JpZFdpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5ncmlkLnN0eWxlLmhlaWdodCA9IGdyaWRIZWlnaHQgKyAncHgnO1xuICAgICAgICByZXR1cm4gKHNpemUuaGVpZ2h0IC0gZ3JpZEhlaWdodCAtIDEwKTtcbiAgICB9XG5cbiAgICBzdWJtaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50LmlzQ29tcGxldGUoKSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50LndpZ2dsZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndvcmRzLmluY2x1ZGVzKHRoaXMuY3VycmVudC5nZXRMZXR0ZXJzKCkpKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQud2lnZ2xlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cHBlck1hdGNoID0gdGhpcy5jdXJyZW50LmRvZXNNYXRjaCh0aGlzLnVwcGVyKTtcbiAgICAgICAgY29uc3QgbG93ZXJNYXRjaCA9IHRoaXMuY3VycmVudC5kb2VzTWF0Y2godGhpcy5sb3dlcik7XG5cbiAgICAgICAgaWYgKCF1cHBlck1hdGNoICYmICFsb3dlck1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQud2lnZ2xlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm51bUd1ZXNzZXMrKztcblxuICAgICAgICBpZiAodXBwZXJNYXRjaCAmJiBsb3dlck1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLnVwcGVyTWF0Y2hlcy5wdXNoKHRoaXMudXBwZXIuZ2V0TGV0dGVycygpKTtcbiAgICAgICAgICAgIHRoaXMubG93ZXJNYXRjaGVzLnB1c2godGhpcy5sb3dlci5nZXRMZXR0ZXJzKCkpO1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3Mub25XaW4oe1xuICAgICAgICAgICAgICAgIHVwcGVyOiB0aGlzLnVwcGVyTWF0Y2hlcyxcbiAgICAgICAgICAgICAgICBzb2x1dGlvbjogdGhpcy5jdXJyZW50LmdldExldHRlcnMoKSxcbiAgICAgICAgICAgICAgICBsb3dlcjogdGhpcy5sb3dlck1hdGNoZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3Um93ID0gbmV3IEdyaWRSb3codGhpcy5yb3dDb25maWcpO1xuICAgICAgICBuZXdSb3cuc2V0SGlnaGxpZ2h0KHRydWUpO1xuICAgICAgICB0aGlzLmN1cnJlbnQuc2V0SGlnaGxpZ2h0KGZhbHNlKTtcblxuICAgICAgICBpZiAodXBwZXJNYXRjaCkge1xuICAgICAgICAgICAgdGhpcy51cHBlck1hdGNoZXMucHVzaCh0aGlzLnVwcGVyLmdldExldHRlcnMoKSk7XG4gICAgICAgICAgICB0aGlzLmdyaWQuY2hpbGRyZW5bMF0ucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnVwcGVyID0gdGhpcy5jdXJyZW50O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gbmV3Um93O1xuICAgICAgICAgICAgdGhpcy5ncmlkLmluc2VydEJlZm9yZSh0aGlzLmN1cnJlbnQsIHRoaXMubG93ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb3dlck1hdGNoZXMucHVzaCh0aGlzLmxvd2VyLmdldExldHRlcnMoKSk7XG4gICAgICAgICAgICB0aGlzLmdyaWQuY2hpbGRyZW5bdGhpcy5ncmlkLmNoaWxkcmVuLmxlbmd0aCAtIDFdLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5sb3dlciA9IHRoaXMuY3VycmVudDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IG5ld1JvdztcbiAgICAgICAgICAgIHRoaXMuZ3JpZC5pbnNlcnRCZWZvcmUodGhpcy5jdXJyZW50LCB0aGlzLmxvd2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldEhhc2hDb2RlKHN0cjogc3RyaW5nKSB7XG4gICAgICAgIHZhciBoYXNoID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjb2RlO1xuICAgICAgICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzaDtcbiAgICB9XG5cbiAgICBnZXRVcHBlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBwZXI7XG4gICAgfVxuXG4gICAgZ2V0TG93ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvd2VyO1xuICAgIH1cblxuICAgIGdldENvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZDtcbiAgICB9XG5cbiAgICBnZXROdW1HdWVzc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udW1HdWVzc2VzO1xuICAgIH1cblxuICAgIGdldFVwcGVyU3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwcGVyU3RhcnQ7XG4gICAgfVxuXG4gICAgZ2V0TG93ZXJTdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG93ZXJTdGFydDtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dhbWUtZ3JpZCcsIEdhbWVHcmlkKTtcbiIsImltcG9ydCB7IEdhbWVEYXRhIH0gZnJvbSBcIi4vR2FtZURhdGFcIjtcbmltcG9ydCB7IEdhbWVHcmlkLCBHYW1lR3JpZENvbmZpZywgR2FtZUdyaWRBcmVhIH0gZnJvbSAnLi9HYW1lR3JpZCc7XG5cbmZ1bmN0aW9uIHBhcmFncmFwaCh0ZXh0OiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgZWxlbS5pbm5lclRleHQgPSB0ZXh0LmpvaW4oJyAnKTtcbiAgICByZXR1cm4gZWxlbTtcbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVUdXRvcmlhbCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBvdmVybGF5OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHRleHRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBnYW1lRGF0YTogR2FtZURhdGEsIFxuICAgICAgICBncmlkQ29uZmlnOiBHYW1lR3JpZENvbmZpZywgXG4gICAgICAgIGdyaWRBcmVhOiBHYW1lR3JpZEFyZWFcbiAgICApIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknLCAndHV0b3JpYWwnLCAnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcblxuICAgICAgICB0aGlzLnRleHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy50ZXh0Q29udGFpbmVyLnN0eWxlLndpZHRoID0gZ3JpZEFyZWEud2lkdGggKyAncHgnO1xuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuc3R5bGUubWFyZ2luID0gJ2F1dG8nO1xuICAgICAgICB0aGlzLm92ZXJsYXkuYXBwZW5kQ2hpbGQodGhpcy50ZXh0Q29udGFpbmVyKTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0dXRvcmlhbC10aXRsZScpO1xuICAgICAgICB0aXRsZS5pbm5lclRleHQgPSAnSG93IHRvIFBsYXknO1xuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChwYXJhZ3JhcGgoW1xuICAgICAgICAgICAgJ1RoZSBnb2FsIG9mIExBTUFSRExFIGlzIHRvIGZpbmQgd29yZHMgd2hpY2ggXCJtYXRjaFwiIHRoZSB3b3JkcycsXG4gICAgICAgICAgICAnYWJvdmUgb3IgYmVsb3cgdGhlbS4gVHdvIHdvcmRzIFwibWF0Y2hcIiB3aGVuIHRoZXkgc2hhcmUgMyBvciBtb3JlJyxcbiAgICAgICAgICAgICdsZXR0ZXJzIGluIHRoZSBzYW1lIHBvc2l0aW9uLidcbiAgICAgICAgXSkpO1xuXG4gICAgICAgIGNvbnN0IGV4YW1wbGUxID0gbmV3IEdhbWVHcmlkKFxuICAgICAgICAgICAgeyAuLi5ncmlkQ29uZmlnLCByb3dzOiAzIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb25Mb2FkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGUxLmdldFVwcGVyKCkuc2V0TGV0dGVycygnaGVsbG8nKTtcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZTEuZ2V0TG93ZXIoKS5zZXRMZXR0ZXJzKCd3b3JsZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBleGFtcGxlMS5yZXNpemUoeyB3aWR0aDogZ3JpZEFyZWEud2lkdGgsIGhlaWdodDogMjAwIH0pO1xuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQoZXhhbXBsZTEpO1xuXG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChwYXJhZ3JhcGgoW1xuICAgICAgICAgICAgJ1doZW4geW91IGVudGVyIGEgd29yZCB0aGF0IG1hdGNoZXMgdGhlIHdvcmQgYWJvdmUgb3IgYmVsb3csIGl0JyxcbiAgICAgICAgICAgICd3aWxsIHJlcGxhY2UgdGhhdCB3b3JkLiBJZiB0aGUgd29yZCBtYXRjaGVzIGJvdGggd29yZHMsIHlvdSB3aW4hJ1xuICAgICAgICBdKSk7XG5cbiAgICAgICAgY29uc3QgZXhhbXBsZTIgPSBuZXcgR2FtZUdyaWQoXG4gICAgICAgICAgICB7IC4uLmdyaWRDb25maWcsIHJvd3M6IDMgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvbkxvYWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZTIuZ2V0VXBwZXIoKS5zZXRMZXR0ZXJzKCdoZWxsbycpO1xuICAgICAgICAgICAgICAgICAgICBleGFtcGxlMi5nZXRMb3dlcigpLnNldExldHRlcnMoJ3dvcmxkJyk7XG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGUyLnNldExldHRlcnMoJ3dvdWxkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGV4YW1wbGUyLnJlc2l6ZSh7IHdpZHRoOiBncmlkQXJlYS53aWR0aCwgaGVpZ2h0OiAyMDAgfSk7XG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChleGFtcGxlMik7XG5cbiAgICAgICAgdGhpcy50ZXh0Q29udGFpbmVyLmFwcGVuZENoaWxkKHBhcmFncmFwaChbXG4gICAgICAgICAgICAnSW4gdGhlIGV4YW1wbGUgYWJvdmUsIHRoZSBtaWRkbGUgd29yZCBcIndvdWxkXCIgbWF0Y2hlcyBcIndcIiwgXCJvXCIsJyxcbiAgICAgICAgICAgICdcImxcIiwgYW5kIFwiZFwiIGZyb20gXCJ3b3JsZFwiLiBJdCBhbHNvIG1hdGNoZXMgXCJsXCIgZnJvbSBcImhlbGxvXCIuIFdoZW4nLFxuICAgICAgICAgICAgJ2VudGVyZWQsIHRoZSBsb3dlciB3b3JkIFwid29ybGRcIiBpcyByZXBsYWNlZCB3aXRoIFwid291bGRcIiwgc28gdGhlJyxcbiAgICAgICAgICAgICduZXh0IHdvcmQgc2hvdWxkIG1hdGNoIGVpdGhlciBcImhlbGxvXCIgb3IgXCJ3b3VsZFwiLidcbiAgICAgICAgXSkpO1xuXG4gICAgICAgIGNvbnN0IGV4YW1wbGUzID0gbmV3IEdhbWVHcmlkKFxuICAgICAgICAgICAgeyAuLi5ncmlkQ29uZmlnLCByb3dzOiAzIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb25Mb2FkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGUzLmdldFVwcGVyKCkuc2V0TGV0dGVycygnaGVsbG8nKTtcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZTMuZ2V0TG93ZXIoKS5zZXRMZXR0ZXJzKCd3b3JsZCcpO1xuICAgICAgICAgICAgICAgICAgICBleGFtcGxlMy5zZXRMZXR0ZXJzKCd3b3VsZCcpO1xuICAgICAgICAgICAgICAgICAgICBleGFtcGxlMy5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgZXhhbXBsZTMucmVzaXplKHsgd2lkdGg6IGdyaWRBcmVhLndpZHRoLCBoZWlnaHQ6IDIwMCB9KTtcblxuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQoZXhhbXBsZTMpO1xuXG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChwYXJhZ3JhcGgoW1xuICAgICAgICAgICAgJ1RhcCBhbnl3aGVyZSB0byBjb250aW51ZS4gSGFwcHkgTW90aGVyXFwncyBEYXkhJ1xuICAgICAgICBdKSk7XG5cbiAgICAgICAgaWYgKCFnYW1lRGF0YS5oYXNWaXNpdGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICBnYW1lRGF0YS5zZXRWaXNpdGVkKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2hvdygpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cblxuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMub3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dhbWUtdHV0b3JpYWwnLCBHYW1lVHV0b3JpYWwpO1xuIiwidHlwZSBXb3JkR3JhcGggPSB7XG4gICAgW3dvcmQ6IHN0cmluZ106IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IGNsYXNzIEdhbWVTb2x2ZXIge1xuICAgIGdyYXBoOiBXb3JkR3JhcGg7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG5cbiAgICBzb2x2ZShzdGFydDogc3RyaW5nLCBlbmQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgcGF0aHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHBhdGhzLnNldChzdGFydCwgbnVsbCk7XG4gICAgICAgIHZhciB2aXNpdGluZyA9IFtzdGFydF07XG4gICAgICAgIHZhciB0b1Zpc2l0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICB3aGlsZSAodmlzaXRpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHZpc2l0aW5nLnBvcCgpO1xuICAgICAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhbY3VycmVudF0uZm9yRWFjaCh3b3JkID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhdGhzLmhhcyh3b3JkKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXRocy5zZXQod29yZCwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRvVmlzaXQucHVzaCh3b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQgPT09IGVuZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmlzaXRpbmcubGVuZ3RoID09PSAwICYmIHRvVmlzaXQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmlzaXRpbmcgPSB0b1Zpc2l0O1xuICAgICAgICAgICAgICAgIHRvVmlzaXQgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhdGggPSBbZW5kXTtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBlbmQ7XG4gICAgICAgIGlmIChwYXRocy5oYXMoZW5kKSkge1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHBhdGhzLmdldChjdXJyZW50KTtcbiAgICAgICAgICAgICAgICBwYXRoLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBsb2FkR3JhcGgoKTogUHJvbWlzZTxHYW1lU29sdmVyPiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPEdhbWVTb2x2ZXI+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGggPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCAnZ3JhcGguanNvbicpO1xuICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENPT0tJRV9FWFBJUkFUSU9OX0RBWVMgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxudHlwZSBQZXJzaXN0ZWREYXRhID0ge1xuICAgIHZpc2l0ZWQ6IGJvb2xlYW47XG4gICAgc3RyZWFrOiBudW1iZXI7XG4gICAgbW9zdFJlY2VudDogc3RyaW5nO1xufVxuXG50eXBlIENvb2tpZURhdGEgPSB7XG4gICAgW25hbWU6IHN0cmluZ106IGFueTtcbn07XG5cbnR5cGUgQ29va2llUGFyc2VyID0ge1xuICAgIFtuYW1lOiBzdHJpbmddOiAodmFsdWU6IHN0cmluZykgPT4gYW55XG59O1xuXG5leHBvcnQgY2xhc3MgR2FtZURhdGEge1xuICAgIHByaXZhdGUgZGF0ZTogRGF0ZTtcbiAgICBwcml2YXRlIGRhdGE6IFBlcnNpc3RlZERhdGE7XG4gICAgcHJpdmF0ZSBzY2hlbWE6IENvb2tpZVBhcnNlciA9IHtcbiAgICAgICAgdmlzaXRlZDogKHZhbHVlKSA9PiB2YWx1ZSA9PT0gJ3RydWUnLFxuICAgICAgICBzdHJlYWs6ICh2YWx1ZSkgPT4gcGFyc2VJbnQodmFsdWUpLFxuICAgICAgICBtb3N0UmVjZW50OiAodmFsdWUpID0+IHZhbHVlLFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcihkYXRlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgICAgIGNvbnN0IGNvb2tpZURhdGEgPSB0aGlzLnBhcnNlQ29va2llKCk7XG5cbiAgICAgICAgdGhpcy5kYXRhID0ge1xuICAgICAgICAgICAgdmlzaXRlZDogY29va2llRGF0YS52aXNpdGVkID8/IGZhbHNlLFxuICAgICAgICAgICAgc3RyZWFrOiBjb29raWVEYXRhLnN0cmVhayA/PyAwLFxuICAgICAgICAgICAgbW9zdFJlY2VudDogY29va2llRGF0YS5tb3N0UmVjZW50ID8/ICcnLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2hlY2tTdHJlYWsoKTtcbiAgICB9XG5cbiAgICBzZXRWaXNpdGVkKCkge1xuICAgICAgICB0aGlzLmRhdGEudmlzaXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2F2ZURhdGEoKTtcbiAgICB9XG5cbiAgICBoYXNWaXNpdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnZpc2l0ZWQ7XG4gICAgfVxuXG4gICAgY2hlY2tTdHJlYWsoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEubW9zdFJlY2VudCA9PT0gdGhpcy5mb3JtYXREYXRlKHRoaXMuZGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRheUJlZm9yZSA9IG5ldyBEYXRlKHRoaXMuZGF0ZSk7XG4gICAgICAgIGRheUJlZm9yZS5zZXREYXRlKHRoaXMuZGF0ZS5nZXREYXRlKCkgLSAxKTtcblxuICAgICAgICBpZiAodGhpcy5kYXRhLm1vc3RSZWNlbnQgIT09IHRoaXMuZm9ybWF0RGF0ZShkYXlCZWZvcmUpKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEuc3RyZWFrID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZFN0cmVhaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5tb3N0UmVjZW50ID09PSB0aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kYXRhLnN0cmVhaysrO1xuICAgICAgICB0aGlzLmRhdGEubW9zdFJlY2VudCA9IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUpO1xuICAgICAgICB0aGlzLnNhdmVEYXRhKCk7XG4gICAgfVxuXG4gICAgc2F2ZURhdGEoKSB7XG4gICAgICAgIGNvbnN0IGNvb2tpZUV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29va2llRXhwaXJhdGlvbkRhdGUuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSArIENPT0tJRV9FWFBJUkFUSU9OX0RBWVMpO1xuICAgICAgICBjb25zdCBleHBpcmF0aW9uU3RyaW5nID0gJ2V4cGlyZXM9JyArIGNvb2tpZUV4cGlyYXRpb25EYXRlLnRvVVRDU3RyaW5nKCk7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YSkuZm9yRWFjaCgoW25hbWUsIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIHZhbHVlLnRvU3RyaW5nKCkgKyAnOycgKyBleHBpcmF0aW9uU3RyaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwYXJzZUNvb2tpZSgpOiBDb29raWVEYXRhIHtcbiAgICAgICAgY29uc3QgZGF0YTogQ29va2llRGF0YSA9IHt9O1xuICAgICAgICBpZiAoZG9jdW1lbnQuY29va2llKSB7XG4gICAgICAgICAgICBkZWNvZGVVUkkoZG9jdW1lbnQuY29va2llKVxuICAgICAgICAgICAgICAgIC5zcGxpdCgnOycpXG4gICAgICAgICAgICAgICAgLm1hcChlbnRyeSA9PiBlbnRyeS5zcGxpdChcIj1cIikpXG4gICAgICAgICAgICAgICAgLmZvckVhY2goa2V5VmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlWYWx1ZVswXS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0ga2V5VmFsdWVbMV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjaGVtYS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2tleV0gPSB0aGlzLnNjaGVtYVtrZXldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICAgICAgZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICBdLmpvaW4oJycpO1xuICAgIH1cblxuICAgIGdldERhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGU7XG4gICAgfVxuXG4gICAgZ2V0U3RyZWFrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnN0cmVhaztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIRUFERVJfSUNPTl9TSVpFLCBNQVhfV0lEVEgsIEdSSURfUEFERElOR19XSURUSCwgS0VZQk9BUkRfSEVJR0hULCBIRUFERVJfSEVJR0hULCBET1dOX0FSUk9XLCBOT19BUlJPVywgVVBfQVJST1csIFNPTFVUSU9OX01BUktFUiB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgR2FtZUtleWJvYXJkIH0gZnJvbSBcIi4vR2FtZUtleWJvYXJkXCI7XG5pbXBvcnQgeyBHYW1lR3JpZCwgR3JpZFNvbHV0aW9uIH0gZnJvbSAnLi9HYW1lR3JpZCc7XG5pbXBvcnQgeyBHYW1lVHV0b3JpYWwgfSBmcm9tIFwiLi9HYW1lVHV0b3JpYWxcIjtcbmltcG9ydCB7IEdhbWVTb2x2ZXIgfSBmcm9tIFwiLi9HYW1lU29sdmVyXCI7XG5pbXBvcnQgeyBHYW1lRGF0YSB9IGZyb20gXCIuL0dhbWVEYXRhXCI7XG5cbnR5cGUgSGVhZGVySWNvbk9wdGlvbnMgPSB7XG4gICAgYWx0VGV4dD86IHN0cmluZztcbiAgICB0aXRsZT86IHN0cmluZztcbn07XG5cbnR5cGUgSGVhZGVyTGlua09wdGlvbnMgPSBIZWFkZXJJY29uT3B0aW9ucyAmIHtcbiAgICBuZXdUYWI/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgTGFtYXJkbGVHYW1lIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIHByaXZhdGUgZ2FtZURhdGE6IEdhbWVEYXRhO1xuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHdpblBvcHVwOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIGtleWJvYXJkOiBhbnk7XG4gICAgcHJpdmF0ZSB3aW5NZXNzYWdlOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHdpbk1lc3NhZ2VUZXh0OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHdpbk1lc3NhZ2VTaGFyZTogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBoZWFkZXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgc3BhY2VyTGVmdDogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0aXRsZVRleHQ6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgc3BhY2VyUmlnaHQ6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgdXJsU2VlZDogc3RyaW5nO1xuICAgIHByaXZhdGUgc2VlZDogYW55O1xuICAgIHByaXZhdGUgdHV0b3JpYWw6IEdhbWVUdXRvcmlhbDtcbiAgICBwcml2YXRlIGdyaWQ6IEdhbWVHcmlkO1xuICAgIHByaXZhdGUgc29sdmVyOiBHYW1lU29sdmVyO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IG5ldyBHYW1lRGF0YShuZXcgRGF0ZSgpKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb250YWluZXInKTtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG5cbiAgICAgICAgdGhpcy53aW5Qb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLndpblBvcHVwLmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknLCAnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMud2luUG9wdXApO1xuICAgICAgICB0aGlzLndpblBvcHVwLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndpblBvcHVwLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGhpcy5rZXlib2FyZC5kaXNhYmxlKCk7XG4gICAgICAgICAgICAvLyB0aGlzLmtleWJvYXJkLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLndpbk1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy53aW5NZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3dpbk1lc3NhZ2UnKTtcbiAgICAgICAgdGhpcy53aW5Qb3B1cC5hcHBlbmRDaGlsZCh0aGlzLndpbk1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMud2luTWVzc2FnZVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy53aW5NZXNzYWdlLmFwcGVuZENoaWxkKHRoaXMud2luTWVzc2FnZVRleHQpO1xuXG4gICAgICAgIHRoaXMud2luTWVzc2FnZVNoYXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMud2luTWVzc2FnZVNoYXJlLmNsYXNzTGlzdC5hZGQoJ3NoYXJlLXJlc3VsdCcpO1xuICAgICAgICB0aGlzLndpbk1lc3NhZ2VTaGFyZS5pbm5lclRleHQgPSAnU2hhcmUhJztcbiAgICAgICAgdGhpcy53aW5NZXNzYWdlLmFwcGVuZENoaWxkKHRoaXMud2luTWVzc2FnZVNoYXJlKTtcblxuICAgICAgICB0aGlzLmhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5oZWFkZXIpO1xuXG4gICAgICAgIHRoaXMuc3BhY2VyTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLnNwYWNlckxlZnQuY2xhc3NMaXN0LmFkZCgnc3BhY2VyLWxlZnQnKTtcbiAgICAgICAgdGhpcy5oZWFkZXIuYXBwZW5kQ2hpbGQodGhpcy5zcGFjZXJMZWZ0KTtcblxuICAgICAgICB0aGlzLnNwYWNlckxlZnQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIZWFkZXJMaW5rKFxuICAgICAgICAgICAgJ2hvbWUuc3ZnJyxcbiAgICAgICAgICAgIHRoaXMuZ2V0RGFpbHlQdXp6bGVMaW5rKCksXG4gICAgICAgICAgICB7IGFsdFRleHQ6ICdnbyB0byBkYWlseSBwdXp6bGUnIH1cbiAgICAgICAgKSk7XG5cbiAgICAgICAgdGhpcy5zcGFjZXJMZWZ0LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlSGVhZGVyTGluayhcbiAgICAgICAgICAgICdkaWNlLTMuc3ZnJyxcbiAgICAgICAgICAgIHRoaXMuZ2V0UmFuZG9tUHV6emxlTGluaygpLFxuICAgICAgICAgICAgeyBhbHRUZXh0OiAnZ28gdG8gcmFuZG9tIHB1enpsZScgfVxuICAgICAgICApKTtcblxuICAgICAgICB0aGlzLnRpdGxlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLnRpdGxlVGV4dC5pbm5lclRleHQgPSAnTEFNQVJETEUnO1xuICAgICAgICB0aGlzLnRpdGxlVGV4dC5jbGFzc0xpc3QuYWRkKCd0aXRsZS10ZXh0Jyk7XG4gICAgICAgIHRoaXMuaGVhZGVyLmFwcGVuZENoaWxkKHRoaXMudGl0bGVUZXh0KTtcblxuICAgICAgICB0aGlzLnNwYWNlclJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuc3BhY2VyUmlnaHQuY2xhc3NMaXN0LmFkZCgnc3BhY2VyLXJpZ2h0Jyk7XG4gICAgICAgIHRoaXMuaGVhZGVyLmFwcGVuZENoaWxkKHRoaXMuc3BhY2VyUmlnaHQpO1xuXG4gICAgICAgIHRoaXMuc3BhY2VyUmlnaHQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIZWFkZXJMaW5rKFxuICAgICAgICAgICAgJ3NvdXJjZS5zdmcnLFxuICAgICAgICAgICAgJ2h0dHBzOi8vZ2l0aHViLmNvbS9haGFnZ2FydC9sYW1hcmRsZScsXG4gICAgICAgICAgICB7IG5ld1RhYjogdHJ1ZSwgYWx0VGV4dDogJ2dvIHRvIHNvdXJjZSBjb2RlJyB9XG4gICAgICAgICkpO1xuXG4gICAgICAgIGNvbnN0IGhlbHBCdXR0b24gPSB0aGlzLmNyZWF0ZUhlYWRlckljb24oJ2hlbHAuc3ZnJywge1xuICAgICAgICAgICAgYWx0VGV4dDogJ3Nob3cgdHV0b3JpYWwnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNwYWNlclJpZ2h0LmFwcGVuZENoaWxkKGhlbHBCdXR0b24pO1xuXG4gICAgICAgIHRoaXMudXJsU2VlZCA9IG5ldyBVUkwoZG9jdW1lbnQubG9jYXRpb24uaHJlZikuc2VhcmNoUGFyYW1zLmdldCgnc2VlZCcpO1xuICAgICAgICBjb25zdCBkYXRlU2VlZCA9IHRoaXMuZ2FtZURhdGEuZm9ybWF0RGF0ZSh0aGlzLmdhbWVEYXRhLmdldERhdGUoKSk7XG4gICAgICAgIHRoaXMuc2VlZCA9IHRoaXMudXJsU2VlZCA/PyBkYXRlU2VlZDtcblxuICAgICAgICBjb25zdCBncmlkQ29uZmlnID0ge1xuICAgICAgICAgICAgc2VlZDogdGhpcy5zZWVkLFxuICAgICAgICAgICAgcm93czogNyxcbiAgICAgICAgICAgIGxldHRlcnM6IDUsXG4gICAgICAgICAgICBtYXRjaGVzOiAzLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudHV0b3JpYWwgPSBuZXcgR2FtZVR1dG9yaWFsKFxuICAgICAgICAgICAgdGhpcy5nYW1lRGF0YSxcbiAgICAgICAgICAgIGdyaWRDb25maWcsXG4gICAgICAgICAgICB0aGlzLmdldEdyaWRBcmVhKClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50dXRvcmlhbCk7XG5cbiAgICAgICAgaGVscEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50dXRvcmlhbC5zaG93KCk7XG5cbiAgICAgICAgdGhpcy5ncmlkID0gbmV3IEdhbWVHcmlkKGdyaWRDb25maWcsIHtcbiAgICAgICAgICAgIG9uV2luOiBzb2x1dGlvbiA9PiB0aGlzLndpbkdhbWUoc29sdXRpb24pLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMuZ3JpZCk7XG5cbiAgICAgICAgdGhpcy5rZXlib2FyZCA9IG5ldyBHYW1lS2V5Ym9hcmQodGhpcy5ncmlkKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMua2V5Ym9hcmQpO1xuXG4gICAgICAgIHRoaXMuc29sdmVyID0gbmV3IEdhbWVTb2x2ZXIoKTtcblxuICAgICAgICB0aGlzLnJlc2l6ZUdyaWQoKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHRoaXMucmVzaXplR3JpZCgpKTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdCYWNrc3BhY2UnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlib2FyZC5iYWNrc3BhY2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleWJvYXJkLnN1Ym1pdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleS5tYXRjaCgvXlthLXpdJC8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlib2FyZC5hcHBlbmRMZXR0ZXIoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVIZWFkZXJMaW5rKFxuICAgICAgICBpY29uUGF0aDogc3RyaW5nLCBcbiAgICAgICAgbGlua1BhdGg6IHN0cmluZywgXG4gICAgICAgIG9wdGlvbnM6IEhlYWRlckxpbmtPcHRpb25zID0ge31cbiAgICApOiBIVE1MQW5jaG9yRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgbGlua1BhdGgpO1xuICAgICAgICBpZiAob3B0aW9ucy5uZXdUYWIpXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICBsaW5rLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlSGVhZGVySWNvbihpY29uUGF0aCwgb3B0aW9ucykpO1xuICAgICAgICByZXR1cm4gbGluaztcbiAgICB9XG5cbiAgICBjcmVhdGVIZWFkZXJJY29uKFxuICAgICAgICBwYXRoOiBzdHJpbmcsIFxuICAgICAgICBvcHRpb25zOiBIZWFkZXJJY29uT3B0aW9ucyA9IHt9XG4gICAgKTogSFRNTEltYWdlRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsIHBhdGgpO1xuICAgICAgICBpY29uLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBIRUFERVJfSUNPTl9TSVpFLnRvU3RyaW5nKCkpO1xuICAgICAgICBpY29uLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgSEVBREVSX0lDT05fU0laRS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWx0VGV4dCkge1xuICAgICAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsIG9wdGlvbnMuYWx0VGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudGl0bGUgfHwgb3B0aW9ucy5hbHRUZXh0KSB7XG4gICAgICAgICAgICBpY29uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBvcHRpb25zLnRpdGxlID8/IG9wdGlvbnMuYWx0VGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGljb247XG4gICAgfVxuXG4gICAgZ2V0R3JpZEFyZWEoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogTWF0aC5taW4oTUFYX1dJRFRILCB3aW5kb3cuaW5uZXJXaWR0aCAtIEdSSURfUEFERElOR19XSURUSCksXG4gICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAtIEtFWUJPQVJEX0hFSUdIVCAtIEhFQURFUl9IRUlHSFQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmVzaXplR3JpZCgpIHtcbiAgICAgICAgY29uc3QgbGVmdG92ZXIgPSB0aGlzLmdyaWQucmVzaXplKHRoaXMuZ2V0R3JpZEFyZWEoKSk7XG4gICAgICAgIHRoaXMuZ3JpZC5nZXRDb250YWluZXIoKS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBsZWZ0b3ZlciArICdweCc7XG4gICAgfVxuXG4gICAgY29tcHV0ZU1hdGNoaW5nKHNvbHV0aW9uOiBzdHJpbmcsIG1hdGNoZXM6IHN0cmluZ1tdKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nTGV0dGVycyA9IFtdO1xuICAgICAgICB2YXIgY3VycmVudCA9IHNvbHV0aW9uO1xuXG4gICAgICAgIC8vIGl0ZXJhdGUgdGhlIGFycmF5IGluIHJldmVyc2VcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCAtIGkgLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRNYXRjaCA9IGN1cnJlbnRcbiAgICAgICAgICAgICAgICAuc3BsaXQoJycpXG4gICAgICAgICAgICAgICAgLm1hcCgobGV0dGVyLCBwb3MpID0+IFtsZXR0ZXIsIG5leHQuY2hhckF0KHBvcyldKVxuICAgICAgICAgICAgICAgIC5tYXAoKFthLCBiXSkgPT4gYSA9PT0gYik7XG4gICAgICAgICAgICBtYXRjaGluZ0xldHRlcnMucHVzaChjdXJyZW50TWF0Y2gpO1xuICAgICAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV2ZXJzZSB0aGUgb3V0cHV0XG4gICAgICAgIG1hdGNoaW5nTGV0dGVycy5yZXZlcnNlKCk7XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nTGV0dGVycztcbiAgICB9XG5cbiAgICBmb3JtYXRNYXRjaGluZyhcbiAgICAgICAgc2VxdWVuY2U6IGJvb2xlYW5bXVtdLCBcbiAgICAgICAgbWF0Y2hDaGFyOiBzdHJpbmcsIFxuICAgICAgICBub25NYXRjaENoYXI6IHN0cmluZ1xuICAgICk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHNlcXVlbmNlXG4gICAgICAgICAgICAubWFwKHJvd01hdGNoID0+IHJvd01hdGNoXG4gICAgICAgICAgICAgICAgLm1hcChsZXR0ZXJNYXRjaCA9PiBsZXR0ZXJNYXRjaCA/IG1hdGNoQ2hhciA6IG5vbk1hdGNoQ2hhcilcbiAgICAgICAgICAgICAgICAuam9pbignJylcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgY3JlYXRlU2hhcmVNZXNzYWdlKHNvbHV0aW9uOiBHcmlkU29sdXRpb24sIGhyZWY6IHN0cmluZykge1xuICAgICAgICBjb25zdCB1cHBlclNlcXVlbmNlID0gdGhpcy5mb3JtYXRNYXRjaGluZyhcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoaW5nKHNvbHV0aW9uLnNvbHV0aW9uLCBzb2x1dGlvbi51cHBlciksXG4gICAgICAgICAgICBET1dOX0FSUk9XLCBOT19BUlJPV1xuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGxvd2VyU2VxdWVuY2UgPSB0aGlzLmZvcm1hdE1hdGNoaW5nKFxuICAgICAgICAgICAgdGhpcy5jb21wdXRlTWF0Y2hpbmcoc29sdXRpb24uc29sdXRpb24sIHNvbHV0aW9uLmxvd2VyKSxcbiAgICAgICAgICAgIFVQX0FSUk9XLCBOT19BUlJPV1xuICAgICAgICApO1xuXG4gICAgICAgIGxvd2VyU2VxdWVuY2UucmV2ZXJzZSgpO1xuXG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0KFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICdsYW1hcmRsZScsXG4gICAgICAgICAgICAgICAgaHJlZixcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWQuZ2V0TnVtR3Vlc3NlcygpLnRvU3RyaW5nKCkgKyAnIHRyaWVzJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB1cHBlclNlcXVlbmNlLFxuICAgICAgICAgICAgW3NvbHV0aW9uLnNvbHV0aW9uLnNwbGl0KCcnKS5tYXAoKCkgPT4gU09MVVRJT05fTUFSS0VSKS5qb2luKCcnKV0sXG4gICAgICAgICAgICBsb3dlclNlcXVlbmNlXG4gICAgICAgICkuam9pbignXFxuJyk7XG4gICAgfVxuXG4gICAgY29tcHV0ZVBhcigpIHtcbiAgICAgICAgY29uc3QgbWluU29sdXRpb24gPSB0aGlzLnNvbHZlci5zb2x2ZShcbiAgICAgICAgICAgIHRoaXMuZ3JpZC5nZXRVcHBlclN0YXJ0KCksXG4gICAgICAgICAgICB0aGlzLmdyaWQuZ2V0TG93ZXJTdGFydCgpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgxLCBtaW5Tb2x1dGlvbi5sZW5ndGggLSAyKTtcbiAgICB9XG5cbiAgICBhc3luYyB3aW5HYW1lKHNvbHV0aW9uOiBHcmlkU29sdXRpb24pIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUxpbmVzID0gW107XG4gICAgICAgIG1lc3NhZ2VMaW5lcy5wdXNoKCdZb3Ugd29uIGluICcgKyB0aGlzLmdyaWQuZ2V0TnVtR3Vlc3NlcygpICsgJyB0cmllcyEnKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnNvbHZlci5sb2FkR3JhcGgoKTtcblxuICAgICAgICBtZXNzYWdlTGluZXMucHVzaCgnUGFyOiAnICsgdGhpcy5jb21wdXRlUGFyKCkpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlZWQgPT09IHRoaXMuZ2FtZURhdGEuZm9ybWF0RGF0ZSh0aGlzLmdhbWVEYXRhLmdldERhdGUoKSkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZURhdGEuYWRkU3RyZWFrKCk7XG4gICAgICAgICAgICBtZXNzYWdlTGluZXMucHVzaCgnQ3VycmVudCBTdHJlYWs6ICcgKyB0aGlzLmdhbWVEYXRhLmdldFN0cmVhaygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMud2luUG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG5cbiAgICAgICAgdGhpcy53aW5NZXNzYWdlVGV4dC5pbm5lclRleHQgPSBtZXNzYWdlTGluZXMuam9pbignXFxuJyk7XG4gICAgICAgIHRoaXMud2luTWVzc2FnZVNoYXJlLm9uY2xpY2sgPSBlID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBzaGFyZU1lc3NhZ2UgPSB0aGlzLmNyZWF0ZVNoYXJlTWVzc2FnZShcbiAgICAgICAgICAgICAgICBzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4gKyAnP3NlZWQ9JyArIHRoaXMuc2VlZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGZhaWxNZXNzYWdlID0gJ0ZhaWxlZCB0byBTaGFyZSA6KCc7XG5cbiAgICAgICAgICAgIGNvbnN0IG9sZFRleHQgPSB0aGlzLndpbk1lc3NhZ2VTaGFyZS5pbm5lclRleHQ7XG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yLnNoYXJlKSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLnNoYXJlKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGRvY3VtZW50LnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzaGFyZU1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHRoaXMud2luTWVzc2FnZVNoYXJlLmlubmVyVGV4dCA9IGZhaWxNZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCkge1xuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHNoYXJlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdGhpcy53aW5NZXNzYWdlU2hhcmUuaW5uZXJUZXh0ID0gJ0NvcGllZCB0byBjbGlwYm9hcmQhJztcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLndpbk1lc3NhZ2VTaGFyZS5pbm5lclRleHQgPSBvbGRUZXh0LCAzMDAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aW5NZXNzYWdlU2hhcmUuaW5uZXJUZXh0ID0gZmFpbE1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0RGFpbHlQdXp6bGVMaW5rKCkge1xuICAgICAgICByZXR1cm4gJy4vJztcbiAgICB9XG5cbiAgICBnZXRSYW5kb21QdXp6bGVMaW5rKCkge1xuICAgICAgICByZXR1cm4gJy4vP3NlZWQ9JyArIHRoaXMucmFuZG9tU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmFuZG9tU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBjb2RlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgIGNvZGVzLnB1c2goTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29kZXMuam9pbignJyk7XG4gICAgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdsYW1hcmRsZS1nYW1lJywgTGFtYXJkbGVHYW1lKTtcbiIsImNvbnN0IFJFUVVJUkVEX01BVENIRVMgPSAzO1xuZXhwb3J0IGNvbnN0IEdSSURfUk9XX0dBUCA9IDU7XG5jb25zdCBHUklEX0NPTF9HQVAgPSA1O1xuZXhwb3J0IGNvbnN0IE1BWF9XSURUSCA9IDUwMDtcbmNvbnN0IEtFWUJPQVJEX0hFSUdIVF9NSU5fUEVSQ0VOVCA9IDAuMjU7XG5jb25zdCBOVU1fUk9XUyA9IDc7XG5leHBvcnQgY29uc3QgTlVNX0xFVFRFUlMgPSA1O1xuY29uc3QgS0VZX0hFSUdIVCA9IDU4O1xuY29uc3QgS0VZX01BUkdJTiA9IDU7XG5leHBvcnQgY29uc3QgR1JJRF9QQURESU5HID0gMTA7XG5leHBvcnQgY29uc3QgSEVBREVSX0hFSUdIVCA9IDUwO1xuZXhwb3J0IGNvbnN0IElOVkFMSURfQU5JTUFUSU9OX0xFTkdUSF9NUyA9IDQwMDtcbmV4cG9ydCBjb25zdCBLRVlCT0FSRF9IRUlHSFQgPSBLRVlfSEVJR0hUICogMyArIEtFWV9NQVJHSU4gKiAyO1xuZXhwb3J0IGNvbnN0IEdSSURfUEFERElOR19XSURUSCA9IEdSSURfUEFERElORyAqIDI7XG5leHBvcnQgY29uc3QgSEVBREVSX0lDT05fU0laRSA9IDI1O1xuZXhwb3J0IGNvbnN0IENPT0tJRV9FWFBJUkFUSU9OX0RBWVMgPSAzO1xuZXhwb3J0IGNvbnN0IFVQX0FSUk9XID0gJ1xcdUQ4M0RcXHVERDNDJztcbmV4cG9ydCBjb25zdCBET1dOX0FSUk9XID0gJ1xcdUQ4M0RcXHVERDNEJztcbmV4cG9ydCBjb25zdCBOT19BUlJPVyA9ICdcXHUyM0ZBJztcbmV4cG9ydCBjb25zdCBTT0xVVElPTl9NQVJLRVIgPSAnXFx1MDAyQVxcdUZFMEZcXHUyMEUzJztcbiIsImltcG9ydCB7IE5VTV9MRVRURVJTIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBXb3JkTGlzdCB9IGZyb20gXCIuL1dvcmRMaXN0XCI7XG5cblxuZXhwb3J0IGNvbnN0IFdPUkRfTElTVCA9IG5ldyBXb3JkTGlzdChOVU1fTEVUVEVSUyk7XG5leHBvcnQgZnVuY3Rpb24gbG9hZFdvcmRzKGNhbGxiYWNrOiAocmVzcG9uc2VUZXh0OiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBlID0+IHtcbiAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJlcXVlc3Qub3BlbignR0VUJywgJ2ZpdmUtbGV0dGVycy50eHQnKTtcbiAgICByZXF1ZXN0LnNlbmQoKTtcbn1cbiIsImV4cG9ydCBjbGFzcyBXb3JkTGlzdCB7XG4gICAgcHJpdmF0ZSBudW1MZXR0ZXJzOiBhbnk7XG4gICAgcHJpdmF0ZSBpc1JlYWR5OiBib29sZWFuO1xuICAgIHByaXZhdGUgb25SZWFkeTogKCh3b3Jkczogc3RyaW5nW10pID0+IHZvaWQpW107XG4gICAgcHJpdmF0ZSB3b3Jkczogc3RyaW5nW107XG5cbiAgICBjb25zdHJ1Y3RvcihudW1MZXR0ZXJzOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5udW1MZXR0ZXJzID0gbnVtTGV0dGVycztcbiAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25SZWFkeSA9IFtdO1xuICAgICAgICB0aGlzLndvcmRzID0gW107XG4gICAgfVxuXG4gICAgYWRkTGlzdGVuZXIoY2FsbGJhY2s6ICh3b3Jkczogc3RyaW5nW10pID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5vblJlYWR5LnB1c2goY2FsbGJhY2spO1xuICAgICAgICBpZiAodGhpcy5pc1JlYWR5KSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzLndvcmRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFdvcmRzKHJhd1dvcmRzOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy53b3JkcyA9IHJhd1dvcmRzLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vblJlYWR5LmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2sodGhpcy53b3JkcykpO1xuICAgIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgbG9hZFdvcmRzLCBXT1JEX0xJU1QgfSBmcm9tIFwiLi9jb250ZXh0XCI7XG5cbnJlcXVpcmUoJy4vTGFtYXJkbGVHYW1lJyk7XG5cbmxvYWRXb3Jkcyh3b3JkcyA9PiBXT1JEX0xJU1Quc2V0V29yZHMod29yZHMpKTtcbiJdLCJuYW1lcyI6WyJHYW1lS2V5Ym9hcmQiLCJIVE1MRWxlbWVudCIsImNvbnN0cnVjdG9yIiwiZ3JpZCIsInN1cGVyIiwidGhpcyIsImxldHRlcnMiLCJlbmFibGVkIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJtYXJnaW4iLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVJvdyIsImJhY2tzcGFjZSIsImxlbmd0aCIsInN1YnN0cmluZyIsInNldExldHRlcnMiLCJhcHBlbmRMZXR0ZXIiLCJsZXR0ZXIiLCJzdWJtaXQiLCJyb3ciLCJjbGFzc0xpc3QiLCJhZGQiLCJzcGFjZXIiLCJrZXkiLCJpbm5lclRleHQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzYWJsZSIsImVuYWJsZSIsInNob3ciLCJyZW1vdmUiLCJoaWRlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJHcmlkTGV0dGVyIiwicG9zIiwic2V0TGV0dGVyIiwic2V0TWF0Y2giLCJtYXRjaFVwcGVyIiwibWF0Y2hMb3dlciIsInNldEhpZ2hsaWdodCIsImlzSGlnaGxpZ2h0ZWQiLCJib3JkZXJDb2xvciIsIkdyaWRSb3ciLCJjb25maWciLCJ0aWxlcyIsImkiLCJ0aWxlIiwicHVzaCIsImdldEF0dHJpYnV0ZSIsImdldExldHRlcnMiLCJwYWRkZWRMZXR0ZXJzIiwicGFkRW5kIiwidXBkYXRlTWF0Y2hlcyIsInVwcGVyIiwibG93ZXIiLCJmb3JFYWNoIiwiaXNDb21wbGV0ZSIsImRvZXNNYXRjaCIsIm90aGVyIiwibWF0Y2hDb3VudCIsIm1hdGNoZXMiLCJ3aWdnbGUiLCJzZXRBdHRyaWJ1dGUiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwicmVtb3ZlQXR0cmlidXRlIiwiR2FtZUdyaWQiLCJjYWxsYmFja3MiLCJyb3dDb25maWciLCJudW1HdWVzc2VzIiwidXBwZXJNYXRjaGVzIiwibG93ZXJNYXRjaGVzIiwiaWQiLCJzZXRQcm9wZXJ0eSIsInJvd3MiLCJ0b1N0cmluZyIsIlciLCJ3b3JkcyIsImNyZWF0ZVJvd3MiLCJvbkxvYWQiLCJnZXRSYW5kb21Xb3JkIiwic2VlZCIsIk1hdGgiLCJhYnMiLCJnZXRIYXNoQ29kZSIsInVwcGVyU3RhcnQiLCJsb3dlclN0YXJ0IiwiY3VycmVudCIsInJvd3NBYm92ZSIsImNlaWwiLCJyb3dzQmVsb3ciLCJmbG9vciIsIkFycmF5IiwiZmlsbCIsImdldFRpbGVTaXplIiwiZ3JpZEFyZWEiLCJjb2x1bW5HYXBXaWR0aCIsIm1heFRpbGVXaWR0aCIsIndpZHRoIiwiZ3JpZFBhZGRpbmdIZWlnaHQiLCJyb3dHYXBIZWlnaHQiLCJtYXhUaWxlSGVpZ2h0IiwiaGVpZ2h0IiwibWluIiwicmVzaXplIiwic2l6ZSIsInRpbGVTaXplIiwiZ3JpZFdpZHRoIiwiZ3JpZEhlaWdodCIsImluY2x1ZGVzIiwidXBwZXJNYXRjaCIsImxvd2VyTWF0Y2giLCJvbldpbiIsInNvbHV0aW9uIiwibmV3Um93IiwiY2hpbGRyZW4iLCJpbnNlcnRCZWZvcmUiLCJzdHIiLCJoYXNoIiwiY2hhckNvZGVBdCIsImdldFVwcGVyIiwiZ2V0TG93ZXIiLCJnZXRDb250YWluZXIiLCJnZXROdW1HdWVzc2VzIiwiZ2V0VXBwZXJTdGFydCIsImdldExvd2VyU3RhcnQiLCJwYXJhZ3JhcGgiLCJ0ZXh0IiwiZWxlbSIsImpvaW4iLCJHYW1lVHV0b3JpYWwiLCJnYW1lRGF0YSIsImdyaWRDb25maWciLCJvdmVybGF5IiwidGV4dENvbnRhaW5lciIsInRpdGxlIiwiZXhhbXBsZTEiLCJleGFtcGxlMiIsImV4YW1wbGUzIiwiaGFzVmlzaXRlZCIsIm9uY2xpY2siLCJzZXRWaXNpdGVkIiwiR2FtZVNvbHZlciIsInNvbHZlIiwic3RhcnQiLCJlbmQiLCJwYXRocyIsIk1hcCIsInNldCIsInZpc2l0aW5nIiwidG9WaXNpdCIsInBvcCIsImRvbmUiLCJncmFwaCIsIndvcmQiLCJoYXMiLCJwYXRoIiwiZ2V0IiwibG9hZEdyYXBoIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJlIiwicmVhZHlTdGF0ZSIsIkRPTkUiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJvcGVuIiwic2VuZCIsIkdhbWVEYXRhIiwiZGF0ZSIsInNjaGVtYSIsInZpc2l0ZWQiLCJ2YWx1ZSIsInN0cmVhayIsInBhcnNlSW50IiwibW9zdFJlY2VudCIsImNvb2tpZURhdGEiLCJwYXJzZUNvb2tpZSIsImRhdGEiLCJjaGVja1N0cmVhayIsInNhdmVEYXRhIiwiZm9ybWF0RGF0ZSIsImRheUJlZm9yZSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImFkZFN0cmVhayIsImNvb2tpZUV4cGlyYXRpb25EYXRlIiwiZXhwaXJhdGlvblN0cmluZyIsInRvVVRDU3RyaW5nIiwiT2JqZWN0IiwiZW50cmllcyIsIm5hbWUiLCJjb29raWUiLCJkZWNvZGVVUkkiLCJzcGxpdCIsIm1hcCIsImVudHJ5Iiwia2V5VmFsdWUiLCJ0cmltIiwiaGFzT3duUHJvcGVydHkiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXRTdHJlYWsiLCJMYW1hcmRsZUdhbWUiLCJ3aW5Qb3B1cCIsImtleWJvYXJkIiwid2luTWVzc2FnZSIsIndpbk1lc3NhZ2VUZXh0Iiwid2luTWVzc2FnZVNoYXJlIiwiaGVhZGVyIiwic3BhY2VyTGVmdCIsImNyZWF0ZUhlYWRlckxpbmsiLCJnZXREYWlseVB1enpsZUxpbmsiLCJhbHRUZXh0IiwiZ2V0UmFuZG9tUHV6emxlTGluayIsInRpdGxlVGV4dCIsInNwYWNlclJpZ2h0IiwibmV3VGFiIiwiaGVscEJ1dHRvbiIsImNyZWF0ZUhlYWRlckljb24iLCJ1cmxTZWVkIiwiVVJMIiwibG9jYXRpb24iLCJocmVmIiwic2VhcmNoUGFyYW1zIiwiZGF0ZVNlZWQiLCJ0dXRvcmlhbCIsImdldEdyaWRBcmVhIiwid2luR2FtZSIsImFwcGVuZCIsInNvbHZlciIsInJlc2l6ZUdyaWQiLCJtYXRjaCIsImljb25QYXRoIiwibGlua1BhdGgiLCJvcHRpb25zIiwibGluayIsImljb24iLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJsZWZ0b3ZlciIsIm1hcmdpbkJvdHRvbSIsImNvbXB1dGVNYXRjaGluZyIsIm1hdGNoaW5nTGV0dGVycyIsIm5leHQiLCJjdXJyZW50TWF0Y2giLCJjaGFyQXQiLCJhIiwiYiIsInJldmVyc2UiLCJmb3JtYXRNYXRjaGluZyIsInNlcXVlbmNlIiwibWF0Y2hDaGFyIiwibm9uTWF0Y2hDaGFyIiwicm93TWF0Y2giLCJsZXR0ZXJNYXRjaCIsImNyZWF0ZVNoYXJlTWVzc2FnZSIsInVwcGVyU2VxdWVuY2UiLCJsb3dlclNlcXVlbmNlIiwicHJvdG90eXBlIiwiY29uY2F0IiwiY29tcHV0ZVBhciIsIm1pblNvbHV0aW9uIiwibWF4IiwibWVzc2FnZUxpbmVzIiwic3RvcFByb3BhZ2F0aW9uIiwic2hhcmVNZXNzYWdlIiwib3JpZ2luIiwiZmFpbE1lc3NhZ2UiLCJvbGRUZXh0IiwibmF2aWdhdG9yIiwic2hhcmUiLCJjYXRjaCIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsInJhbmRvbVN0cmluZyIsImNvZGVzIiwicmFuZG9tIiwiR1JJRF9ST1dfR0FQIiwiTUFYX1dJRFRIIiwiTlVNX0xFVFRFUlMiLCJHUklEX1BBRERJTkciLCJIRUFERVJfSEVJR0hUIiwiSU5WQUxJRF9BTklNQVRJT05fTEVOR1RIX01TIiwiS0VZQk9BUkRfSEVJR0hUIiwiS0VZX0hFSUdIVCIsIkdSSURfUEFERElOR19XSURUSCIsIkhFQURFUl9JQ09OX1NJWkUiLCJDT09LSUVfRVhQSVJBVElPTl9EQVlTIiwiVVBfQVJST1ciLCJET1dOX0FSUk9XIiwiTk9fQVJST1ciLCJTT0xVVElPTl9NQVJLRVIiLCJXT1JEX0xJU1QiLCJudW1MZXR0ZXJzIiwiaXNSZWFkeSIsIm9uUmVhZHkiLCJhZGRMaXN0ZW5lciIsImNhbGxiYWNrIiwic2V0V29yZHMiLCJyYXdXb3JkcyIsImxvYWRXb3JkcyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwib2JqIiwicHJvcCIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciXSwic291cmNlUm9vdCI6IiJ9