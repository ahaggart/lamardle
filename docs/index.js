(()=>{"use strict";var t,e={508:(t,e,s)=>{s.r(e),s.d(e,{LamardleGame:()=>g});var i=s(601);class r extends HTMLElement{constructor(t){super(),this.grid=t,this.letters="",this.enabled=!0,this.container=document.createElement("div"),this.container.style.margin="0 5px",this.container.appendChild(this.createRow("qwertyuiop")),this.container.appendChild(this.createRow(" asdfghjkl ")),this.container.appendChild(this.createRow("+zxcvbnm-")),this.appendChild(this.container)}backspace(){this.enabled&&0!=this.letters.length&&(this.letters=this.letters.substring(0,this.letters.length-1),this.grid.setLetters(this.letters))}appendLetter(t){this.enabled&&5!=this.letters.length&&(this.letters+=t,this.grid.setLetters(this.letters))}submit(){this.enabled&&this.grid.submit()&&(this.letters="")}createRow(t){const e=document.createElement("div");e.classList.add("game-keyboard-row");for(let s of t)if(" "===s){const t=document.createElement("div");t.classList.add("point-five"),e.appendChild(t)}else if("+"===s){const t=document.createElement("button");t.classList.add("key","one-point-five","enter"),t.innerText="enter",t.addEventListener("click",(()=>this.submit())),e.appendChild(t)}else if("-"===s){const t=document.createElement("button");t.classList.add("key","one-point-five","delete"),t.innerText="del",t.addEventListener("click",(()=>this.backspace())),e.appendChild(t)}else{const t=document.createElement("button");t.classList.add("key"),t.addEventListener("click",(()=>this.appendLetter(s))),t.innerText=s,e.appendChild(t)}return e}disable(){this.enabled=!1}enable(){this.enabled=!0}show(){this.container.classList.remove("hidden")}hide(){this.container.classList.add("hidden")}}customElements.define("game-keyboard",r);class a extends HTMLElement{constructor(t,e){super(),this.pos=e,this.setLetter(t||""),this.classList.add("letter","no-match")}setLetter(t){this.letter=t,this.innerText=t}setMatch(t,e){this.classList.remove("both-match","upper-match","lower-match","no-match"),t&&e?this.classList.add("both-match"):e?this.classList.add("lower-match"):t?this.classList.add("upper-match"):this.classList.add("no-match")}setHighlight(t){this.style.borderColor=t?"var(--highlight-color)":"var(--non-highlight-color)"}}customElements.define("grid-letter",a);class n extends HTMLElement{constructor(t){super(),this.tiles=[],this.letters="",this.config=t,this.classList.add("grid-row");for(let t=0;t<this.config.letters;t++){const e=new a("",t);this.tiles.push(e),this.appendChild(e)}this.setLetters(this.getAttribute("letters"))}getLetters(){return this.letters}setLetters(t){this.letters=t||"";const e=this.letters.substring(0,this.config.letters).padEnd(this.config.letters," ");for(let t=0;t<this.config.letters;t++)this.tiles[t].setLetter(e[t])}updateMatches(t,e){for(let s=0;s<this.tiles.length;s++)this.tiles[s].setMatch(this.tiles[s].letter===t.tiles[s].letter,this.tiles[s].letter===e.tiles[s].letter)}setHighlight(t){this.tiles.forEach((e=>e.setHighlight(t)))}isComplete(){return this.letters.length===this.config.letters}doesMatch(t){if(!this.isComplete()||!t.isComplete())return!1;var e=0;for(let s=0;s<this.config.letters;s++)this.letters[s]===t.letters[s]&&e++;return!(e<this.config.matches)}wiggle(){this.setAttribute("wiggle",""),window.setTimeout((()=>this.removeAttribute("wiggle")),i.xw)}}customElements.define("grid-row",n);var h=s(231);class o extends HTMLElement{constructor(t,e){super(),this.config=t,this.callbacks=e,this.rowConfig={letters:this.config.letters,matches:this.config.matches},this.numGuesses=0,this.upperMatches=[],this.lowerMatches=[],this.id="game-grid",this.grid=document.createElement("div"),this.grid.classList.add("grid"),this.grid.id="grid",this.grid.style.setProperty("--num-rows",this.config.rows.toString()),this.appendChild(this.grid),h.W.addListener((t=>{this.words=t,this.createRows(),e.onLoad&&e.onLoad(this)}))}getRandomWord(t){return this.words[Math.abs(this.getHashCode(t))%this.words.length]}createRows(){this.upper=new n(this.rowConfig),this.upperStart=this.getRandomWord(this.config.seed),this.upper.setLetters(this.upperStart),this.lower=new n(this.rowConfig),this.lowerStart=this.getRandomWord(this.config.seed+"salt"),this.lower.setLetters(this.lowerStart),this.lower.id="goal",this.current=new n(this.rowConfig),this.current.setHighlight(!0);const t=Math.ceil((this.config.rows-3)/2),e=Math.floor((this.config.rows-3)/2);Array(t).fill(0).forEach((()=>this.grid.appendChild(new n(this.rowConfig)))),this.grid.appendChild(this.upper),this.grid.appendChild(this.current),this.grid.appendChild(this.lower),Array(e).fill(0).forEach((()=>this.grid.appendChild(new n(this.rowConfig))))}setLetters(t){this.current.setLetters(t),this.current.updateMatches(this.upper,this.lower)}getTileSize(t){const e=i.V2*(this.config.letters-1),s=Math.floor((t.width-e)/this.config.letters),r=2*i.ff,a=i.V2*(this.config.rows-1),n=Math.floor((t.height-a-r)/this.config.rows);return Math.min(s,n)}resize(t){const e=i.V2*(this.config.letters-1),s=i.V2*(this.config.rows-1),r=this.getTileSize(t),a=r*this.config.letters+e,n=r*this.config.rows+s;return this.grid.style.width=a+"px",this.grid.style.height=n+"px",t.height-n-10}submit(){if(!this.current.isComplete())return this.current.wiggle(),!1;if(!this.words.includes(this.current.getLetters()))return this.current.wiggle(),!1;const t=this.current.doesMatch(this.upper),e=this.current.doesMatch(this.lower);if(!t&&!e)return this.current.wiggle(),!1;if(this.numGuesses++,t&&e)return this.upperMatches.push(this.upper.getLetters()),this.lowerMatches.push(this.lower.getLetters()),this.callbacks.onWin({upper:this.upperMatches,solution:this.current.getLetters(),lower:this.lowerMatches}),!0;const s=new n(this.rowConfig);return s.setHighlight(!0),this.current.setHighlight(!1),t?(this.upperMatches.push(this.upper.getLetters()),this.grid.children[0].remove(),this.upper=this.current,this.current=s,this.grid.insertBefore(this.current,this.lower)):(this.lowerMatches.push(this.lower.getLetters()),this.grid.children[this.grid.children.length-1].remove(),this.lower=this.current,this.current=s,this.grid.insertBefore(this.current,this.lower)),!0}getHashCode(t){for(var e=0,s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e&=e;return e}getUpper(){return this.upper}getLower(){return this.lower}getContainer(){return this.grid}getNumGuesses(){return this.numGuesses}getUpperStart(){return this.upperStart}getLowerStart(){return this.lowerStart}}function d(t){const e=document.createElement("p");return e.innerText=t.join(" "),e}customElements.define("game-grid",o);class l extends HTMLElement{constructor(t,e,s){super(),this.overlay=document.createElement("div"),this.overlay.classList.add("overlay","tutorial","hidden"),this.appendChild(this.overlay),this.textContainer=document.createElement("div"),this.textContainer.style.width=s.width+"px",this.textContainer.style.margin="auto",this.overlay.appendChild(this.textContainer);const i=document.createElement("div");i.classList.add("tutorial-title"),i.innerText="How to Play",this.textContainer.appendChild(i),this.textContainer.appendChild(d(['The goal of LAMARDLE is to find words which "match" the words','above or below them. Two words "match" when they share 3 or more',"letters in the same position."]));const r=new o(Object.assign(Object.assign({},e),{rows:3}),{onLoad:()=>{r.getUpper().setLetters("hello"),r.getLower().setLetters("world")}});r.resize({width:s.width,height:200}),this.textContainer.appendChild(r),this.textContainer.appendChild(d(["When you enter a word that matches the word above or below, it","will replace that word. If the word matches both words, you win!"]));const a=new o(Object.assign(Object.assign({},e),{rows:3}),{onLoad:()=>{a.getUpper().setLetters("hello"),a.getLower().setLetters("world"),a.setLetters("would")}});a.resize({width:s.width,height:200}),this.textContainer.appendChild(a),this.textContainer.appendChild(d(['In the example above, the middle word "would" matches "w", "o",','"l", and "d" from "world". It also matches "l" from "hello". When','entered, the lower word "world" is replaced with "would", so the','next word should match either "hello" or "would".']));const n=new o(Object.assign(Object.assign({},e),{rows:3}),{onLoad:()=>{n.getUpper().setLetters("hello"),n.getLower().setLetters("world"),n.setLetters("would"),n.submit()}});n.resize({width:s.width,height:200}),this.textContainer.appendChild(n),this.textContainer.appendChild(d(["Tap anywhere to continue. Happy Mother's Day!"])),t.hasVisited()||this.show(),this.overlay.onclick=()=>{this.hide(),t.setVisited()}}show(){this.overlay.classList.remove("hidden")}hide(){this.overlay.classList.add("hidden")}}customElements.define("game-tutorial",l);class c{constructor(){}solve(t,e){const s=new Map;s.set(t,null);for(var i=[t],r=[];i.length>0;){const t=i.pop();var a=!1;if(this.graph[t].forEach((i=>{s.has(i)||(s.set(i,t),r.push(i),i===e&&(a=!0))})),a)break;0===i.length&&0!==r.length&&(i=r,r=[])}const n=[e];var h=e;if(s.has(e)){for(;h!==t;)h=s.get(h),n.push(h);return n}return[]}loadGraph(){const t=new XMLHttpRequest;return new Promise((e=>{t.onreadystatechange=s=>{t.readyState===XMLHttpRequest.DONE&&200===t.status&&(this.graph=JSON.parse(t.responseText),e(this))},t.open("GET","graph.json"),t.send()}))}}class p{constructor(t){var e,s,i;this.schema={visited:t=>"true"===t,streak:t=>parseInt(t),mostRecent:t=>t},this.date=t;const r=this.parseCookie();this.data={visited:null!==(e=r.visited)&&void 0!==e&&e,streak:null!==(s=r.streak)&&void 0!==s?s:0,mostRecent:null!==(i=r.mostRecent)&&void 0!==i?i:""},this.checkStreak()}setVisited(){this.data.visited=!0,this.saveData()}hasVisited(){return this.data.visited}checkStreak(){if(this.data.mostRecent===this.formatDate(this.date))return;const t=new Date(this.date);t.setDate(this.date.getDate()-1),this.data.mostRecent!==this.formatDate(t)&&(this.data.streak=0)}addStreak(){this.data.mostRecent!==this.formatDate(this.date)&&(this.data.streak++,this.data.mostRecent=this.formatDate(this.date),this.saveData())}saveData(){const t=new Date;t.setDate((new Date).getDate()+i.c1);const e="expires="+t.toUTCString();Object.entries(this.data).forEach((([t,s])=>{document.cookie=t+"="+s.toString()+";"+e}))}parseCookie(){const t={};return document.cookie&&decodeURI(document.cookie).split(";").map((t=>t.split("="))).forEach((e=>{const s=e[0].trim(),i=e[1];this.schema.hasOwnProperty(s)&&(t[s]=this.schema[s](i))})),t}formatDate(t){return[t.getFullYear().toString(),(t.getMonth()+1).toString().padStart(2,"0"),t.getDate().toString().padStart(2,"0")].join("")}getDate(){return this.date}getStreak(){return this.data.streak}}class g extends HTMLElement{constructor(){var t;super(),this.gameData=new p(new Date),this.container=document.createElement("div"),this.container.classList.add("container"),this.appendChild(this.container),this.winPopup=document.createElement("div"),this.winPopup.classList.add("overlay","hidden"),this.container.appendChild(this.winPopup),this.winPopup.onclick=()=>{this.winPopup.classList.add("hidden"),this.keyboard.disable()},this.winMessage=document.createElement("div"),this.winMessage.classList.add("winMessage"),this.winPopup.appendChild(this.winMessage),this.winMessageText=document.createElement("div"),this.winMessage.appendChild(this.winMessageText),this.winMessageShare=document.createElement("div"),this.winMessageShare.classList.add("share-result"),this.winMessageShare.innerText="Share!",this.winMessage.appendChild(this.winMessageShare),this.header=document.createElement("div"),this.header.classList.add("header"),this.container.appendChild(this.header),this.spacerLeft=document.createElement("div"),this.spacerLeft.classList.add("spacer-left"),this.header.appendChild(this.spacerLeft),this.spacerLeft.appendChild(this.createHeaderLink("home.svg",this.getDailyPuzzleLink(),{altText:"go to daily puzzle"})),this.spacerLeft.appendChild(this.createHeaderLink("dice-3.svg",this.getRandomPuzzleLink(),{altText:"go to random puzzle"})),this.titleText=document.createElement("div"),this.titleText.innerText="LAMARDLE",this.titleText.classList.add("title-text"),this.header.appendChild(this.titleText),this.spacerRight=document.createElement("div"),this.spacerRight.classList.add("spacer-right"),this.header.appendChild(this.spacerRight),this.spacerRight.appendChild(this.createHeaderLink("source.svg","https://github.com/ahaggart/lamardle",{newTab:!0,altText:"go to source code"}));const e=this.createHeaderIcon("help.svg",{altText:"show tutorial"});this.spacerRight.appendChild(e),this.urlSeed=new URL(document.location.href).searchParams.get("seed");const s=this.gameData.formatDate(this.gameData.getDate());this.seed=null!==(t=this.urlSeed)&&void 0!==t?t:s;const i={seed:this.seed,rows:7,letters:5,matches:3};this.tutorial=new l(this.gameData,i,this.getGridArea()),this.container.appendChild(this.tutorial),e.onclick=()=>this.tutorial.show(),this.grid=new o(i,{onWin:t=>this.winGame(t)}),this.container.append(this.grid),this.keyboard=new r(this.grid),this.container.append(this.keyboard),this.solver=new c,this.resizeGrid(),window.addEventListener("resize",(()=>this.resizeGrid())),document.addEventListener("keydown",(t=>{"Backspace"===t.key?this.keyboard.backspace():"Enter"===t.key?this.keyboard.submit():t.key.match(/^[a-z]$/)&&this.keyboard.appendLetter(t.key)}))}createHeaderLink(t,e,s={}){const i=document.createElement("a");return i.setAttribute("href",e),s.newTab&&i.setAttribute("target","_blank"),i.appendChild(this.createHeaderIcon(t,s)),i}createHeaderIcon(t,e={}){var s;const r=document.createElement("img");return r.setAttribute("src",t),r.setAttribute("width",i.L1.toString()),r.setAttribute("height",i.L1.toString()),e.altText&&r.setAttribute("alt",e.altText),(e.title||e.altText)&&r.setAttribute("title",null!==(s=e.title)&&void 0!==s?s:e.altText),r}getGridArea(){return{width:Math.min(i.d,window.innerWidth-i.XC),height:window.innerHeight-i.aK-i.Mz}}resizeGrid(){const t=this.grid.resize(this.getGridArea());this.grid.getContainer().style.marginBottom=t+"px"}computeMatching(t,e){const s=[];var i=t;for(let t=0;t<e.length;t++){const r=e[e.length-t-1],a=i.split("").map(((t,e)=>[t,r.charAt(e)])).map((([t,e])=>t===e));s.push(a),i=r}return s.reverse(),s}formatMatching(t,e,s){return t.map((t=>t.map((t=>t?e:s)).join("")))}createShareMessage(t,e){const s=this.formatMatching(this.computeMatching(t.solution,t.upper),i.JH,i.lw),r=this.formatMatching(this.computeMatching(t.solution,t.lower),i.LH,i.lw);return r.reverse(),Array.prototype.concat(["lamardle",e,this.grid.getNumGuesses().toString()+" tries"],s,[t.solution.split("").map((()=>i.V3)).join("")],r).join("\n")}computePar(){const t=this.solver.solve(this.grid.getUpperStart(),this.grid.getLowerStart());return Math.max(1,t.length-2)}winGame(t){return e=this,s=void 0,r=function*(){const e=[];e.push("You won in "+this.grid.getNumGuesses()+" tries!"),yield this.solver.loadGraph(),e.push("Par: "+this.computePar()),this.seed===this.gameData.formatDate(this.gameData.getDate())&&(this.gameData.addStreak(),e.push("Current Streak: "+this.gameData.getStreak())),this.winPopup.classList.remove("hidden"),this.winMessageText.innerText=e.join("\n"),this.winMessageShare.onclick=e=>{e.stopPropagation();const s=this.createShareMessage(t,document.location.origin+"?seed="+this.seed),i="Failed to Share :(",r=this.winMessageShare.innerText;navigator.share?navigator.share({title:document.title,text:s}).catch((()=>this.winMessageShare.innerText=i)):navigator.clipboard?(navigator.clipboard.writeText(s),this.winMessageShare.innerText="Copied to clipboard!",window.setTimeout((()=>this.winMessageShare.innerText=r),3e3)):this.winMessageShare.innerText=i}},new((i=void 0)||(i=Promise))((function(t,a){function n(t){try{o(r.next(t))}catch(t){a(t)}}function h(t){try{o(r.throw(t))}catch(t){a(t)}}function o(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i((function(t){t(s)}))).then(n,h)}o((r=r.apply(e,s||[])).next())}));var e,s,i,r}getDailyPuzzleLink(){return"./"}getRandomPuzzleLink(){return"./?seed="+this.randomString()}randomString(){const t=[];for(let e=0;e<16;e++)t.push(Math.floor(10*Math.random()));return t.join("")}}customElements.define("lamardle-game",g)},601:(t,e,s)=>{s.d(e,{JH:()=>u,L1:()=>c,LH:()=>g,Mz:()=>h,V2:()=>i,V3:()=>w,XC:()=>l,XV:()=>a,aK:()=>d,c1:()=>p,d:()=>r,ff:()=>n,lw:()=>m,xw:()=>o});const i=5,r=500,a=5,n=10,h=50,o=400,d=184,l=2*n,c=25,p=3,g="🔼",u="🔽",m="⏺",w="*️⃣"},231:(t,e,s)=>{s.d(e,{W:()=>r,y:()=>a});var i=s(601);const r=new class{constructor(t){this.numLetters=t,this.isReady=!1,this.onReady=[],this.words=[]}addListener(t){this.onReady.push(t),this.isReady&&t(words)}setWords(t){this.words=t.split("\n"),this.isReady=!0,this.onReady.forEach((t=>t(this.words)))}}(i.XV);function a(t){const e=new XMLHttpRequest;e.onreadystatechange=s=>{e.readyState===XMLHttpRequest.DONE&&200===e.status&&t(e.responseText)},e.open("GET","five-letters.txt"),e.send()}}},s={};function i(t){var r=s[t];if(void 0!==r)return r.exports;var a=s[t]={exports:{}};return e[t](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t=i(231),i(508),(0,t.y)((e=>t.W.setWords(e)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2xhbWFyZGxlLy4vc3JjL0dyaWRMZXR0ZXIudHMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvLi9zcmMvR3JpZFJvdy50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9HYW1lR3JpZC50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9HYW1lVHV0b3JpYWwudHMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvLi9zcmMvR2FtZVNvbHZlci50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9HYW1lRGF0YS50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9MYW1hcmRsZUdhbWUudHMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvLi9zcmMvY29uc3RhbnRzLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL2NvbnRleHQudHMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvLi9zcmMvV29yZExpc3QuanMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2xhbWFyZGxlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYW1lR3JpZCB9IGZyb20gJy4vR2FtZUdyaWQnO1xuXG5leHBvcnQgY2xhc3MgR2FtZUtleWJvYXJkIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIHByaXZhdGUgZ3JpZDogR2FtZUdyaWQ7XG4gICAgcHJpdmF0ZSBsZXR0ZXJzOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBlbmFibGVkOiBib29sZWFuO1xuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGdyaWQ6IEdhbWVHcmlkKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5ncmlkID0gZ3JpZDtcblxuICAgICAgICB0aGlzLmxldHRlcnMgPSAnJztcblxuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLm1hcmdpbiA9IFwiMCA1cHhcIjtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVSb3coJ3F3ZXJ0eXVpb3AnKSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUm93KCcgYXNkZmdoamtsICcpKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVSb3coJyt6eGN2Ym5tLScpKTtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgYmFja3NwYWNlKCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCB8fCB0aGlzLmxldHRlcnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxldHRlcnMgPSB0aGlzLmxldHRlcnMuc3Vic3RyaW5nKDAsIHRoaXMubGV0dGVycy5sZW5ndGggLSAxKTtcbiAgICAgICAgdGhpcy5ncmlkLnNldExldHRlcnModGhpcy5sZXR0ZXJzKTtcbiAgICB9XG5cbiAgICBhcHBlbmRMZXR0ZXIobGV0dGVyOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQgfHwgdGhpcy5sZXR0ZXJzLmxlbmd0aCA9PSA1KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZXR0ZXJzICs9IGxldHRlcjtcbiAgICAgICAgdGhpcy5ncmlkLnNldExldHRlcnModGhpcy5sZXR0ZXJzKTtcbiAgICB9XG5cbiAgICBzdWJtaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQgJiYgdGhpcy5ncmlkLnN1Ym1pdCgpKSB7XG4gICAgICAgICAgICB0aGlzLmxldHRlcnMgPSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNyZWF0ZVJvdyhsZXR0ZXJzOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdnYW1lLWtleWJvYXJkLXJvdycpO1xuICAgICAgICBmb3IgKGxldCBsZXR0ZXIgb2YgbGV0dGVycykge1xuICAgICAgICAgICAgaWYgKGxldHRlciA9PT0gJyAnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BhY2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgc3BhY2VyLmNsYXNzTGlzdC5hZGQoJ3BvaW50LWZpdmUnKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoc3BhY2VyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnKycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgICAgICBrZXkuY2xhc3NMaXN0LmFkZCgna2V5JywgJ29uZS1wb2ludC1maXZlJywgJ2VudGVyJyk7XG4gICAgICAgICAgICAgICAga2V5LmlubmVyVGV4dCA9ICdlbnRlcic7XG4gICAgICAgICAgICAgICAga2V5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zdWJtaXQoKSk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGtleSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxldHRlciA9PT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAga2V5LmNsYXNzTGlzdC5hZGQoJ2tleScsICdvbmUtcG9pbnQtZml2ZScsICdkZWxldGUnKTtcbiAgICAgICAgICAgICAgICBrZXkuaW5uZXJUZXh0ID0gJ2RlbCc7XG4gICAgICAgICAgICAgICAga2V5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5iYWNrc3BhY2UoKSk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGtleSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGtleS5jbGFzc0xpc3QuYWRkKCdrZXknKTtcbiAgICAgICAgICAgICAgICBrZXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmFwcGVuZExldHRlcihsZXR0ZXIpKTtcbiAgICAgICAgICAgICAgICBrZXkuaW5uZXJUZXh0ID0gbGV0dGVyO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvdztcbiAgICB9XG5cbiAgICBkaXNhYmxlKCkge1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBlbmFibGUoKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgc2hvdygpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgfVxuXG4gICAgaGlkZSgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdnYW1lLWtleWJvYXJkJywgR2FtZUtleWJvYXJkKTtcbiIsImV4cG9ydCBjbGFzcyBHcmlkTGV0dGVyIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIHBvczogbnVtYmVyO1xuICAgIGxldHRlcjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IobGV0dGVyOiBzdHJpbmcgfCB1bmRlZmluZWQsIHBvczogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLnNldExldHRlcihsZXR0ZXIgfHwgJycpO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2xldHRlcicsICduby1tYXRjaCcpO1xuICAgIH1cblxuICAgIHNldExldHRlcihsZXR0ZXI6IHN0cmluZykge1xuICAgICAgICB0aGlzLmxldHRlciA9IGxldHRlcjtcbiAgICAgICAgdGhpcy5pbm5lclRleHQgPSBsZXR0ZXI7XG4gICAgfVxuXG4gICAgc2V0TWF0Y2gobWF0Y2hVcHBlcjogYm9vbGVhbiwgbWF0Y2hMb3dlcjogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2JvdGgtbWF0Y2gnLCAndXBwZXItbWF0Y2gnLCAnbG93ZXItbWF0Y2gnLCAnbm8tbWF0Y2gnKTtcbiAgICAgICAgaWYgKG1hdGNoVXBwZXIgJiYgbWF0Y2hMb3dlcikge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdib3RoLW1hdGNoJyk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hMb3dlcikge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdsb3dlci1tYXRjaCcpO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoVXBwZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgndXBwZXItbWF0Y2gnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnbm8tbWF0Y2gnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEhpZ2hsaWdodChpc0hpZ2hsaWdodGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuc3R5bGUuYm9yZGVyQ29sb3IgPSBpc0hpZ2hsaWdodGVkID8gJ3ZhcigtLWhpZ2hsaWdodC1jb2xvciknIDogJ3ZhcigtLW5vbi1oaWdobGlnaHQtY29sb3IpJztcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dyaWQtbGV0dGVyJywgR3JpZExldHRlcik7XG4iLCJpbXBvcnQgeyBHcmlkTGV0dGVyIH0gZnJvbSBcIi4vR3JpZExldHRlclwiO1xuaW1wb3J0IHsgSU5WQUxJRF9BTklNQVRJT05fTEVOR1RIX01TIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCB0eXBlIEdyaWRSb3dDb25maWcgPSB7XG4gICAgbGV0dGVyczogbnVtYmVyO1xuICAgIG1hdGNoZXM6IG51bWJlcjtcbn07XG5cbmV4cG9ydCBjbGFzcyBHcmlkUm93IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIHByaXZhdGUgdGlsZXM6IEdyaWRMZXR0ZXJbXSA9IFtdO1xuICAgIHByaXZhdGUgbGV0dGVyczogc3RyaW5nID0gJyc7XG4gICAgcHJpdmF0ZSBjb25maWc6IEdyaWRSb3dDb25maWc7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IEdyaWRSb3dDb25maWcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZ3JpZC1yb3cnKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlnLmxldHRlcnM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgdGlsZSA9IG5ldyBHcmlkTGV0dGVyKCcnLCBpKTtcbiAgICAgICAgICAgIHRoaXMudGlsZXMucHVzaCh0aWxlKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldExldHRlcnModGhpcy5nZXRBdHRyaWJ1dGUoXCJsZXR0ZXJzXCIpKTtcbiAgICB9XG5cbiAgICBnZXRMZXR0ZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZXR0ZXJzO1xuICAgIH1cblxuICAgIHNldExldHRlcnMobGV0dGVyczogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubGV0dGVycyA9IGxldHRlcnMgfHwgJyc7XG4gICAgICAgIGNvbnN0IHBhZGRlZExldHRlcnMgPSB0aGlzLmxldHRlcnNcbiAgICAgICAgICAgIC5zdWJzdHJpbmcoMCwgdGhpcy5jb25maWcubGV0dGVycylcbiAgICAgICAgICAgIC5wYWRFbmQodGhpcy5jb25maWcubGV0dGVycywgJyAnKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlnLmxldHRlcnM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50aWxlc1tpXS5zZXRMZXR0ZXIocGFkZGVkTGV0dGVyc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVNYXRjaGVzKHVwcGVyOiBHcmlkUm93LCBsb3dlcjogR3JpZFJvdykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudGlsZXNbaV0uc2V0TWF0Y2goXG4gICAgICAgICAgICAgICAgdGhpcy50aWxlc1tpXS5sZXR0ZXIgPT09IHVwcGVyLnRpbGVzW2ldLmxldHRlcixcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVzW2ldLmxldHRlciA9PT0gbG93ZXIudGlsZXNbaV0ubGV0dGVyXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0SGlnaGxpZ2h0KGlzSGlnaGxpZ2h0ZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy50aWxlcy5mb3JFYWNoKHRpbGUgPT4gdGlsZS5zZXRIaWdobGlnaHQoaXNIaWdobGlnaHRlZCkpO1xuICAgIH1cblxuICAgIGlzQ29tcGxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxldHRlcnMubGVuZ3RoID09PSB0aGlzLmNvbmZpZy5sZXR0ZXJzO1xuICAgIH1cblxuICAgIGRvZXNNYXRjaChvdGhlcjogR3JpZFJvdykge1xuICAgICAgICBpZiAoIXRoaXMuaXNDb21wbGV0ZSgpIHx8ICFvdGhlci5pc0NvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXRjaENvdW50ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpZy5sZXR0ZXJzOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxldHRlcnNbaV0gPT09IG90aGVyLmxldHRlcnNbaV0pIHtcbiAgICAgICAgICAgICAgICBtYXRjaENvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWF0Y2hDb3VudCA8IHRoaXMuY29uZmlnLm1hdGNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHdpZ2dsZSgpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3dpZ2dsZScsICcnKTtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZW1vdmVBdHRyaWJ1dGUoJ3dpZ2dsZScpLCBJTlZBTElEX0FOSU1BVElPTl9MRU5HVEhfTVMpO1xuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZ3JpZC1yb3cnLCBHcmlkUm93KTtcbiIsImltcG9ydCB7IEdyaWRSb3csIEdyaWRSb3dDb25maWcgfSBmcm9tIFwiLi9HcmlkUm93XCI7XG5pbXBvcnQgeyBHUklEX1JPV19HQVAsIEdSSURfUEFERElORyB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgV09SRF9MSVNUIH0gZnJvbSBcIi4vY29udGV4dFwiO1xuXG5leHBvcnQgdHlwZSBHYW1lR3JpZENvbmZpZyA9IHtcbiAgICBzZWVkOiBzdHJpbmc7XG4gICAgbGV0dGVyczogbnVtYmVyO1xuICAgIG1hdGNoZXM6IG51bWJlcjtcbiAgICByb3dzOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBHYW1lR3JpZEFyZWEgPSB7XG4gICAgd2lkdGg6IG51bWJlcjtcbiAgICBoZWlnaHQ6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIEdyaWRTb2x1dGlvbiA9IHtcbiAgICB1cHBlcjogc3RyaW5nW107XG4gICAgc29sdXRpb246IHN0cmluZztcbiAgICBsb3dlcjogc3RyaW5nW107XG59O1xuXG50eXBlIEdhbWVHcmlkQ2FsbGJhY2tzID0ge1xuICAgIG9uV2luPzogKHNvbHV0aW9uOiBHcmlkU29sdXRpb24pID0+IHZvaWQ7XG4gICAgb25Mb2FkPzogKGdyaWQ6IEdhbWVHcmlkKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGNsYXNzIEdhbWVHcmlkIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIHByaXZhdGUgY29uZmlnOiBHYW1lR3JpZENvbmZpZztcbiAgICBwcml2YXRlIGNhbGxiYWNrczogR2FtZUdyaWRDYWxsYmFja3M7XG4gICAgcHJpdmF0ZSByb3dDb25maWc6IEdyaWRSb3dDb25maWc7XG4gICAgcHJpdmF0ZSBudW1HdWVzc2VzOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB1cHBlck1hdGNoZXM6IHN0cmluZ1tdO1xuICAgIHByaXZhdGUgbG93ZXJNYXRjaGVzOiBzdHJpbmdbXTtcbiAgICBwcml2YXRlIGdyaWQ6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgd29yZHM6IHN0cmluZztcbiAgICBwcml2YXRlIHVwcGVyOiBHcmlkUm93O1xuICAgIHByaXZhdGUgdXBwZXJTdGFydDogc3RyaW5nO1xuICAgIHByaXZhdGUgbG93ZXI6IEdyaWRSb3c7XG4gICAgcHJpdmF0ZSBsb3dlclN0YXJ0OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjdXJyZW50OiBHcmlkUm93O1xuICAgIHdpZHRoOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IEdhbWVHcmlkQ29uZmlnLCBjYWxsYmFja3M6IEdhbWVHcmlkQ2FsbGJhY2tzKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuXG4gICAgICAgIHRoaXMucm93Q29uZmlnID0ge1xuICAgICAgICAgICAgbGV0dGVyczogdGhpcy5jb25maWcubGV0dGVycyxcbiAgICAgICAgICAgIG1hdGNoZXM6IHRoaXMuY29uZmlnLm1hdGNoZXMsXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5udW1HdWVzc2VzID0gMDtcbiAgICAgICAgdGhpcy51cHBlck1hdGNoZXMgPSBbXTtcbiAgICAgICAgdGhpcy5sb3dlck1hdGNoZXMgPSBbXTtcblxuICAgICAgICB0aGlzLmlkID0gJ2dhbWUtZ3JpZCc7XG4gICAgICAgIHRoaXMuZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmdyaWQuY2xhc3NMaXN0LmFkZCgnZ3JpZCcpO1xuICAgICAgICB0aGlzLmdyaWQuaWQgPSAnZ3JpZCc7XG4gICAgICAgIHRoaXMuZ3JpZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1udW0tcm93cycsIHRoaXMuY29uZmlnLnJvd3MudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5ncmlkKTtcblxuICAgICAgICBXT1JEX0xJU1QuYWRkTGlzdGVuZXIoKHdvcmRzOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMud29yZHMgPSB3b3JkcztcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUm93cygpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcy5vbkxvYWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Mub25Mb2FkKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRSYW5kb21Xb3JkKHNlZWQ6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy53b3Jkc1tNYXRoLmFicyh0aGlzLmdldEhhc2hDb2RlKHNlZWQpKSAlIHRoaXMud29yZHMubGVuZ3RoXTtcbiAgICB9XG5cbiAgICBjcmVhdGVSb3dzKCkge1xuICAgICAgICB0aGlzLnVwcGVyID0gbmV3IEdyaWRSb3codGhpcy5yb3dDb25maWcpO1xuICAgICAgICB0aGlzLnVwcGVyU3RhcnQgPSB0aGlzLmdldFJhbmRvbVdvcmQodGhpcy5jb25maWcuc2VlZCk7XG4gICAgICAgIHRoaXMudXBwZXIuc2V0TGV0dGVycyh0aGlzLnVwcGVyU3RhcnQpO1xuXG4gICAgICAgIHRoaXMubG93ZXIgPSBuZXcgR3JpZFJvdyh0aGlzLnJvd0NvbmZpZyk7XG4gICAgICAgIHRoaXMubG93ZXJTdGFydCA9IHRoaXMuZ2V0UmFuZG9tV29yZCh0aGlzLmNvbmZpZy5zZWVkICsgJ3NhbHQnKTtcbiAgICAgICAgdGhpcy5sb3dlci5zZXRMZXR0ZXJzKHRoaXMubG93ZXJTdGFydCk7XG4gICAgICAgIHRoaXMubG93ZXIuaWQgPSAnZ29hbCc7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gbmV3IEdyaWRSb3codGhpcy5yb3dDb25maWcpO1xuICAgICAgICB0aGlzLmN1cnJlbnQuc2V0SGlnaGxpZ2h0KHRydWUpO1xuXG4gICAgICAgIGNvbnN0IHJvd3NBYm92ZSA9IE1hdGguY2VpbCgodGhpcy5jb25maWcucm93cyAtIDMpIC8gMi4wKTtcbiAgICAgICAgY29uc3Qgcm93c0JlbG93ID0gTWF0aC5mbG9vcigodGhpcy5jb25maWcucm93cyAtIDMpIC8gMi4wKTtcblxuICAgICAgICBBcnJheShyb3dzQWJvdmUpLmZpbGwoMClcbiAgICAgICAgICAgIC5mb3JFYWNoKCgpID0+IHRoaXMuZ3JpZC5hcHBlbmRDaGlsZChuZXcgR3JpZFJvdyh0aGlzLnJvd0NvbmZpZykpKTtcbiAgICAgICAgdGhpcy5ncmlkLmFwcGVuZENoaWxkKHRoaXMudXBwZXIpO1xuICAgICAgICB0aGlzLmdyaWQuYXBwZW5kQ2hpbGQodGhpcy5jdXJyZW50KTtcbiAgICAgICAgdGhpcy5ncmlkLmFwcGVuZENoaWxkKHRoaXMubG93ZXIpO1xuICAgICAgICBBcnJheShyb3dzQmVsb3cpLmZpbGwoMClcbiAgICAgICAgICAgIC5mb3JFYWNoKCgpID0+IHRoaXMuZ3JpZC5hcHBlbmRDaGlsZChuZXcgR3JpZFJvdyh0aGlzLnJvd0NvbmZpZykpKTtcbiAgICB9XG5cbiAgICBzZXRMZXR0ZXJzKGxldHRlcnM6IHN0cmluZykge1xuICAgICAgICB0aGlzLmN1cnJlbnQuc2V0TGV0dGVycyhsZXR0ZXJzKTtcbiAgICAgICAgdGhpcy5jdXJyZW50LnVwZGF0ZU1hdGNoZXModGhpcy51cHBlciwgdGhpcy5sb3dlcik7XG4gICAgfVxuXG4gICAgZ2V0VGlsZVNpemUoZ3JpZEFyZWE6IEdhbWVHcmlkQXJlYSkge1xuICAgICAgICBjb25zdCBjb2x1bW5HYXBXaWR0aCA9IEdSSURfUk9XX0dBUCAqICh0aGlzLmNvbmZpZy5sZXR0ZXJzIC0gMSk7XG4gICAgICAgIGNvbnN0IG1heFRpbGVXaWR0aCA9IE1hdGguZmxvb3IoKGdyaWRBcmVhLndpZHRoIC0gY29sdW1uR2FwV2lkdGgpIC8gdGhpcy5jb25maWcubGV0dGVycyk7XG5cbiAgICAgICAgY29uc3QgZ3JpZFBhZGRpbmdIZWlnaHQgPSBHUklEX1BBRERJTkcgKiAyO1xuICAgICAgICBjb25zdCByb3dHYXBIZWlnaHQgPSBHUklEX1JPV19HQVAgKiAodGhpcy5jb25maWcucm93cyAtIDEpO1xuICAgICAgICBjb25zdCBtYXhUaWxlSGVpZ2h0ID0gTWF0aC5mbG9vcigoZ3JpZEFyZWEuaGVpZ2h0IC0gcm93R2FwSGVpZ2h0IC0gZ3JpZFBhZGRpbmdIZWlnaHQpIC8gdGhpcy5jb25maWcucm93cyk7XG5cbiAgICAgICAgcmV0dXJuIE1hdGgubWluKG1heFRpbGVXaWR0aCwgbWF4VGlsZUhlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3dpZHRoLCBoZWlnaHR9IHNpemVcbiAgICAgKiBAcmV0dXJucyBhbW91bnQgb2YgXCJsZWZ0b3ZlclwiIHNwYWNlIHVuZGVyIHRoZSBncmlkXG4gICAgICovXG4gICAgcmVzaXplKHNpemU6IEdhbWVHcmlkQXJlYSkge1xuICAgICAgICBjb25zdCBjb2x1bW5HYXBXaWR0aCA9IEdSSURfUk9XX0dBUCAqICh0aGlzLmNvbmZpZy5sZXR0ZXJzIC0gMSk7XG4gICAgICAgIGNvbnN0IHJvd0dhcEhlaWdodCA9IEdSSURfUk9XX0dBUCAqICh0aGlzLmNvbmZpZy5yb3dzIC0gMSk7XG4gICAgICAgIGNvbnN0IHRpbGVTaXplID0gdGhpcy5nZXRUaWxlU2l6ZShzaXplKTtcbiAgICAgICAgY29uc3QgZ3JpZFdpZHRoID0gdGlsZVNpemUgKiB0aGlzLmNvbmZpZy5sZXR0ZXJzICsgY29sdW1uR2FwV2lkdGg7XG4gICAgICAgIGNvbnN0IGdyaWRIZWlnaHQgPSB0aWxlU2l6ZSAqIHRoaXMuY29uZmlnLnJvd3MgKyByb3dHYXBIZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5ncmlkLnN0eWxlLndpZHRoID0gZ3JpZFdpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5ncmlkLnN0eWxlLmhlaWdodCA9IGdyaWRIZWlnaHQgKyAncHgnO1xuICAgICAgICByZXR1cm4gKHNpemUuaGVpZ2h0IC0gZ3JpZEhlaWdodCAtIDEwKTtcbiAgICB9XG5cbiAgICBzdWJtaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50LmlzQ29tcGxldGUoKSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50LndpZ2dsZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndvcmRzLmluY2x1ZGVzKHRoaXMuY3VycmVudC5nZXRMZXR0ZXJzKCkpKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQud2lnZ2xlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cHBlck1hdGNoID0gdGhpcy5jdXJyZW50LmRvZXNNYXRjaCh0aGlzLnVwcGVyKTtcbiAgICAgICAgY29uc3QgbG93ZXJNYXRjaCA9IHRoaXMuY3VycmVudC5kb2VzTWF0Y2godGhpcy5sb3dlcik7XG5cbiAgICAgICAgaWYgKCF1cHBlck1hdGNoICYmICFsb3dlck1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQud2lnZ2xlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm51bUd1ZXNzZXMrKztcblxuICAgICAgICBpZiAodXBwZXJNYXRjaCAmJiBsb3dlck1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLnVwcGVyTWF0Y2hlcy5wdXNoKHRoaXMudXBwZXIuZ2V0TGV0dGVycygpKTtcbiAgICAgICAgICAgIHRoaXMubG93ZXJNYXRjaGVzLnB1c2godGhpcy5sb3dlci5nZXRMZXR0ZXJzKCkpO1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3Mub25XaW4oe1xuICAgICAgICAgICAgICAgIHVwcGVyOiB0aGlzLnVwcGVyTWF0Y2hlcyxcbiAgICAgICAgICAgICAgICBzb2x1dGlvbjogdGhpcy5jdXJyZW50LmdldExldHRlcnMoKSxcbiAgICAgICAgICAgICAgICBsb3dlcjogdGhpcy5sb3dlck1hdGNoZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3Um93ID0gbmV3IEdyaWRSb3codGhpcy5yb3dDb25maWcpO1xuICAgICAgICBuZXdSb3cuc2V0SGlnaGxpZ2h0KHRydWUpO1xuICAgICAgICB0aGlzLmN1cnJlbnQuc2V0SGlnaGxpZ2h0KGZhbHNlKTtcblxuICAgICAgICBpZiAodXBwZXJNYXRjaCkge1xuICAgICAgICAgICAgdGhpcy51cHBlck1hdGNoZXMucHVzaCh0aGlzLnVwcGVyLmdldExldHRlcnMoKSk7XG4gICAgICAgICAgICB0aGlzLmdyaWQuY2hpbGRyZW5bMF0ucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnVwcGVyID0gdGhpcy5jdXJyZW50O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gbmV3Um93O1xuICAgICAgICAgICAgdGhpcy5ncmlkLmluc2VydEJlZm9yZSh0aGlzLmN1cnJlbnQsIHRoaXMubG93ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb3dlck1hdGNoZXMucHVzaCh0aGlzLmxvd2VyLmdldExldHRlcnMoKSk7XG4gICAgICAgICAgICB0aGlzLmdyaWQuY2hpbGRyZW5bdGhpcy5ncmlkLmNoaWxkcmVuLmxlbmd0aCAtIDFdLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5sb3dlciA9IHRoaXMuY3VycmVudDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IG5ld1JvdztcbiAgICAgICAgICAgIHRoaXMuZ3JpZC5pbnNlcnRCZWZvcmUodGhpcy5jdXJyZW50LCB0aGlzLmxvd2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldEhhc2hDb2RlKHN0cjogc3RyaW5nKSB7XG4gICAgICAgIHZhciBoYXNoID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjb2RlO1xuICAgICAgICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzaDtcbiAgICB9XG5cbiAgICBnZXRVcHBlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBwZXI7XG4gICAgfVxuXG4gICAgZ2V0TG93ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvd2VyO1xuICAgIH1cblxuICAgIGdldENvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZDtcbiAgICB9XG5cbiAgICBnZXROdW1HdWVzc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udW1HdWVzc2VzO1xuICAgIH1cblxuICAgIGdldFVwcGVyU3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwcGVyU3RhcnQ7XG4gICAgfVxuXG4gICAgZ2V0TG93ZXJTdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG93ZXJTdGFydDtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dhbWUtZ3JpZCcsIEdhbWVHcmlkKTtcbiIsImltcG9ydCB7IEdhbWVEYXRhIH0gZnJvbSBcIi4vR2FtZURhdGFcIjtcbmltcG9ydCB7IEdhbWVHcmlkLCBHYW1lR3JpZENvbmZpZywgR2FtZUdyaWRBcmVhIH0gZnJvbSAnLi9HYW1lR3JpZCc7XG5cbmZ1bmN0aW9uIHBhcmFncmFwaCh0ZXh0OiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgZWxlbS5pbm5lclRleHQgPSB0ZXh0LmpvaW4oJyAnKTtcbiAgICByZXR1cm4gZWxlbTtcbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVUdXRvcmlhbCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBvdmVybGF5OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHRleHRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBnYW1lRGF0YTogR2FtZURhdGEsIFxuICAgICAgICBncmlkQ29uZmlnOiBHYW1lR3JpZENvbmZpZywgXG4gICAgICAgIGdyaWRBcmVhOiBHYW1lR3JpZEFyZWFcbiAgICApIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknLCAndHV0b3JpYWwnLCAnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcblxuICAgICAgICB0aGlzLnRleHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy50ZXh0Q29udGFpbmVyLnN0eWxlLndpZHRoID0gZ3JpZEFyZWEud2lkdGggKyAncHgnO1xuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuc3R5bGUubWFyZ2luID0gJ2F1dG8nO1xuICAgICAgICB0aGlzLm92ZXJsYXkuYXBwZW5kQ2hpbGQodGhpcy50ZXh0Q29udGFpbmVyKTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0dXRvcmlhbC10aXRsZScpO1xuICAgICAgICB0aXRsZS5pbm5lclRleHQgPSAnSG93IHRvIFBsYXknO1xuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChwYXJhZ3JhcGgoW1xuICAgICAgICAgICAgJ1RoZSBnb2FsIG9mIExBTUFSRExFIGlzIHRvIGZpbmQgd29yZHMgd2hpY2ggXCJtYXRjaFwiIHRoZSB3b3JkcycsXG4gICAgICAgICAgICAnYWJvdmUgb3IgYmVsb3cgdGhlbS4gVHdvIHdvcmRzIFwibWF0Y2hcIiB3aGVuIHRoZXkgc2hhcmUgMyBvciBtb3JlJyxcbiAgICAgICAgICAgICdsZXR0ZXJzIGluIHRoZSBzYW1lIHBvc2l0aW9uLidcbiAgICAgICAgXSkpO1xuXG4gICAgICAgIGNvbnN0IGV4YW1wbGUxID0gbmV3IEdhbWVHcmlkKFxuICAgICAgICAgICAgeyAuLi5ncmlkQ29uZmlnLCByb3dzOiAzIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb25Mb2FkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGUxLmdldFVwcGVyKCkuc2V0TGV0dGVycygnaGVsbG8nKTtcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZTEuZ2V0TG93ZXIoKS5zZXRMZXR0ZXJzKCd3b3JsZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBleGFtcGxlMS5yZXNpemUoeyB3aWR0aDogZ3JpZEFyZWEud2lkdGgsIGhlaWdodDogMjAwIH0pO1xuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQoZXhhbXBsZTEpO1xuXG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChwYXJhZ3JhcGgoW1xuICAgICAgICAgICAgJ1doZW4geW91IGVudGVyIGEgd29yZCB0aGF0IG1hdGNoZXMgdGhlIHdvcmQgYWJvdmUgb3IgYmVsb3csIGl0JyxcbiAgICAgICAgICAgICd3aWxsIHJlcGxhY2UgdGhhdCB3b3JkLiBJZiB0aGUgd29yZCBtYXRjaGVzIGJvdGggd29yZHMsIHlvdSB3aW4hJ1xuICAgICAgICBdKSk7XG5cbiAgICAgICAgY29uc3QgZXhhbXBsZTIgPSBuZXcgR2FtZUdyaWQoXG4gICAgICAgICAgICB7IC4uLmdyaWRDb25maWcsIHJvd3M6IDMgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvbkxvYWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZTIuZ2V0VXBwZXIoKS5zZXRMZXR0ZXJzKCdoZWxsbycpO1xuICAgICAgICAgICAgICAgICAgICBleGFtcGxlMi5nZXRMb3dlcigpLnNldExldHRlcnMoJ3dvcmxkJyk7XG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGUyLnNldExldHRlcnMoJ3dvdWxkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGV4YW1wbGUyLnJlc2l6ZSh7IHdpZHRoOiBncmlkQXJlYS53aWR0aCwgaGVpZ2h0OiAyMDAgfSk7XG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChleGFtcGxlMik7XG5cbiAgICAgICAgdGhpcy50ZXh0Q29udGFpbmVyLmFwcGVuZENoaWxkKHBhcmFncmFwaChbXG4gICAgICAgICAgICAnSW4gdGhlIGV4YW1wbGUgYWJvdmUsIHRoZSBtaWRkbGUgd29yZCBcIndvdWxkXCIgbWF0Y2hlcyBcIndcIiwgXCJvXCIsJyxcbiAgICAgICAgICAgICdcImxcIiwgYW5kIFwiZFwiIGZyb20gXCJ3b3JsZFwiLiBJdCBhbHNvIG1hdGNoZXMgXCJsXCIgZnJvbSBcImhlbGxvXCIuIFdoZW4nLFxuICAgICAgICAgICAgJ2VudGVyZWQsIHRoZSBsb3dlciB3b3JkIFwid29ybGRcIiBpcyByZXBsYWNlZCB3aXRoIFwid291bGRcIiwgc28gdGhlJyxcbiAgICAgICAgICAgICduZXh0IHdvcmQgc2hvdWxkIG1hdGNoIGVpdGhlciBcImhlbGxvXCIgb3IgXCJ3b3VsZFwiLidcbiAgICAgICAgXSkpO1xuXG4gICAgICAgIGNvbnN0IGV4YW1wbGUzID0gbmV3IEdhbWVHcmlkKFxuICAgICAgICAgICAgeyAuLi5ncmlkQ29uZmlnLCByb3dzOiAzIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb25Mb2FkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGUzLmdldFVwcGVyKCkuc2V0TGV0dGVycygnaGVsbG8nKTtcbiAgICAgICAgICAgICAgICAgICAgZXhhbXBsZTMuZ2V0TG93ZXIoKS5zZXRMZXR0ZXJzKCd3b3JsZCcpO1xuICAgICAgICAgICAgICAgICAgICBleGFtcGxlMy5zZXRMZXR0ZXJzKCd3b3VsZCcpO1xuICAgICAgICAgICAgICAgICAgICBleGFtcGxlMy5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgZXhhbXBsZTMucmVzaXplKHsgd2lkdGg6IGdyaWRBcmVhLndpZHRoLCBoZWlnaHQ6IDIwMCB9KTtcblxuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQoZXhhbXBsZTMpO1xuXG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChwYXJhZ3JhcGgoW1xuICAgICAgICAgICAgJ1RhcCBhbnl3aGVyZSB0byBjb250aW51ZS4gSGFwcHkgTW90aGVyXFwncyBEYXkhJ1xuICAgICAgICBdKSk7XG5cbiAgICAgICAgaWYgKCFnYW1lRGF0YS5oYXNWaXNpdGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICBnYW1lRGF0YS5zZXRWaXNpdGVkKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2hvdygpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cblxuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMub3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dhbWUtdHV0b3JpYWwnLCBHYW1lVHV0b3JpYWwpO1xuIiwidHlwZSBXb3JkR3JhcGggPSB7XG4gICAgW3dvcmQ6IHN0cmluZ106IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IGNsYXNzIEdhbWVTb2x2ZXIge1xuICAgIGdyYXBoOiBXb3JkR3JhcGg7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG5cbiAgICBzb2x2ZShzdGFydDogc3RyaW5nLCBlbmQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgcGF0aHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHBhdGhzLnNldChzdGFydCwgbnVsbCk7XG4gICAgICAgIHZhciB2aXNpdGluZyA9IFtzdGFydF07XG4gICAgICAgIHZhciB0b1Zpc2l0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICB3aGlsZSAodmlzaXRpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHZpc2l0aW5nLnBvcCgpO1xuICAgICAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhbY3VycmVudF0uZm9yRWFjaCh3b3JkID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhdGhzLmhhcyh3b3JkKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXRocy5zZXQod29yZCwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRvVmlzaXQucHVzaCh3b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQgPT09IGVuZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmlzaXRpbmcubGVuZ3RoID09PSAwICYmIHRvVmlzaXQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmlzaXRpbmcgPSB0b1Zpc2l0O1xuICAgICAgICAgICAgICAgIHRvVmlzaXQgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhdGggPSBbZW5kXTtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBlbmQ7XG4gICAgICAgIGlmIChwYXRocy5oYXMoZW5kKSkge1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHBhdGhzLmdldChjdXJyZW50KTtcbiAgICAgICAgICAgICAgICBwYXRoLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBsb2FkR3JhcGgoKTogUHJvbWlzZTxHYW1lU29sdmVyPiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPEdhbWVTb2x2ZXI+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGggPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCAnZ3JhcGguanNvbicpO1xuICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENPT0tJRV9FWFBJUkFUSU9OX0RBWVMgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxudHlwZSBQZXJzaXN0ZWREYXRhID0ge1xuICAgIHZpc2l0ZWQ6IGJvb2xlYW47XG4gICAgc3RyZWFrOiBudW1iZXI7XG4gICAgbW9zdFJlY2VudDogc3RyaW5nO1xufVxuXG50eXBlIENvb2tpZURhdGEgPSB7XG4gICAgW25hbWU6IHN0cmluZ106IGFueTtcbn07XG5cbnR5cGUgQ29va2llUGFyc2VyID0ge1xuICAgIFtuYW1lOiBzdHJpbmddOiAodmFsdWU6IHN0cmluZykgPT4gYW55XG59O1xuXG5leHBvcnQgY2xhc3MgR2FtZURhdGEge1xuICAgIHByaXZhdGUgZGF0ZTogRGF0ZTtcbiAgICBwcml2YXRlIGRhdGE6IFBlcnNpc3RlZERhdGE7XG4gICAgcHJpdmF0ZSBzY2hlbWE6IENvb2tpZVBhcnNlciA9IHtcbiAgICAgICAgdmlzaXRlZDogKHZhbHVlKSA9PiB2YWx1ZSA9PT0gJ3RydWUnLFxuICAgICAgICBzdHJlYWs6ICh2YWx1ZSkgPT4gcGFyc2VJbnQodmFsdWUpLFxuICAgICAgICBtb3N0UmVjZW50OiAodmFsdWUpID0+IHZhbHVlLFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcihkYXRlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgICAgIGNvbnN0IGNvb2tpZURhdGEgPSB0aGlzLnBhcnNlQ29va2llKCk7XG5cbiAgICAgICAgdGhpcy5kYXRhID0ge1xuICAgICAgICAgICAgdmlzaXRlZDogY29va2llRGF0YS52aXNpdGVkID8/IGZhbHNlLFxuICAgICAgICAgICAgc3RyZWFrOiBjb29raWVEYXRhLnN0cmVhayA/PyAwLFxuICAgICAgICAgICAgbW9zdFJlY2VudDogY29va2llRGF0YS5tb3N0UmVjZW50ID8/ICcnLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2hlY2tTdHJlYWsoKTtcbiAgICB9XG5cbiAgICBzZXRWaXNpdGVkKCkge1xuICAgICAgICB0aGlzLmRhdGEudmlzaXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2F2ZURhdGEoKTtcbiAgICB9XG5cbiAgICBoYXNWaXNpdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnZpc2l0ZWQ7XG4gICAgfVxuXG4gICAgY2hlY2tTdHJlYWsoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEubW9zdFJlY2VudCA9PT0gdGhpcy5mb3JtYXREYXRlKHRoaXMuZGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRheUJlZm9yZSA9IG5ldyBEYXRlKHRoaXMuZGF0ZSk7XG4gICAgICAgIGRheUJlZm9yZS5zZXREYXRlKHRoaXMuZGF0ZS5nZXREYXRlKCkgLSAxKTtcblxuICAgICAgICBpZiAodGhpcy5kYXRhLm1vc3RSZWNlbnQgIT09IHRoaXMuZm9ybWF0RGF0ZShkYXlCZWZvcmUpKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEuc3RyZWFrID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZFN0cmVhaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5tb3N0UmVjZW50ID09PSB0aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kYXRhLnN0cmVhaysrO1xuICAgICAgICB0aGlzLmRhdGEubW9zdFJlY2VudCA9IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUpO1xuICAgICAgICB0aGlzLnNhdmVEYXRhKCk7XG4gICAgfVxuXG4gICAgc2F2ZURhdGEoKSB7XG4gICAgICAgIGNvbnN0IGNvb2tpZUV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29va2llRXhwaXJhdGlvbkRhdGUuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSArIENPT0tJRV9FWFBJUkFUSU9OX0RBWVMpO1xuICAgICAgICBjb25zdCBleHBpcmF0aW9uU3RyaW5nID0gJ2V4cGlyZXM9JyArIGNvb2tpZUV4cGlyYXRpb25EYXRlLnRvVVRDU3RyaW5nKCk7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YSkuZm9yRWFjaCgoW25hbWUsIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIHZhbHVlLnRvU3RyaW5nKCkgKyAnOycgKyBleHBpcmF0aW9uU3RyaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwYXJzZUNvb2tpZSgpOiBDb29raWVEYXRhIHtcbiAgICAgICAgY29uc3QgZGF0YTogQ29va2llRGF0YSA9IHt9O1xuICAgICAgICBpZiAoZG9jdW1lbnQuY29va2llKSB7XG4gICAgICAgICAgICBkZWNvZGVVUkkoZG9jdW1lbnQuY29va2llKVxuICAgICAgICAgICAgICAgIC5zcGxpdCgnOycpXG4gICAgICAgICAgICAgICAgLm1hcChlbnRyeSA9PiBlbnRyeS5zcGxpdChcIj1cIikpXG4gICAgICAgICAgICAgICAgLmZvckVhY2goa2V5VmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlWYWx1ZVswXS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0ga2V5VmFsdWVbMV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjaGVtYS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2tleV0gPSB0aGlzLnNjaGVtYVtrZXldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICAgICAgZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICBdLmpvaW4oJycpO1xuICAgIH1cblxuICAgIGdldERhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGU7XG4gICAgfVxuXG4gICAgZ2V0U3RyZWFrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnN0cmVhaztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIRUFERVJfSUNPTl9TSVpFLCBNQVhfV0lEVEgsIEdSSURfUEFERElOR19XSURUSCwgS0VZQk9BUkRfSEVJR0hULCBIRUFERVJfSEVJR0hULCBET1dOX0FSUk9XLCBOT19BUlJPVywgVVBfQVJST1csIFNPTFVUSU9OX01BUktFUiB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgR2FtZUtleWJvYXJkIH0gZnJvbSBcIi4vR2FtZUtleWJvYXJkXCI7XG5pbXBvcnQgeyBHYW1lR3JpZCwgR3JpZFNvbHV0aW9uIH0gZnJvbSAnLi9HYW1lR3JpZCc7XG5pbXBvcnQgeyBHYW1lVHV0b3JpYWwgfSBmcm9tIFwiLi9HYW1lVHV0b3JpYWxcIjtcbmltcG9ydCB7IEdhbWVTb2x2ZXIgfSBmcm9tIFwiLi9HYW1lU29sdmVyXCI7XG5pbXBvcnQgeyBHYW1lRGF0YSB9IGZyb20gXCIuL0dhbWVEYXRhXCI7XG5cbnR5cGUgSGVhZGVySWNvbk9wdGlvbnMgPSB7XG4gICAgYWx0VGV4dD86IHN0cmluZztcbiAgICB0aXRsZT86IHN0cmluZztcbn07XG5cbnR5cGUgSGVhZGVyTGlua09wdGlvbnMgPSBIZWFkZXJJY29uT3B0aW9ucyAmIHtcbiAgICBuZXdUYWI/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgTGFtYXJkbGVHYW1lIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcbiAgICBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIHdpblBvcHVwOiBIVE1MRGl2RWxlbWVudDtcbiAgICBrZXlib2FyZDogYW55O1xuICAgIHdpbk1lc3NhZ2U6IEhUTUxEaXZFbGVtZW50O1xuICAgIHdpbk1lc3NhZ2VUZXh0OiBIVE1MRGl2RWxlbWVudDtcbiAgICB3aW5NZXNzYWdlU2hhcmU6IEhUTUxEaXZFbGVtZW50O1xuICAgIGhlYWRlcjogSFRNTERpdkVsZW1lbnQ7XG4gICAgc3BhY2VyTGVmdDogSFRNTERpdkVsZW1lbnQ7XG4gICAgdGl0bGVUZXh0OiBIVE1MRGl2RWxlbWVudDtcbiAgICBzcGFjZXJSaWdodDogSFRNTERpdkVsZW1lbnQ7XG4gICAgdXJsU2VlZDogc3RyaW5nO1xuICAgIHNlZWQ6IGFueTtcbiAgICB0dXRvcmlhbDogR2FtZVR1dG9yaWFsO1xuICAgIGdyaWQ6IEdhbWVHcmlkO1xuICAgIHNvbHZlcjogR2FtZVNvbHZlcjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuZ2FtZURhdGEgPSBuZXcgR2FtZURhdGEobmV3IERhdGUoKSk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpO1xuXG4gICAgICAgIHRoaXMud2luUG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy53aW5Qb3B1cC5jbGFzc0xpc3QuYWRkKCdvdmVybGF5JywgJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLndpblBvcHVwKTtcbiAgICAgICAgdGhpcy53aW5Qb3B1cC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53aW5Qb3B1cC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmQuZGlzYWJsZSgpO1xuICAgICAgICAgICAgLy8gdGhpcy5rZXlib2FyZC5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy53aW5NZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMud2luTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCd3aW5NZXNzYWdlJyk7XG4gICAgICAgIHRoaXMud2luUG9wdXAuYXBwZW5kQ2hpbGQodGhpcy53aW5NZXNzYWdlKTtcblxuICAgICAgICB0aGlzLndpbk1lc3NhZ2VUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMud2luTWVzc2FnZS5hcHBlbmRDaGlsZCh0aGlzLndpbk1lc3NhZ2VUZXh0KTtcblxuICAgICAgICB0aGlzLndpbk1lc3NhZ2VTaGFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLndpbk1lc3NhZ2VTaGFyZS5jbGFzc0xpc3QuYWRkKCdzaGFyZS1yZXN1bHQnKTtcbiAgICAgICAgdGhpcy53aW5NZXNzYWdlU2hhcmUuaW5uZXJUZXh0ID0gJ1NoYXJlISc7XG4gICAgICAgIHRoaXMud2luTWVzc2FnZS5hcHBlbmRDaGlsZCh0aGlzLndpbk1lc3NhZ2VTaGFyZSk7XG5cbiAgICAgICAgdGhpcy5oZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5oZWFkZXIuY2xhc3NMaXN0LmFkZCgnaGVhZGVyJyk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuaGVhZGVyKTtcblxuICAgICAgICB0aGlzLnNwYWNlckxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5zcGFjZXJMZWZ0LmNsYXNzTGlzdC5hZGQoJ3NwYWNlci1sZWZ0Jyk7XG4gICAgICAgIHRoaXMuaGVhZGVyLmFwcGVuZENoaWxkKHRoaXMuc3BhY2VyTGVmdCk7XG5cbiAgICAgICAgdGhpcy5zcGFjZXJMZWZ0LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlSGVhZGVyTGluayhcbiAgICAgICAgICAgICdob21lLnN2ZycsXG4gICAgICAgICAgICB0aGlzLmdldERhaWx5UHV6emxlTGluaygpLFxuICAgICAgICAgICAgeyBhbHRUZXh0OiAnZ28gdG8gZGFpbHkgcHV6emxlJyB9XG4gICAgICAgICkpO1xuXG4gICAgICAgIHRoaXMuc3BhY2VyTGVmdC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUhlYWRlckxpbmsoXG4gICAgICAgICAgICAnZGljZS0zLnN2ZycsXG4gICAgICAgICAgICB0aGlzLmdldFJhbmRvbVB1enpsZUxpbmsoKSxcbiAgICAgICAgICAgIHsgYWx0VGV4dDogJ2dvIHRvIHJhbmRvbSBwdXp6bGUnIH1cbiAgICAgICAgKSk7XG5cbiAgICAgICAgdGhpcy50aXRsZVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy50aXRsZVRleHQuaW5uZXJUZXh0ID0gJ0xBTUFSRExFJztcbiAgICAgICAgdGhpcy50aXRsZVRleHQuY2xhc3NMaXN0LmFkZCgndGl0bGUtdGV4dCcpO1xuICAgICAgICB0aGlzLmhlYWRlci5hcHBlbmRDaGlsZCh0aGlzLnRpdGxlVGV4dCk7XG5cbiAgICAgICAgdGhpcy5zcGFjZXJSaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLnNwYWNlclJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3NwYWNlci1yaWdodCcpO1xuICAgICAgICB0aGlzLmhlYWRlci5hcHBlbmRDaGlsZCh0aGlzLnNwYWNlclJpZ2h0KTtcblxuICAgICAgICB0aGlzLnNwYWNlclJpZ2h0LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlSGVhZGVyTGluayhcbiAgICAgICAgICAgICdzb3VyY2Uuc3ZnJyxcbiAgICAgICAgICAgICdodHRwczovL2dpdGh1Yi5jb20vYWhhZ2dhcnQvbGFtYXJkbGUnLFxuICAgICAgICAgICAgeyBuZXdUYWI6IHRydWUsIGFsdFRleHQ6ICdnbyB0byBzb3VyY2UgY29kZScgfVxuICAgICAgICApKTtcblxuICAgICAgICBjb25zdCBoZWxwQnV0dG9uID0gdGhpcy5jcmVhdGVIZWFkZXJJY29uKCdoZWxwLnN2ZycsIHtcbiAgICAgICAgICAgIGFsdFRleHQ6ICdzaG93IHR1dG9yaWFsJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zcGFjZXJSaWdodC5hcHBlbmRDaGlsZChoZWxwQnV0dG9uKTtcblxuICAgICAgICB0aGlzLnVybFNlZWQgPSBuZXcgVVJMKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoJ3NlZWQnKTtcbiAgICAgICAgY29uc3QgZGF0ZVNlZWQgPSB0aGlzLmdhbWVEYXRhLmZvcm1hdERhdGUodGhpcy5nYW1lRGF0YS5nZXREYXRlKCkpO1xuICAgICAgICB0aGlzLnNlZWQgPSB0aGlzLnVybFNlZWQgPz8gZGF0ZVNlZWQ7XG5cbiAgICAgICAgY29uc3QgZ3JpZENvbmZpZyA9IHtcbiAgICAgICAgICAgIHNlZWQ6IHRoaXMuc2VlZCxcbiAgICAgICAgICAgIHJvd3M6IDcsXG4gICAgICAgICAgICBsZXR0ZXJzOiA1LFxuICAgICAgICAgICAgbWF0Y2hlczogMyxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnR1dG9yaWFsID0gbmV3IEdhbWVUdXRvcmlhbChcbiAgICAgICAgICAgIHRoaXMuZ2FtZURhdGEsXG4gICAgICAgICAgICBncmlkQ29uZmlnLFxuICAgICAgICAgICAgdGhpcy5nZXRHcmlkQXJlYSgpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMudHV0b3JpYWwpO1xuXG4gICAgICAgIGhlbHBCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudHV0b3JpYWwuc2hvdygpO1xuXG4gICAgICAgIHRoaXMuZ3JpZCA9IG5ldyBHYW1lR3JpZChncmlkQ29uZmlnLCB7XG4gICAgICAgICAgICBvbldpbjogc29sdXRpb24gPT4gdGhpcy53aW5HYW1lKHNvbHV0aW9uKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmdyaWQpO1xuXG4gICAgICAgIHRoaXMua2V5Ym9hcmQgPSBuZXcgR2FtZUtleWJvYXJkKHRoaXMuZ3JpZCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmtleWJvYXJkKTtcblxuICAgICAgICB0aGlzLnNvbHZlciA9IG5ldyBHYW1lU29sdmVyKCk7XG5cbiAgICAgICAgdGhpcy5yZXNpemVHcmlkKCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLnJlc2l6ZUdyaWQoKSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnQmFja3NwYWNlJykge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5Ym9hcmQuYmFja3NwYWNlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlib2FyZC5zdWJtaXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkubWF0Y2goL15bYS16XSQvKSkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5Ym9hcmQuYXBwZW5kTGV0dGVyKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlSGVhZGVyTGluayhcbiAgICAgICAgaWNvblBhdGg6IHN0cmluZywgXG4gICAgICAgIGxpbmtQYXRoOiBzdHJpbmcsIFxuICAgICAgICBvcHRpb25zOiBIZWFkZXJMaW5rT3B0aW9ucyA9IHt9XG4gICAgKTogSFRNTEFuY2hvckVsZW1lbnQge1xuICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGxpbmtQYXRoKTtcbiAgICAgICAgaWYgKG9wdGlvbnMubmV3VGFiKVxuICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICAgICAgbGluay5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUhlYWRlckljb24oaWNvblBhdGgsIG9wdGlvbnMpKTtcbiAgICAgICAgcmV0dXJuIGxpbms7XG4gICAgfVxuXG4gICAgY3JlYXRlSGVhZGVySWNvbihcbiAgICAgICAgcGF0aDogc3RyaW5nLCBcbiAgICAgICAgb3B0aW9uczogSGVhZGVySWNvbk9wdGlvbnMgPSB7fVxuICAgICk6IEhUTUxJbWFnZUVsZW1lbnQge1xuICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIGljb24uc2V0QXR0cmlidXRlKCdzcmMnLCBwYXRoKTtcbiAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgSEVBREVSX0lDT05fU0laRS50b1N0cmluZygpKTtcbiAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIEhFQURFUl9JQ09OX1NJWkUudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChvcHRpb25zLmFsdFRleHQpIHtcbiAgICAgICAgICAgIGljb24uc2V0QXR0cmlidXRlKCdhbHQnLCBvcHRpb25zLmFsdFRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRpdGxlIHx8IG9wdGlvbnMuYWx0VGV4dCkge1xuICAgICAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgb3B0aW9ucy50aXRsZSA/PyBvcHRpb25zLmFsdFRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpY29uO1xuICAgIH1cblxuICAgIGdldEdyaWRBcmVhKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IE1hdGgubWluKE1BWF9XSURUSCwgd2luZG93LmlubmVyV2lkdGggLSBHUklEX1BBRERJTkdfV0lEVEgpLFxuICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSBLRVlCT0FSRF9IRUlHSFQgLSBIRUFERVJfSEVJR0hULFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJlc2l6ZUdyaWQoKSB7XG4gICAgICAgIGNvbnN0IGxlZnRvdmVyID0gdGhpcy5ncmlkLnJlc2l6ZSh0aGlzLmdldEdyaWRBcmVhKCkpO1xuICAgICAgICB0aGlzLmdyaWQuZ2V0Q29udGFpbmVyKCkuc3R5bGUubWFyZ2luQm90dG9tID0gbGVmdG92ZXIgKyAncHgnO1xuICAgIH1cblxuICAgIGNvbXB1dGVNYXRjaGluZyhzb2x1dGlvbjogc3RyaW5nLCBtYXRjaGVzOiBzdHJpbmdbXSkge1xuICAgICAgICBjb25zdCBtYXRjaGluZ0xldHRlcnMgPSBbXTtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBzb2x1dGlvbjtcblxuICAgICAgICAvLyBpdGVyYXRlIHRoZSBhcnJheSBpbiByZXZlcnNlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSBpIC0gMV07XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TWF0Y2ggPSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLnNwbGl0KCcnKVxuICAgICAgICAgICAgICAgIC5tYXAoKGxldHRlciwgcG9zKSA9PiBbbGV0dGVyLCBuZXh0LmNoYXJBdChwb3MpXSlcbiAgICAgICAgICAgICAgICAubWFwKChbYSwgYl0pID0+IGEgPT09IGIpO1xuICAgICAgICAgICAgbWF0Y2hpbmdMZXR0ZXJzLnB1c2goY3VycmVudE1hdGNoKTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldmVyc2UgdGhlIG91dHB1dFxuICAgICAgICBtYXRjaGluZ0xldHRlcnMucmV2ZXJzZSgpO1xuXG4gICAgICAgIHJldHVybiBtYXRjaGluZ0xldHRlcnM7XG4gICAgfVxuXG4gICAgZm9ybWF0TWF0Y2hpbmcoXG4gICAgICAgIHNlcXVlbmNlOiBib29sZWFuW11bXSwgXG4gICAgICAgIG1hdGNoQ2hhcjogc3RyaW5nLCBcbiAgICAgICAgbm9uTWF0Y2hDaGFyOiBzdHJpbmdcbiAgICApOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBzZXF1ZW5jZVxuICAgICAgICAgICAgLm1hcChyb3dNYXRjaCA9PiByb3dNYXRjaFxuICAgICAgICAgICAgICAgIC5tYXAobGV0dGVyTWF0Y2ggPT4gbGV0dGVyTWF0Y2ggPyBtYXRjaENoYXIgOiBub25NYXRjaENoYXIpXG4gICAgICAgICAgICAgICAgLmpvaW4oJycpXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIGNyZWF0ZVNoYXJlTWVzc2FnZShzb2x1dGlvbjogR3JpZFNvbHV0aW9uLCBocmVmOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgdXBwZXJTZXF1ZW5jZSA9IHRoaXMuZm9ybWF0TWF0Y2hpbmcoXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGluZyhzb2x1dGlvbi5zb2x1dGlvbiwgc29sdXRpb24udXBwZXIpLFxuICAgICAgICAgICAgRE9XTl9BUlJPVywgTk9fQVJST1dcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBsb3dlclNlcXVlbmNlID0gdGhpcy5mb3JtYXRNYXRjaGluZyhcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoaW5nKHNvbHV0aW9uLnNvbHV0aW9uLCBzb2x1dGlvbi5sb3dlciksXG4gICAgICAgICAgICBVUF9BUlJPVywgTk9fQVJST1dcbiAgICAgICAgKTtcblxuICAgICAgICBsb3dlclNlcXVlbmNlLnJldmVyc2UoKTtcblxuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdChcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAnbGFtYXJkbGUnLFxuICAgICAgICAgICAgICAgIGhyZWYsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkLmdldE51bUd1ZXNzZXMoKS50b1N0cmluZygpICsgJyB0cmllcycsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdXBwZXJTZXF1ZW5jZSxcbiAgICAgICAgICAgIFtzb2x1dGlvbi5zb2x1dGlvbi5zcGxpdCgnJykubWFwKCgpID0+IFNPTFVUSU9OX01BUktFUikuam9pbignJyldLFxuICAgICAgICAgICAgbG93ZXJTZXF1ZW5jZVxuICAgICAgICApLmpvaW4oJ1xcbicpO1xuICAgIH1cblxuICAgIGNvbXB1dGVQYXIoKSB7XG4gICAgICAgIGNvbnN0IG1pblNvbHV0aW9uID0gdGhpcy5zb2x2ZXIuc29sdmUoXG4gICAgICAgICAgICB0aGlzLmdyaWQuZ2V0VXBwZXJTdGFydCgpLFxuICAgICAgICAgICAgdGhpcy5ncmlkLmdldExvd2VyU3RhcnQoKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSwgbWluU29sdXRpb24ubGVuZ3RoIC0gMik7XG4gICAgfVxuXG4gICAgYXN5bmMgd2luR2FtZShzb2x1dGlvbjogR3JpZFNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VMaW5lcyA9IFtdO1xuICAgICAgICBtZXNzYWdlTGluZXMucHVzaCgnWW91IHdvbiBpbiAnICsgdGhpcy5ncmlkLmdldE51bUd1ZXNzZXMoKSArICcgdHJpZXMhJyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zb2x2ZXIubG9hZEdyYXBoKCk7XG5cbiAgICAgICAgbWVzc2FnZUxpbmVzLnB1c2goJ1BhcjogJyArIHRoaXMuY29tcHV0ZVBhcigpKTtcblxuICAgICAgICBpZiAodGhpcy5zZWVkID09PSB0aGlzLmdhbWVEYXRhLmZvcm1hdERhdGUodGhpcy5nYW1lRGF0YS5nZXREYXRlKCkpKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVEYXRhLmFkZFN0cmVhaygpO1xuICAgICAgICAgICAgbWVzc2FnZUxpbmVzLnB1c2goJ0N1cnJlbnQgU3RyZWFrOiAnICsgdGhpcy5nYW1lRGF0YS5nZXRTdHJlYWsoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLndpblBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXG4gICAgICAgIHRoaXMud2luTWVzc2FnZVRleHQuaW5uZXJUZXh0ID0gbWVzc2FnZUxpbmVzLmpvaW4oJ1xcbicpO1xuICAgICAgICB0aGlzLndpbk1lc3NhZ2VTaGFyZS5vbmNsaWNrID0gZSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVNZXNzYWdlID0gdGhpcy5jcmVhdGVTaGFyZU1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgc29sdXRpb24sXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luICsgJz9zZWVkPScgKyB0aGlzLnNlZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBmYWlsTWVzc2FnZSA9ICdGYWlsZWQgdG8gU2hhcmUgOignO1xuXG4gICAgICAgICAgICBjb25zdCBvbGRUZXh0ID0gdGhpcy53aW5NZXNzYWdlU2hhcmUuaW5uZXJUZXh0O1xuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5zaGFyZSkge1xuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5zaGFyZSh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2hhcmVNZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB0aGlzLndpbk1lc3NhZ2VTaGFyZS5pbm5lclRleHQgPSBmYWlsTWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQpIHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzaGFyZU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMud2luTWVzc2FnZVNoYXJlLmlubmVyVGV4dCA9ICdDb3BpZWQgdG8gY2xpcGJvYXJkISc7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy53aW5NZXNzYWdlU2hhcmUuaW5uZXJUZXh0ID0gb2xkVGV4dCwgMzAwMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMud2luTWVzc2FnZVNoYXJlLmlubmVyVGV4dCA9IGZhaWxNZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldERhaWx5UHV6emxlTGluaygpIHtcbiAgICAgICAgcmV0dXJuICcuLyc7XG4gICAgfVxuXG4gICAgZ2V0UmFuZG9tUHV6emxlTGluaygpIHtcbiAgICAgICAgcmV0dXJuICcuLz9zZWVkPScgKyB0aGlzLnJhbmRvbVN0cmluZygpO1xuICAgIH1cblxuICAgIHJhbmRvbVN0cmluZygpIHtcbiAgICAgICAgY29uc3QgY29kZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICBjb2Rlcy5wdXNoKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvZGVzLmpvaW4oJycpO1xuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbGFtYXJkbGUtZ2FtZScsIExhbWFyZGxlR2FtZSk7XG4iLCJjb25zdCBSRVFVSVJFRF9NQVRDSEVTID0gMztcbmV4cG9ydCBjb25zdCBHUklEX1JPV19HQVAgPSA1O1xuY29uc3QgR1JJRF9DT0xfR0FQID0gNTtcbmV4cG9ydCBjb25zdCBNQVhfV0lEVEggPSA1MDA7XG5jb25zdCBLRVlCT0FSRF9IRUlHSFRfTUlOX1BFUkNFTlQgPSAwLjI1O1xuY29uc3QgTlVNX1JPV1MgPSA3O1xuZXhwb3J0IGNvbnN0IE5VTV9MRVRURVJTID0gNTtcbmNvbnN0IEtFWV9IRUlHSFQgPSA1ODtcbmNvbnN0IEtFWV9NQVJHSU4gPSA1O1xuZXhwb3J0IGNvbnN0IEdSSURfUEFERElORyA9IDEwO1xuZXhwb3J0IGNvbnN0IEhFQURFUl9IRUlHSFQgPSA1MDtcbmV4cG9ydCBjb25zdCBJTlZBTElEX0FOSU1BVElPTl9MRU5HVEhfTVMgPSA0MDA7XG5leHBvcnQgY29uc3QgS0VZQk9BUkRfSEVJR0hUID0gS0VZX0hFSUdIVCAqIDMgKyBLRVlfTUFSR0lOICogMjtcbmV4cG9ydCBjb25zdCBHUklEX1BBRERJTkdfV0lEVEggPSBHUklEX1BBRERJTkcgKiAyO1xuZXhwb3J0IGNvbnN0IEhFQURFUl9JQ09OX1NJWkUgPSAyNTtcbmV4cG9ydCBjb25zdCBDT09LSUVfRVhQSVJBVElPTl9EQVlTID0gMztcbmV4cG9ydCBjb25zdCBVUF9BUlJPVyA9ICdcXHVEODNEXFx1REQzQyc7XG5leHBvcnQgY29uc3QgRE9XTl9BUlJPVyA9ICdcXHVEODNEXFx1REQzRCc7XG5leHBvcnQgY29uc3QgTk9fQVJST1cgPSAnXFx1MjNGQSc7XG5leHBvcnQgY29uc3QgU09MVVRJT05fTUFSS0VSID0gJ1xcdTAwMkFcXHVGRTBGXFx1MjBFMyc7XG4iLCJpbXBvcnQgeyBOVU1fTEVUVEVSUyB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgV29yZExpc3QgfSBmcm9tIFwiLi9Xb3JkTGlzdFwiO1xuXG5cbmV4cG9ydCBjb25zdCBXT1JEX0xJU1QgPSBuZXcgV29yZExpc3QoTlVNX0xFVFRFUlMpO1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRXb3JkcyhjYWxsYmFjazogKHJlc3BvbnNlVGV4dDogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZSA9PiB7XG4gICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsICdmaXZlLWxldHRlcnMudHh0Jyk7XG4gICAgcmVxdWVzdC5zZW5kKCk7XG59XG4iLCJleHBvcnQgY2xhc3MgV29yZExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKG51bUxldHRlcnMpIHtcbiAgICAgICAgdGhpcy5udW1MZXR0ZXJzID0gbnVtTGV0dGVycztcbiAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25SZWFkeSA9IFtdO1xuICAgICAgICB0aGlzLndvcmRzID0gW107XG4gICAgfVxuXG4gICAgYWRkTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5vblJlYWR5LnB1c2goY2FsbGJhY2spO1xuICAgICAgICBpZiAodGhpcy5pc1JlYWR5KSB7XG4gICAgICAgICAgICBjYWxsYmFjayh3b3Jkcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRXb3JkcyhyYXdXb3Jkcykge1xuICAgICAgICB0aGlzLndvcmRzID0gcmF3V29yZHMuc3BsaXQoJ1xcbicpO1xuICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLm9uUmVhZHkuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayh0aGlzLndvcmRzKSk7XG4gICAgfVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBsb2FkV29yZHMsIFdPUkRfTElTVCB9IGZyb20gXCIuL2NvbnRleHRcIjtcblxucmVxdWlyZSgnLi9MYW1hcmRsZUdhbWUnKTtcblxubG9hZFdvcmRzKHdvcmRzID0+IFdPUkRfTElTVC5zZXRXb3Jkcyh3b3JkcykpO1xuIl0sIm5hbWVzIjpbIkdhbWVLZXlib2FyZCIsIkhUTUxFbGVtZW50IiwiY29uc3RydWN0b3IiLCJncmlkIiwic3VwZXIiLCJ0aGlzIiwibGV0dGVycyIsImVuYWJsZWQiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsIm1hcmdpbiIsImFwcGVuZENoaWxkIiwiY3JlYXRlUm93IiwiYmFja3NwYWNlIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwic2V0TGV0dGVycyIsImFwcGVuZExldHRlciIsImxldHRlciIsInN1Ym1pdCIsInJvdyIsImNsYXNzTGlzdCIsImFkZCIsInNwYWNlciIsImtleSIsImlubmVyVGV4dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXNhYmxlIiwiZW5hYmxlIiwic2hvdyIsInJlbW92ZSIsImhpZGUiLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSIsIkdyaWRMZXR0ZXIiLCJwb3MiLCJzZXRMZXR0ZXIiLCJzZXRNYXRjaCIsIm1hdGNoVXBwZXIiLCJtYXRjaExvd2VyIiwic2V0SGlnaGxpZ2h0IiwiaXNIaWdobGlnaHRlZCIsImJvcmRlckNvbG9yIiwiR3JpZFJvdyIsImNvbmZpZyIsInRpbGVzIiwiaSIsInRpbGUiLCJwdXNoIiwiZ2V0QXR0cmlidXRlIiwiZ2V0TGV0dGVycyIsInBhZGRlZExldHRlcnMiLCJwYWRFbmQiLCJ1cGRhdGVNYXRjaGVzIiwidXBwZXIiLCJsb3dlciIsImZvckVhY2giLCJpc0NvbXBsZXRlIiwiZG9lc01hdGNoIiwib3RoZXIiLCJtYXRjaENvdW50IiwibWF0Y2hlcyIsIndpZ2dsZSIsInNldEF0dHJpYnV0ZSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJHYW1lR3JpZCIsImNhbGxiYWNrcyIsInJvd0NvbmZpZyIsIm51bUd1ZXNzZXMiLCJ1cHBlck1hdGNoZXMiLCJsb3dlck1hdGNoZXMiLCJpZCIsInNldFByb3BlcnR5Iiwicm93cyIsInRvU3RyaW5nIiwiVyIsIndvcmRzIiwiY3JlYXRlUm93cyIsIm9uTG9hZCIsImdldFJhbmRvbVdvcmQiLCJzZWVkIiwiTWF0aCIsImFicyIsImdldEhhc2hDb2RlIiwidXBwZXJTdGFydCIsImxvd2VyU3RhcnQiLCJjdXJyZW50Iiwicm93c0Fib3ZlIiwiY2VpbCIsInJvd3NCZWxvdyIsImZsb29yIiwiQXJyYXkiLCJmaWxsIiwiZ2V0VGlsZVNpemUiLCJncmlkQXJlYSIsImNvbHVtbkdhcFdpZHRoIiwibWF4VGlsZVdpZHRoIiwid2lkdGgiLCJncmlkUGFkZGluZ0hlaWdodCIsInJvd0dhcEhlaWdodCIsIm1heFRpbGVIZWlnaHQiLCJoZWlnaHQiLCJtaW4iLCJyZXNpemUiLCJzaXplIiwidGlsZVNpemUiLCJncmlkV2lkdGgiLCJncmlkSGVpZ2h0IiwiaW5jbHVkZXMiLCJ1cHBlck1hdGNoIiwibG93ZXJNYXRjaCIsIm9uV2luIiwic29sdXRpb24iLCJuZXdSb3ciLCJjaGlsZHJlbiIsImluc2VydEJlZm9yZSIsInN0ciIsImhhc2giLCJjaGFyQ29kZUF0IiwiZ2V0VXBwZXIiLCJnZXRMb3dlciIsImdldENvbnRhaW5lciIsImdldE51bUd1ZXNzZXMiLCJnZXRVcHBlclN0YXJ0IiwiZ2V0TG93ZXJTdGFydCIsInBhcmFncmFwaCIsInRleHQiLCJlbGVtIiwiam9pbiIsIkdhbWVUdXRvcmlhbCIsImdhbWVEYXRhIiwiZ3JpZENvbmZpZyIsIm92ZXJsYXkiLCJ0ZXh0Q29udGFpbmVyIiwidGl0bGUiLCJleGFtcGxlMSIsImV4YW1wbGUyIiwiZXhhbXBsZTMiLCJoYXNWaXNpdGVkIiwib25jbGljayIsInNldFZpc2l0ZWQiLCJHYW1lU29sdmVyIiwic29sdmUiLCJzdGFydCIsImVuZCIsInBhdGhzIiwiTWFwIiwic2V0IiwidmlzaXRpbmciLCJ0b1Zpc2l0IiwicG9wIiwiZG9uZSIsImdyYXBoIiwid29yZCIsImhhcyIsInBhdGgiLCJnZXQiLCJsb2FkR3JhcGgiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsImUiLCJyZWFkeVN0YXRlIiwiRE9ORSIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsIm9wZW4iLCJzZW5kIiwiR2FtZURhdGEiLCJkYXRlIiwic2NoZW1hIiwidmlzaXRlZCIsInZhbHVlIiwic3RyZWFrIiwicGFyc2VJbnQiLCJtb3N0UmVjZW50IiwiY29va2llRGF0YSIsInBhcnNlQ29va2llIiwiZGF0YSIsImNoZWNrU3RyZWFrIiwic2F2ZURhdGEiLCJmb3JtYXREYXRlIiwiZGF5QmVmb3JlIiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiYWRkU3RyZWFrIiwiY29va2llRXhwaXJhdGlvbkRhdGUiLCJleHBpcmF0aW9uU3RyaW5nIiwidG9VVENTdHJpbmciLCJPYmplY3QiLCJlbnRyaWVzIiwibmFtZSIsImNvb2tpZSIsImRlY29kZVVSSSIsInNwbGl0IiwibWFwIiwiZW50cnkiLCJrZXlWYWx1ZSIsInRyaW0iLCJoYXNPd25Qcm9wZXJ0eSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJwYWRTdGFydCIsImdldFN0cmVhayIsIkxhbWFyZGxlR2FtZSIsIndpblBvcHVwIiwia2V5Ym9hcmQiLCJ3aW5NZXNzYWdlIiwid2luTWVzc2FnZVRleHQiLCJ3aW5NZXNzYWdlU2hhcmUiLCJoZWFkZXIiLCJzcGFjZXJMZWZ0IiwiY3JlYXRlSGVhZGVyTGluayIsImdldERhaWx5UHV6emxlTGluayIsImFsdFRleHQiLCJnZXRSYW5kb21QdXp6bGVMaW5rIiwidGl0bGVUZXh0Iiwic3BhY2VyUmlnaHQiLCJuZXdUYWIiLCJoZWxwQnV0dG9uIiwiY3JlYXRlSGVhZGVySWNvbiIsInVybFNlZWQiLCJVUkwiLCJsb2NhdGlvbiIsImhyZWYiLCJzZWFyY2hQYXJhbXMiLCJkYXRlU2VlZCIsInR1dG9yaWFsIiwiZ2V0R3JpZEFyZWEiLCJ3aW5HYW1lIiwiYXBwZW5kIiwic29sdmVyIiwicmVzaXplR3JpZCIsIm1hdGNoIiwiaWNvblBhdGgiLCJsaW5rUGF0aCIsIm9wdGlvbnMiLCJsaW5rIiwiaWNvbiIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImxlZnRvdmVyIiwibWFyZ2luQm90dG9tIiwiY29tcHV0ZU1hdGNoaW5nIiwibWF0Y2hpbmdMZXR0ZXJzIiwibmV4dCIsImN1cnJlbnRNYXRjaCIsImNoYXJBdCIsImEiLCJiIiwicmV2ZXJzZSIsImZvcm1hdE1hdGNoaW5nIiwic2VxdWVuY2UiLCJtYXRjaENoYXIiLCJub25NYXRjaENoYXIiLCJyb3dNYXRjaCIsImxldHRlck1hdGNoIiwiY3JlYXRlU2hhcmVNZXNzYWdlIiwidXBwZXJTZXF1ZW5jZSIsImxvd2VyU2VxdWVuY2UiLCJwcm90b3R5cGUiLCJjb25jYXQiLCJjb21wdXRlUGFyIiwibWluU29sdXRpb24iLCJtYXgiLCJtZXNzYWdlTGluZXMiLCJzdG9wUHJvcGFnYXRpb24iLCJzaGFyZU1lc3NhZ2UiLCJvcmlnaW4iLCJmYWlsTWVzc2FnZSIsIm9sZFRleHQiLCJuYXZpZ2F0b3IiLCJzaGFyZSIsImNhdGNoIiwiY2xpcGJvYXJkIiwid3JpdGVUZXh0IiwicmFuZG9tU3RyaW5nIiwiY29kZXMiLCJyYW5kb20iLCJHUklEX1JPV19HQVAiLCJNQVhfV0lEVEgiLCJOVU1fTEVUVEVSUyIsIkdSSURfUEFERElORyIsIkhFQURFUl9IRUlHSFQiLCJJTlZBTElEX0FOSU1BVElPTl9MRU5HVEhfTVMiLCJLRVlCT0FSRF9IRUlHSFQiLCJLRVlfSEVJR0hUIiwiR1JJRF9QQURESU5HX1dJRFRIIiwiSEVBREVSX0lDT05fU0laRSIsIkNPT0tJRV9FWFBJUkFUSU9OX0RBWVMiLCJVUF9BUlJPVyIsIkRPV05fQVJST1ciLCJOT19BUlJPVyIsIlNPTFVUSU9OX01BUktFUiIsIldPUkRfTElTVCIsIm51bUxldHRlcnMiLCJpc1JlYWR5Iiwib25SZWFkeSIsImFkZExpc3RlbmVyIiwiY2FsbGJhY2siLCJzZXRXb3JkcyIsInJhd1dvcmRzIiwibG9hZFdvcmRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJvYmoiLCJwcm9wIiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJzb3VyY2VSb290IjoiIn0=