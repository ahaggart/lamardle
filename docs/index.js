(()=>{var t={582:(t,e,s)=>{"use strict";s.r(e),s.d(e,{LamardleGame:()=>p});class i extends HTMLElement{constructor(t){super(),this.grid=t,this.letters="",this.enabled=!0,this.container=document.createElement("div"),this.container.style.margin="0 5px",this.container.appendChild(this.createRow("qwertyuiop")),this.container.appendChild(this.createRow(" asdfghjkl ")),this.container.appendChild(this.createRow("+zxcvbnm-")),this.appendChild(this.container)}backspace(){this.enabled&&0!=this.letters.length&&(this.letters=this.letters.substring(0,this.letters.length-1),this.grid.setLetters(this.letters))}appendLetter(t){this.enabled&&5!=this.letters.length&&(this.letters+=t,this.grid.setLetters(this.letters))}submit(){this.enabled&&this.grid.submit()&&(this.letters="")}createRow(t){const e=document.createElement("div");e.classList.add("game-keyboard-row");for(let s of t)if(" "===s){const t=document.createElement("div");t.classList.add("point-five"),e.appendChild(t)}else if("+"===s){const t=document.createElement("button");t.classList.add("key","one-point-five","enter"),t.innerText="enter",t.addEventListener("click",(()=>this.submit())),e.appendChild(t)}else if("-"===s){const t=document.createElement("button");t.classList.add("key","one-point-five","delete"),t.innerText="del",t.addEventListener("click",(()=>this.backspace())),e.appendChild(t)}else{const t=document.createElement("button");t.classList.add("key"),t.addEventListener("click",(()=>this.appendLetter(s))),t.innerText=s,e.appendChild(t)}return e}disable(){this.enabled=!1}enable(){this.enabled=!0}show(){this.container.classList.remove("hidden")}hide(){this.container.classList.add("hidden")}}customElements.define("game-keyboard",i);class r extends HTMLElement{constructor(t,e){super(),this.pos=e,this.setLetter(t||""),this.classList.add("letter","no-match")}setLetter(t){this.letter=t,this.innerText=t}setMatch(t,e){this.classList.remove("both-match","upper-match","lower-match","no-match"),t&&e?this.classList.add("both-match"):e?this.classList.add("lower-match"):t?this.classList.add("upper-match"):this.classList.add("no-match")}setHighlight(t){this.style.borderColor=t?"var(--highlight-color)":"var(--non-highlight-color)"}}customElements.define("grid-letter",r);class a extends HTMLElement{constructor(t){super(),this.tiles=[],this.letters="",this.config=t,this.classList.add("grid-row");for(let t=0;t<this.config.letters;t++){const e=new r("",t);this.tiles.push(e),this.appendChild(e)}this.setLetters(this.getAttribute("letters"))}getLetters(){return this.letters}setLetters(t){this.letters=t||"";const e=this.letters.substring(0,this.config.letters).padEnd(this.config.letters," ");for(let t=0;t<this.config.letters;t++)this.tiles[t].setLetter(e[t])}updateMatches(t,e){for(let s=0;s<this.tiles.length;s++)this.tiles[s].setMatch(this.tiles[s].letter===t.tiles[s].letter,this.tiles[s].letter===e.tiles[s].letter)}setHighlight(t){this.tiles.forEach((e=>e.setHighlight(t)))}isComplete(){return this.letters.length===this.config.letters}doesMatch(t){if(!this.isComplete()||!t.isComplete())return!1;var e=0;for(let s=0;s<this.config.letters;s++)this.letters[s]===t.letters[s]&&e++;return!(e<this.config.matches)}wiggle(){this.setAttribute("wiggle",""),window.setTimeout((()=>this.removeAttribute("wiggle")),400)}}customElements.define("grid-row",a);class h extends HTMLElement{constructor(t,e={}){super(),this.config=t,this.callbacks=e,this.rowConfig={letters:this.config.letters,matches:this.config.matches},this.numGuesses=0,this.upperMatches=[],this.lowerMatches=[],this.id="game-grid",this.grid=document.createElement("div"),this.grid.classList.add("grid"),this.grid.id="grid",this.grid.style.setProperty("--num-rows",this.config.rows.toString()),this.appendChild(this.grid),this.createRows()}getRandomWord(t){return this.words[Math.abs(this.getHashCode(t))%this.words.length]}createRows(){this.upper=new a(this.rowConfig),this.lower=new a(this.rowConfig),this.lower.id="goal",this.current=new a(this.rowConfig),this.current.setHighlight(!0);const t=Math.ceil((this.config.rows-3)/2),e=Math.floor((this.config.rows-3)/2);Array(t).fill(0).forEach((()=>this.grid.appendChild(new a(this.rowConfig)))),this.grid.appendChild(this.upper),this.grid.appendChild(this.current),this.grid.appendChild(this.lower),Array(e).fill(0).forEach((()=>this.grid.appendChild(new a(this.rowConfig))))}initialize(t){this.words=t,this.upperStart=this.getRandomWord(this.config.seed),this.upper.setLetters(this.upperStart),this.lowerStart=this.getRandomWord(this.config.seed+"salt"),this.lower.setLetters(this.lowerStart)}setLetters(t){this.current.setLetters(t),this.current.updateMatches(this.upper,this.lower)}getTileSize(t){const e=5*(this.config.letters-1),s=Math.floor((t.width-e)/this.config.letters),i=5*(this.config.rows-1),r=Math.floor((t.height-i-20)/this.config.rows);return Math.min(s,r)}resize(t){const e=5*(this.config.letters-1),s=5*(this.config.rows-1),i=this.getTileSize(t),r=i*this.config.letters+e,a=i*this.config.rows+s;return this.grid.style.width=r+"px",this.grid.style.height=a+"px",t.height-a-10}submit({checkWords:t=!0}={}){if(!this.current.isComplete())return this.current.wiggle(),!1;if(t&&!this.words.includes(this.current.getLetters()))return this.current.wiggle(),!1;const e=this.current.doesMatch(this.upper),s=this.current.doesMatch(this.lower);if(!e&&!s)return this.current.wiggle(),!1;if(this.numGuesses++,e&&s)return this.upperMatches.push(this.upper.getLetters()),this.lowerMatches.push(this.lower.getLetters()),this.callbacks.onWin({upper:this.upperMatches,solution:this.current.getLetters(),lower:this.lowerMatches}),!0;const i=new a(this.rowConfig);return i.setHighlight(!0),this.current.setHighlight(!1),e?(this.upperMatches.push(this.upper.getLetters()),this.grid.children[0].remove(),this.upper=this.current,this.current=i,this.grid.insertBefore(this.current,this.lower)):(this.lowerMatches.push(this.lower.getLetters()),this.grid.children[this.grid.children.length-1].remove(),this.lower=this.current,this.current=i,this.grid.insertBefore(this.current,this.lower)),!0}getHashCode(t){for(var e=0,s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e&=e;return e}getUpper(){return this.upper}getLower(){return this.lower}getContainer(){return this.grid}getNumGuesses(){return this.numGuesses}getUpperStart(){return this.upperStart}getLowerStart(){return this.lowerStart}}function n(t){const e=document.createElement("p");return e.innerText=t.join(" "),e}customElements.define("game-grid",h);class o extends HTMLElement{constructor(t,e,s){super(),this.overlay=document.createElement("div"),this.overlay.classList.add("overlay","tutorial","hidden"),this.appendChild(this.overlay),this.textContainer=document.createElement("div"),this.textContainer.style.width=s.width+"px",this.textContainer.style.margin="auto",this.overlay.appendChild(this.textContainer);const i=document.createElement("div");i.classList.add("tutorial-title"),i.innerText="How to Play",this.textContainer.appendChild(i),this.textContainer.appendChild(n(['The goal of LAMARDLE is to find words which "match" the words','above or below them. Two words "match" when they share 3 or more',"letters in the same position."]));const r=new h(Object.assign(Object.assign({},e),{rows:3}));r.resize({width:s.width,height:200}),r.getUpper().setLetters("hello"),r.getLower().setLetters("world"),this.textContainer.appendChild(r),this.textContainer.appendChild(n(["When you enter a word that matches the word above or below, it","will replace that word. If the word matches both words, you win!"]));const a=new h(Object.assign(Object.assign({},e),{rows:3}));a.resize({width:s.width,height:200}),a.getUpper().setLetters("hello"),a.getLower().setLetters("world"),a.setLetters("would"),this.textContainer.appendChild(a),this.textContainer.appendChild(n(['In the example above, the middle word "would" matches "w", "o",','"l", and "d" from "world". It also matches "l" from "hello". When','entered, the lower word "world" is replaced with "would", so the','next word should match either "hello" or "would".']));const o=new h(Object.assign(Object.assign({},e),{rows:3}));o.resize({width:s.width,height:200}),o.getUpper().setLetters("hello"),o.getLower().setLetters("world"),o.setLetters("would"),o.submit({checkWords:!1}),this.textContainer.appendChild(o),this.textContainer.appendChild(n(["Tap anywhere to continue. Happy Mother's Day!"])),t.hasVisited()||this.show(),this.overlay.onclick=()=>{this.hide(),t.setVisited()}}show(){this.overlay.classList.remove("hidden")}hide(){this.overlay.classList.add("hidden")}}customElements.define("game-tutorial",o);class d{constructor(){}solve(t,e){const s=new Map;s.set(t,null);for(var i=[t],r=[];i.length>0;){const t=i.pop();var a=!1;if(this.graph[t].forEach((i=>{s.has(i)||(s.set(i,t),r.push(i),i===e&&(a=!0))})),a)break;0===i.length&&0!==r.length&&(i=r,r=[])}const h=[e];var n=e;if(s.has(e)){for(;n!==t;)n=s.get(n),h.push(n);return h}return[]}loadGraph(){return void 0===this.onLoad&&(this.onLoad=new Promise((t=>{const e=new XMLHttpRequest;e.onreadystatechange=s=>{e.readyState===XMLHttpRequest.DONE&&200===e.status&&(this.graph=JSON.parse(e.responseText),t(this))},e.open("GET","graph.json"),e.send()}))),this.onLoad}}class l{constructor(t){var e,s,i;this.schema={visited:t=>"true"===t,streak:t=>parseInt(t),mostRecent:t=>t},this.date=t;const r=this.parseCookie();this.data={visited:null!==(e=r.visited)&&void 0!==e&&e,streak:null!==(s=r.streak)&&void 0!==s?s:0,mostRecent:null!==(i=r.mostRecent)&&void 0!==i?i:""},this.checkStreak()}setVisited(){this.data.visited=!0,this.saveData()}hasVisited(){return this.data.visited}checkStreak(){if(this.data.mostRecent===this.formatDate(this.date))return;const t=new Date(this.date);t.setDate(this.date.getDate()-1),this.data.mostRecent!==this.formatDate(t)&&(this.data.streak=0)}addStreak(){this.data.mostRecent!==this.formatDate(this.date)&&(this.data.streak++,this.data.mostRecent=this.formatDate(this.date),this.saveData())}saveData(){const t=new Date;t.setDate((new Date).getDate()+3);const e="expires="+t.toUTCString();Object.entries(this.data).forEach((([t,s])=>{document.cookie=t+"="+s.toString()+";"+e}))}parseCookie(){const t={};return document.cookie&&decodeURI(document.cookie).split(";").map((t=>t.split("="))).forEach((e=>{const s=e[0].trim(),i=e[1];this.schema.hasOwnProperty(s)&&(t[s]=this.schema[s](i))})),t}formatDate(t){return[t.getFullYear().toString(),(t.getMonth()+1).toString().padStart(2,"0"),t.getDate().toString().padStart(2,"0")].join("")}getDate(){return this.date}getStreak(){return this.data.streak}}class c{constructor(){this.words=[]}setWords(t){this.words=t.split("\n")}loadWords(){return void 0===this.wordsPromise&&(this.wordsPromise=new Promise((t=>{const e=new XMLHttpRequest;e.onreadystatechange=s=>{e.readyState===XMLHttpRequest.DONE&&200===e.status&&(this.setWords(e.responseText),t(this.words))},e.open("GET","five-letters.txt"),e.send()}))),this.wordsPromise}}class p extends HTMLElement{constructor(){var t;super(),this.gameData=new l(new Date),this.wordList=new c,this.container=document.createElement("div"),this.container.classList.add("container"),this.appendChild(this.container),this.winPopup=document.createElement("div"),this.winPopup.classList.add("overlay","hidden"),this.container.appendChild(this.winPopup),this.winPopup.onclick=()=>{this.winPopup.classList.add("hidden"),this.keyboard.disable()},this.winMessage=document.createElement("div"),this.winMessage.classList.add("winMessage"),this.winPopup.appendChild(this.winMessage),this.winMessageText=document.createElement("div"),this.winMessage.appendChild(this.winMessageText),this.winMessageShare=document.createElement("div"),this.winMessageShare.classList.add("share-result"),this.winMessageShare.innerText="Share!",this.winMessage.appendChild(this.winMessageShare),this.header=document.createElement("div"),this.header.classList.add("header"),this.container.appendChild(this.header),this.spacerLeft=document.createElement("div"),this.spacerLeft.classList.add("spacer-left"),this.header.appendChild(this.spacerLeft),this.spacerLeft.appendChild(this.createHeaderLink("home.svg",this.getDailyPuzzleLink(),{altText:"go to daily puzzle"})),this.spacerLeft.appendChild(this.createHeaderLink("dice-3.svg",this.getRandomPuzzleLink(),{altText:"go to random puzzle"})),this.titleText=document.createElement("div"),this.titleText.innerText="LAMARDLE",this.titleText.classList.add("title-text"),this.header.appendChild(this.titleText),this.spacerRight=document.createElement("div"),this.spacerRight.classList.add("spacer-right"),this.header.appendChild(this.spacerRight),this.spacerRight.appendChild(this.createHeaderLink("source.svg","https://github.com/ahaggart/lamardle",{newTab:!0,altText:"go to source code"}));const e=this.createHeaderIcon("help.svg",{altText:"show tutorial"});this.spacerRight.appendChild(e),this.urlSeed=new URL(document.location.href).searchParams.get("seed");const s=this.gameData.formatDate(this.gameData.getDate());this.seed=null!==(t=this.urlSeed)&&void 0!==t?t:s;const r={seed:this.seed,rows:7,letters:5,matches:3};this.tutorial=new o(this.gameData,r,this.getGridArea()),this.container.appendChild(this.tutorial),e.onclick=()=>this.tutorial.show(),this.grid=new h(r,{onWin:t=>this.winGame(t)}),this.container.append(this.grid),this.keyboard=new i(this.grid),this.container.append(this.keyboard),this.solver=new d,this.resizeGrid(),window.addEventListener("resize",(()=>this.resizeGrid())),this.wordList.loadWords().then((t=>this.grid.initialize(t))),document.addEventListener("keydown",(t=>{"Backspace"===t.key?this.keyboard.backspace():"Enter"===t.key?this.keyboard.submit():t.key.match(/^[a-z]$/)&&this.keyboard.appendLetter(t.key)}))}createHeaderLink(t,e,s={}){const i=document.createElement("a");return i.setAttribute("href",e),s.newTab&&i.setAttribute("target","_blank"),i.appendChild(this.createHeaderIcon(t,s)),i}createHeaderIcon(t,e={}){var s;const i=document.createElement("img");return i.setAttribute("src",t),i.setAttribute("width",25..toString()),i.setAttribute("height",25..toString()),e.altText&&i.setAttribute("alt",e.altText),(e.title||e.altText)&&i.setAttribute("title",null!==(s=e.title)&&void 0!==s?s:e.altText),i}getGridArea(){return{width:Math.min(500,window.innerWidth-20),height:window.innerHeight-184-50}}resizeGrid(){const t=this.grid.resize(this.getGridArea());this.grid.getContainer().style.marginBottom=t+"px"}computeMatching(t,e){const s=[];var i=t;for(let t=0;t<e.length;t++){const r=e[e.length-t-1],a=i.split("").map(((t,e)=>[t,r.charAt(e)])).map((([t,e])=>t===e));s.push(a),i=r}return s.reverse(),s}formatMatching(t,e,s){return t.map((t=>t.map((t=>t?e:s)).join("")))}createShareMessage(t,e){const s=this.formatMatching(this.computeMatching(t.solution,t.upper),"ðŸ”½","âº"),i=this.formatMatching(this.computeMatching(t.solution,t.lower),"ðŸ”¼","âº");return i.reverse(),Array.prototype.concat(["lamardle",e,this.grid.getNumGuesses().toString()+" tries"],s,[t.solution.split("").map((()=>"*ï¸âƒ£")).join("")],i).join("\n")}computePar(){const t=this.solver.solve(this.grid.getUpperStart(),this.grid.getLowerStart());return Math.max(1,t.length-2)}winGame(t){return e=this,s=void 0,r=function*(){const e=[];e.push("You won in "+this.grid.getNumGuesses()+" tries!"),yield this.solver.loadGraph(),e.push("Par: "+this.computePar()),this.seed===this.gameData.formatDate(this.gameData.getDate())&&(this.gameData.addStreak(),e.push("Current Streak: "+this.gameData.getStreak())),this.winPopup.classList.remove("hidden"),this.winMessageText.innerText=e.join("\n"),this.winMessageShare.onclick=e=>{e.stopPropagation();const s=this.createShareMessage(t,document.location.origin+"?seed="+this.seed),i="Failed to Share :(",r=this.winMessageShare.innerText;navigator.share?navigator.share({title:document.title,text:s}).catch((()=>this.winMessageShare.innerText=i)):navigator.clipboard?(navigator.clipboard.writeText(s),this.winMessageShare.innerText="Copied to clipboard!",window.setTimeout((()=>this.winMessageShare.innerText=r),3e3)):this.winMessageShare.innerText=i}},new((i=void 0)||(i=Promise))((function(t,a){function h(t){try{o(r.next(t))}catch(t){a(t)}}function n(t){try{o(r.throw(t))}catch(t){a(t)}}function o(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i((function(t){t(s)}))).then(h,n)}o((r=r.apply(e,s||[])).next())}));var e,s,i,r}getDailyPuzzleLink(){return"./"}getRandomPuzzleLink(){return"./?seed="+this.randomString()}randomString(){const t=[];for(let e=0;e<16;e++)t.push(Math.floor(10*Math.random()));return t.join("")}}customElements.define("lamardle-game",p)}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,s),a.exports}s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s(582)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQWlCeUwsS0M1VG5DOEUsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQjFJLElBQWpCMkksRUFDSCxPQUFPQSxFQUFhQyxRQUdyQixJQUFJQyxFQUFTTCxFQUF5QkUsR0FBWSxDQUdqREUsUUFBUyxJQU9WLE9BSEFFLEVBQW9CSixHQUFVRyxFQUFRQSxFQUFPRCxRQUFTSCxHQUcvQ0ksRUFBT0QsUUNwQmZILEVBQW9CTSxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSXhSLEtBQU93UixFQUNYUCxFQUFvQlEsRUFBRUQsRUFBWXhSLEtBQVNpUixFQUFvQlEsRUFBRUwsRUFBU3BSLElBQzVFOEssT0FBTzRHLGVBQWVOLEVBQVNwUixFQUFLLENBQUUyUixZQUFZLEVBQU1ySixJQUFLa0osRUFBV3hSLE1DSjNFaVIsRUFBb0JRLEVBQUksQ0FBQ0csRUFBS0MsSUFBVS9HLE9BQU8rRSxVQUFVckUsZUFBZXNHLEtBQUtGLEVBQUtDLEdDQ2xGWixFQUFvQmMsRUFBS1gsSUFDSCxvQkFBWFksUUFBMEJBLE9BQU9DLGFBQzFDbkgsT0FBTzRHLGVBQWVOLEVBQVNZLE9BQU9DLFlBQWEsQ0FBRXJJLE1BQU8sV0FFN0RrQixPQUFPNEcsZUFBZU4sRUFBUyxhQUFjLENBQUV4SCxPQUFPLEtDTHZELEVBQVEsTSIsInNvdXJjZXMiOlsid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0dhbWVLZXlib2FyZC50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9HcmlkTGV0dGVyLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0dyaWRSb3cudHMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvLi9zcmMvY29uc3RhbnRzLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0dhbWVHcmlkLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0dhbWVUdXRvcmlhbC50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS8uL3NyYy9HYW1lU29sdmVyLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0dhbWVEYXRhLnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL1dvcmRMaXN0LnRzIiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL0xhbWFyZGxlR2FtZS50cyIsIndlYnBhY2s6Ly9sYW1hcmRsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9sYW1hcmRsZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbGFtYXJkbGUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9sYW1hcmRsZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2xhbWFyZGxlLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVHcmlkIH0gZnJvbSAnLi9HYW1lR3JpZCc7XG5cbmV4cG9ydCBjbGFzcyBHYW1lS2V5Ym9hcmQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgcHJpdmF0ZSBncmlkOiBHYW1lR3JpZDtcbiAgICBwcml2YXRlIGxldHRlcnM6IHN0cmluZztcbiAgICBwcml2YXRlIGVuYWJsZWQ6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoZ3JpZDogR2FtZUdyaWQpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmdyaWQgPSBncmlkO1xuXG4gICAgICAgIHRoaXMubGV0dGVycyA9ICcnO1xuXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUubWFyZ2luID0gXCIwIDVweFwiO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVJvdygncXdlcnR5dWlvcCcpKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVSb3coJyBhc2RmZ2hqa2wgJykpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVJvdygnK3p4Y3Zibm0tJykpO1xuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBiYWNrc3BhY2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkIHx8IHRoaXMubGV0dGVycy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGV0dGVycyA9IHRoaXMubGV0dGVycy5zdWJzdHJpbmcoMCwgdGhpcy5sZXR0ZXJzLmxlbmd0aCAtIDEpO1xuICAgICAgICB0aGlzLmdyaWQuc2V0TGV0dGVycyh0aGlzLmxldHRlcnMpO1xuICAgIH1cblxuICAgIGFwcGVuZExldHRlcihsZXR0ZXI6IHN0cmluZykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCB8fCB0aGlzLmxldHRlcnMubGVuZ3RoID09IDUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxldHRlcnMgKz0gbGV0dGVyO1xuICAgICAgICB0aGlzLmdyaWQuc2V0TGV0dGVycyh0aGlzLmxldHRlcnMpO1xuICAgIH1cblxuICAgIHN1Ym1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCAmJiB0aGlzLmdyaWQuc3VibWl0KCkpIHtcbiAgICAgICAgICAgIHRoaXMubGV0dGVycyA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlUm93KGxldHRlcnM6IHN0cmluZykge1xuICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2dhbWUta2V5Ym9hcmQtcm93Jyk7XG4gICAgICAgIGZvciAobGV0IGxldHRlciBvZiBsZXR0ZXJzKSB7XG4gICAgICAgICAgICBpZiAobGV0dGVyID09PSAnICcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGFjZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBzcGFjZXIuY2xhc3NMaXN0LmFkZCgncG9pbnQtZml2ZScpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChzcGFjZXIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICcrJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgIGtleS5jbGFzc0xpc3QuYWRkKCdrZXknLCAnb25lLXBvaW50LWZpdmUnLCAnZW50ZXInKTtcbiAgICAgICAgICAgICAgICBrZXkuaW5uZXJUZXh0ID0gJ2VudGVyJztcbiAgICAgICAgICAgICAgICBrZXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoa2V5KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnLScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgICAgICBrZXkuY2xhc3NMaXN0LmFkZCgna2V5JywgJ29uZS1wb2ludC1maXZlJywgJ2RlbGV0ZScpO1xuICAgICAgICAgICAgICAgIGtleS5pbm5lclRleHQgPSAnZGVsJztcbiAgICAgICAgICAgICAgICBrZXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmJhY2tzcGFjZSgpKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoa2V5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAga2V5LmNsYXNzTGlzdC5hZGQoJ2tleScpO1xuICAgICAgICAgICAgICAgIGtleS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuYXBwZW5kTGV0dGVyKGxldHRlcikpO1xuICAgICAgICAgICAgICAgIGtleS5pbm5lclRleHQgPSBsZXR0ZXI7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcm93O1xuICAgIH1cblxuICAgIGRpc2FibGUoKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dhbWUta2V5Ym9hcmQnLCBHYW1lS2V5Ym9hcmQpO1xuIiwiZXhwb3J0IGNsYXNzIEdyaWRMZXR0ZXIgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgcG9zOiBudW1iZXI7XG4gICAgbGV0dGVyOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihsZXR0ZXI6IHN0cmluZyB8IHVuZGVmaW5lZCwgcG9zOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuc2V0TGV0dGVyKGxldHRlciB8fCAnJyk7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnbGV0dGVyJywgJ25vLW1hdGNoJyk7XG4gICAgfVxuXG4gICAgc2V0TGV0dGVyKGxldHRlcjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubGV0dGVyID0gbGV0dGVyO1xuICAgICAgICB0aGlzLmlubmVyVGV4dCA9IGxldHRlcjtcbiAgICB9XG5cbiAgICBzZXRNYXRjaChtYXRjaFVwcGVyOiBib29sZWFuLCBtYXRjaExvd2VyOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYm90aC1tYXRjaCcsICd1cHBlci1tYXRjaCcsICdsb3dlci1tYXRjaCcsICduby1tYXRjaCcpO1xuICAgICAgICBpZiAobWF0Y2hVcHBlciAmJiBtYXRjaExvd2VyKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2JvdGgtbWF0Y2gnKTtcbiAgICAgICAgfSBlbHNlIGlmIChtYXRjaExvd2VyKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2xvd2VyLW1hdGNoJyk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hVcHBlcikge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCd1cHBlci1tYXRjaCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCduby1tYXRjaCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0SGlnaGxpZ2h0KGlzSGlnaGxpZ2h0ZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5zdHlsZS5ib3JkZXJDb2xvciA9IGlzSGlnaGxpZ2h0ZWQgPyAndmFyKC0taGlnaGxpZ2h0LWNvbG9yKScgOiAndmFyKC0tbm9uLWhpZ2hsaWdodC1jb2xvciknO1xuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZ3JpZC1sZXR0ZXInLCBHcmlkTGV0dGVyKTtcbiIsImltcG9ydCB7IEdyaWRMZXR0ZXIgfSBmcm9tIFwiLi9HcmlkTGV0dGVyXCI7XG5pbXBvcnQgeyBJTlZBTElEX0FOSU1BVElPTl9MRU5HVEhfTVMgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuZXhwb3J0IHR5cGUgR3JpZFJvd0NvbmZpZyA9IHtcbiAgICBsZXR0ZXJzOiBudW1iZXI7XG4gICAgbWF0Y2hlczogbnVtYmVyO1xufTtcblxuZXhwb3J0IGNsYXNzIEdyaWRSb3cgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgcHJpdmF0ZSB0aWxlczogR3JpZExldHRlcltdID0gW107XG4gICAgcHJpdmF0ZSBsZXR0ZXJzOiBzdHJpbmcgPSAnJztcbiAgICBwcml2YXRlIGNvbmZpZzogR3JpZFJvd0NvbmZpZztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogR3JpZFJvd0NvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdncmlkLXJvdycpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWcubGV0dGVyczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB0aWxlID0gbmV3IEdyaWRMZXR0ZXIoJycsIGkpO1xuICAgICAgICAgICAgdGhpcy50aWxlcy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0TGV0dGVycyh0aGlzLmdldEF0dHJpYnV0ZShcImxldHRlcnNcIikpO1xuICAgIH1cblxuICAgIGdldExldHRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxldHRlcnM7XG4gICAgfVxuXG4gICAgc2V0TGV0dGVycyhsZXR0ZXJzOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5sZXR0ZXJzID0gbGV0dGVycyB8fCAnJztcbiAgICAgICAgY29uc3QgcGFkZGVkTGV0dGVycyA9IHRoaXMubGV0dGVyc1xuICAgICAgICAgICAgLnN1YnN0cmluZygwLCB0aGlzLmNvbmZpZy5sZXR0ZXJzKVxuICAgICAgICAgICAgLnBhZEVuZCh0aGlzLmNvbmZpZy5sZXR0ZXJzLCAnICcpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWcubGV0dGVyczsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVzW2ldLnNldExldHRlcihwYWRkZWRMZXR0ZXJzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZU1hdGNoZXModXBwZXI6IEdyaWRSb3csIGxvd2VyOiBHcmlkUm93KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50aWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50aWxlc1tpXS5zZXRNYXRjaChcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVzW2ldLmxldHRlciA9PT0gdXBwZXIudGlsZXNbaV0ubGV0dGVyLFxuICAgICAgICAgICAgICAgIHRoaXMudGlsZXNbaV0ubGV0dGVyID09PSBsb3dlci50aWxlc1tpXS5sZXR0ZXJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRIaWdobGlnaHQoaXNIaWdobGlnaHRlZDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLnRpbGVzLmZvckVhY2godGlsZSA9PiB0aWxlLnNldEhpZ2hsaWdodChpc0hpZ2hsaWdodGVkKSk7XG4gICAgfVxuXG4gICAgaXNDb21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGV0dGVycy5sZW5ndGggPT09IHRoaXMuY29uZmlnLmxldHRlcnM7XG4gICAgfVxuXG4gICAgZG9lc01hdGNoKG90aGVyOiBHcmlkUm93KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBsZXRlKCkgfHwgIW90aGVyLmlzQ29tcGxldGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1hdGNoQ291bnQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlnLmxldHRlcnM7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMubGV0dGVyc1tpXSA9PT0gb3RoZXIubGV0dGVyc1tpXSkge1xuICAgICAgICAgICAgICAgIG1hdGNoQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXRjaENvdW50IDwgdGhpcy5jb25maWcubWF0Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgd2lnZ2xlKCkge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnd2lnZ2xlJywgJycpO1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgnd2lnZ2xlJyksIElOVkFMSURfQU5JTUFUSU9OX0xFTkdUSF9NUyk7XG4gICAgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdncmlkLXJvdycsIEdyaWRSb3cpO1xuIiwiZXhwb3J0IGNvbnN0IFJFUVVJUkVEX01BVENIRVMgPSAzO1xuZXhwb3J0IGNvbnN0IEdSSURfUk9XX0dBUCA9IDU7XG5leHBvcnQgY29uc3QgR1JJRF9DT0xfR0FQID0gNTtcbmV4cG9ydCBjb25zdCBNQVhfV0lEVEggPSA1MDA7XG5leHBvcnQgY29uc3QgTlVNX1JPV1MgPSA3O1xuZXhwb3J0IGNvbnN0IE5VTV9MRVRURVJTID0gNTtcbmNvbnN0IEtFWV9IRUlHSFQgPSA1ODtcbmNvbnN0IEtFWV9NQVJHSU4gPSA1O1xuZXhwb3J0IGNvbnN0IEdSSURfUEFERElORyA9IDEwO1xuZXhwb3J0IGNvbnN0IEhFQURFUl9IRUlHSFQgPSA1MDtcbmV4cG9ydCBjb25zdCBJTlZBTElEX0FOSU1BVElPTl9MRU5HVEhfTVMgPSA0MDA7XG5leHBvcnQgY29uc3QgS0VZQk9BUkRfSEVJR0hUID0gS0VZX0hFSUdIVCAqIDMgKyBLRVlfTUFSR0lOICogMjtcbmV4cG9ydCBjb25zdCBHUklEX1BBRERJTkdfV0lEVEggPSBHUklEX1BBRERJTkcgKiAyO1xuZXhwb3J0IGNvbnN0IEhFQURFUl9JQ09OX1NJWkUgPSAyNTtcbmV4cG9ydCBjb25zdCBDT09LSUVfRVhQSVJBVElPTl9EQVlTID0gMztcbmV4cG9ydCBjb25zdCBVUF9BUlJPVyA9ICdcXHVEODNEXFx1REQzQyc7XG5leHBvcnQgY29uc3QgRE9XTl9BUlJPVyA9ICdcXHVEODNEXFx1REQzRCc7XG5leHBvcnQgY29uc3QgTk9fQVJST1cgPSAnXFx1MjNGQSc7XG5leHBvcnQgY29uc3QgU09MVVRJT05fTUFSS0VSID0gJ1xcdTAwMkFcXHVGRTBGXFx1MjBFMyc7XG4iLCJpbXBvcnQgeyBHUklEX1BBRERJTkcsIEdSSURfUk9XX0dBUCwgR1JJRF9DT0xfR0FQIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgR3JpZFJvdywgR3JpZFJvd0NvbmZpZyB9IGZyb20gXCIuL0dyaWRSb3dcIjtcblxuZXhwb3J0IHR5cGUgR2FtZUdyaWRDb25maWcgPSB7XG4gICAgc2VlZDogc3RyaW5nO1xuICAgIGxldHRlcnM6IG51bWJlcjtcbiAgICBtYXRjaGVzOiBudW1iZXI7XG4gICAgcm93czogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgR2FtZUdyaWRBcmVhID0ge1xuICAgIHdpZHRoOiBudW1iZXI7XG4gICAgaGVpZ2h0OiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBHcmlkU29sdXRpb24gPSB7XG4gICAgdXBwZXI6IHN0cmluZ1tdO1xuICAgIHNvbHV0aW9uOiBzdHJpbmc7XG4gICAgbG93ZXI6IHN0cmluZ1tdO1xufTtcblxudHlwZSBHYW1lR3JpZENhbGxiYWNrcyA9IHtcbiAgICBvbldpbj86IChzb2x1dGlvbjogR3JpZFNvbHV0aW9uKSA9PiB2b2lkO1xuICAgIG9uTG9hZD86IChncmlkOiBHYW1lR3JpZCkgPT4gdm9pZDtcbn07XG5cbnR5cGUgU3VibWl0T3B0aW9ucyA9IHtcbiAgICBjaGVja1dvcmRzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVHcmlkIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIHByaXZhdGUgY29uZmlnOiBHYW1lR3JpZENvbmZpZztcbiAgICBwcml2YXRlIGNhbGxiYWNrczogR2FtZUdyaWRDYWxsYmFja3M7XG4gICAgcHJpdmF0ZSByb3dDb25maWc6IEdyaWRSb3dDb25maWc7XG4gICAgcHJpdmF0ZSBudW1HdWVzc2VzOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB1cHBlck1hdGNoZXM6IHN0cmluZ1tdO1xuICAgIHByaXZhdGUgbG93ZXJNYXRjaGVzOiBzdHJpbmdbXTtcbiAgICBwcml2YXRlIGdyaWQ6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgd29yZHM6IHN0cmluZ1tdO1xuICAgIHByaXZhdGUgdXBwZXI6IEdyaWRSb3c7XG4gICAgcHJpdmF0ZSB1cHBlclN0YXJ0OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBsb3dlcjogR3JpZFJvdztcbiAgICBwcml2YXRlIGxvd2VyU3RhcnQ6IHN0cmluZztcbiAgICBwcml2YXRlIGN1cnJlbnQ6IEdyaWRSb3c7XG4gICAgd2lkdGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogR2FtZUdyaWRDb25maWcsIGNhbGxiYWNrczogR2FtZUdyaWRDYWxsYmFja3MgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcblxuICAgICAgICB0aGlzLnJvd0NvbmZpZyA9IHtcbiAgICAgICAgICAgIGxldHRlcnM6IHRoaXMuY29uZmlnLmxldHRlcnMsXG4gICAgICAgICAgICBtYXRjaGVzOiB0aGlzLmNvbmZpZy5tYXRjaGVzLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubnVtR3Vlc3NlcyA9IDA7XG4gICAgICAgIHRoaXMudXBwZXJNYXRjaGVzID0gW107XG4gICAgICAgIHRoaXMubG93ZXJNYXRjaGVzID0gW107XG5cbiAgICAgICAgdGhpcy5pZCA9ICdnYW1lLWdyaWQnO1xuICAgICAgICB0aGlzLmdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5ncmlkLmNsYXNzTGlzdC5hZGQoJ2dyaWQnKTtcbiAgICAgICAgdGhpcy5ncmlkLmlkID0gJ2dyaWQnO1xuICAgICAgICB0aGlzLmdyaWQuc3R5bGUuc2V0UHJvcGVydHkoJy0tbnVtLXJvd3MnLCB0aGlzLmNvbmZpZy5yb3dzLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMuZ3JpZCk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSb3dzKCk7XG4gICAgfVxuXG4gICAgZ2V0UmFuZG9tV29yZChzZWVkOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29yZHNbTWF0aC5hYnModGhpcy5nZXRIYXNoQ29kZShzZWVkKSkgJSB0aGlzLndvcmRzLmxlbmd0aF07XG4gICAgfVxuXG4gICAgY3JlYXRlUm93cygpIHtcbiAgICAgICAgdGhpcy51cHBlciA9IG5ldyBHcmlkUm93KHRoaXMucm93Q29uZmlnKTtcbiAgICAgICAgdGhpcy5sb3dlciA9IG5ldyBHcmlkUm93KHRoaXMucm93Q29uZmlnKTtcbiAgICAgICAgdGhpcy5sb3dlci5pZCA9ICdnb2FsJztcblxuICAgICAgICB0aGlzLmN1cnJlbnQgPSBuZXcgR3JpZFJvdyh0aGlzLnJvd0NvbmZpZyk7XG4gICAgICAgIHRoaXMuY3VycmVudC5zZXRIaWdobGlnaHQodHJ1ZSk7XG5cbiAgICAgICAgY29uc3Qgcm93c0Fib3ZlID0gTWF0aC5jZWlsKCh0aGlzLmNvbmZpZy5yb3dzIC0gMykgLyAyLjApO1xuICAgICAgICBjb25zdCByb3dzQmVsb3cgPSBNYXRoLmZsb29yKCh0aGlzLmNvbmZpZy5yb3dzIC0gMykgLyAyLjApO1xuXG4gICAgICAgIEFycmF5KHJvd3NBYm92ZSkuZmlsbCgwKVxuICAgICAgICAgICAgLmZvckVhY2goKCkgPT4gdGhpcy5ncmlkLmFwcGVuZENoaWxkKG5ldyBHcmlkUm93KHRoaXMucm93Q29uZmlnKSkpO1xuICAgICAgICB0aGlzLmdyaWQuYXBwZW5kQ2hpbGQodGhpcy51cHBlcik7XG4gICAgICAgIHRoaXMuZ3JpZC5hcHBlbmRDaGlsZCh0aGlzLmN1cnJlbnQpO1xuICAgICAgICB0aGlzLmdyaWQuYXBwZW5kQ2hpbGQodGhpcy5sb3dlcik7XG4gICAgICAgIEFycmF5KHJvd3NCZWxvdykuZmlsbCgwKVxuICAgICAgICAgICAgLmZvckVhY2goKCkgPT4gdGhpcy5ncmlkLmFwcGVuZENoaWxkKG5ldyBHcmlkUm93KHRoaXMucm93Q29uZmlnKSkpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUod29yZHM6IHN0cmluZ1tdKSB7XG4gICAgICAgIHRoaXMud29yZHMgPSB3b3JkcztcbiAgICAgICAgdGhpcy51cHBlclN0YXJ0ID0gdGhpcy5nZXRSYW5kb21Xb3JkKHRoaXMuY29uZmlnLnNlZWQpO1xuICAgICAgICB0aGlzLnVwcGVyLnNldExldHRlcnModGhpcy51cHBlclN0YXJ0KTtcbiAgICAgICAgdGhpcy5sb3dlclN0YXJ0ID0gdGhpcy5nZXRSYW5kb21Xb3JkKHRoaXMuY29uZmlnLnNlZWQgKyAnc2FsdCcpO1xuICAgICAgICB0aGlzLmxvd2VyLnNldExldHRlcnModGhpcy5sb3dlclN0YXJ0KTtcbiAgICB9XG5cbiAgICBzZXRMZXR0ZXJzKGxldHRlcnM6IHN0cmluZykge1xuICAgICAgICB0aGlzLmN1cnJlbnQuc2V0TGV0dGVycyhsZXR0ZXJzKTtcbiAgICAgICAgdGhpcy5jdXJyZW50LnVwZGF0ZU1hdGNoZXModGhpcy51cHBlciwgdGhpcy5sb3dlcik7XG4gICAgfVxuXG4gICAgZ2V0VGlsZVNpemUoZ3JpZEFyZWE6IEdhbWVHcmlkQXJlYSkge1xuICAgICAgICBjb25zdCBjb2x1bW5HYXBXaWR0aCA9IEdSSURfQ09MX0dBUCAqICh0aGlzLmNvbmZpZy5sZXR0ZXJzIC0gMSk7XG4gICAgICAgIGNvbnN0IG1heFRpbGVXaWR0aCA9IE1hdGguZmxvb3IoKGdyaWRBcmVhLndpZHRoIC0gY29sdW1uR2FwV2lkdGgpIC8gdGhpcy5jb25maWcubGV0dGVycyk7XG5cbiAgICAgICAgY29uc3QgZ3JpZFBhZGRpbmdIZWlnaHQgPSBHUklEX1BBRERJTkcgKiAyO1xuICAgICAgICBjb25zdCByb3dHYXBIZWlnaHQgPSBHUklEX1JPV19HQVAgKiAodGhpcy5jb25maWcucm93cyAtIDEpO1xuICAgICAgICBjb25zdCBtYXhUaWxlSGVpZ2h0ID0gTWF0aC5mbG9vcigoZ3JpZEFyZWEuaGVpZ2h0IC0gcm93R2FwSGVpZ2h0IC0gZ3JpZFBhZGRpbmdIZWlnaHQpIC8gdGhpcy5jb25maWcucm93cyk7XG5cbiAgICAgICAgcmV0dXJuIE1hdGgubWluKG1heFRpbGVXaWR0aCwgbWF4VGlsZUhlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3dpZHRoLCBoZWlnaHR9IHNpemVcbiAgICAgKiBAcmV0dXJucyBhbW91bnQgb2YgXCJsZWZ0b3ZlclwiIHNwYWNlIHVuZGVyIHRoZSBncmlkXG4gICAgICovXG4gICAgcmVzaXplKHNpemU6IEdhbWVHcmlkQXJlYSkge1xuICAgICAgICBjb25zdCBjb2x1bW5HYXBXaWR0aCA9IEdSSURfUk9XX0dBUCAqICh0aGlzLmNvbmZpZy5sZXR0ZXJzIC0gMSk7XG4gICAgICAgIGNvbnN0IHJvd0dhcEhlaWdodCA9IEdSSURfUk9XX0dBUCAqICh0aGlzLmNvbmZpZy5yb3dzIC0gMSk7XG4gICAgICAgIGNvbnN0IHRpbGVTaXplID0gdGhpcy5nZXRUaWxlU2l6ZShzaXplKTtcbiAgICAgICAgY29uc3QgZ3JpZFdpZHRoID0gdGlsZVNpemUgKiB0aGlzLmNvbmZpZy5sZXR0ZXJzICsgY29sdW1uR2FwV2lkdGg7XG4gICAgICAgIGNvbnN0IGdyaWRIZWlnaHQgPSB0aWxlU2l6ZSAqIHRoaXMuY29uZmlnLnJvd3MgKyByb3dHYXBIZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5ncmlkLnN0eWxlLndpZHRoID0gZ3JpZFdpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5ncmlkLnN0eWxlLmhlaWdodCA9IGdyaWRIZWlnaHQgKyAncHgnO1xuICAgICAgICByZXR1cm4gKHNpemUuaGVpZ2h0IC0gZ3JpZEhlaWdodCAtIDEwKTtcbiAgICB9XG5cbiAgICBzdWJtaXQoe1xuICAgICAgICBjaGVja1dvcmRzID0gdHJ1ZVxuICAgIH06IFN1Ym1pdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudC5pc0NvbXBsZXRlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudC53aWdnbGUoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGVja1dvcmRzICYmICF0aGlzLndvcmRzLmluY2x1ZGVzKHRoaXMuY3VycmVudC5nZXRMZXR0ZXJzKCkpKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQud2lnZ2xlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cHBlck1hdGNoID0gdGhpcy5jdXJyZW50LmRvZXNNYXRjaCh0aGlzLnVwcGVyKTtcbiAgICAgICAgY29uc3QgbG93ZXJNYXRjaCA9IHRoaXMuY3VycmVudC5kb2VzTWF0Y2godGhpcy5sb3dlcik7XG5cbiAgICAgICAgaWYgKCF1cHBlck1hdGNoICYmICFsb3dlck1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQud2lnZ2xlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm51bUd1ZXNzZXMrKztcblxuICAgICAgICBpZiAodXBwZXJNYXRjaCAmJiBsb3dlck1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLnVwcGVyTWF0Y2hlcy5wdXNoKHRoaXMudXBwZXIuZ2V0TGV0dGVycygpKTtcbiAgICAgICAgICAgIHRoaXMubG93ZXJNYXRjaGVzLnB1c2godGhpcy5sb3dlci5nZXRMZXR0ZXJzKCkpO1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3Mub25XaW4oe1xuICAgICAgICAgICAgICAgIHVwcGVyOiB0aGlzLnVwcGVyTWF0Y2hlcyxcbiAgICAgICAgICAgICAgICBzb2x1dGlvbjogdGhpcy5jdXJyZW50LmdldExldHRlcnMoKSxcbiAgICAgICAgICAgICAgICBsb3dlcjogdGhpcy5sb3dlck1hdGNoZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3Um93ID0gbmV3IEdyaWRSb3codGhpcy5yb3dDb25maWcpO1xuICAgICAgICBuZXdSb3cuc2V0SGlnaGxpZ2h0KHRydWUpO1xuICAgICAgICB0aGlzLmN1cnJlbnQuc2V0SGlnaGxpZ2h0KGZhbHNlKTtcblxuICAgICAgICBpZiAodXBwZXJNYXRjaCkge1xuICAgICAgICAgICAgdGhpcy51cHBlck1hdGNoZXMucHVzaCh0aGlzLnVwcGVyLmdldExldHRlcnMoKSk7XG4gICAgICAgICAgICB0aGlzLmdyaWQuY2hpbGRyZW5bMF0ucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnVwcGVyID0gdGhpcy5jdXJyZW50O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gbmV3Um93O1xuICAgICAgICAgICAgdGhpcy5ncmlkLmluc2VydEJlZm9yZSh0aGlzLmN1cnJlbnQsIHRoaXMubG93ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb3dlck1hdGNoZXMucHVzaCh0aGlzLmxvd2VyLmdldExldHRlcnMoKSk7XG4gICAgICAgICAgICB0aGlzLmdyaWQuY2hpbGRyZW5bdGhpcy5ncmlkLmNoaWxkcmVuLmxlbmd0aCAtIDFdLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5sb3dlciA9IHRoaXMuY3VycmVudDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IG5ld1JvdztcbiAgICAgICAgICAgIHRoaXMuZ3JpZC5pbnNlcnRCZWZvcmUodGhpcy5jdXJyZW50LCB0aGlzLmxvd2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldEhhc2hDb2RlKHN0cjogc3RyaW5nKSB7XG4gICAgICAgIHZhciBoYXNoID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjb2RlO1xuICAgICAgICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzaDtcbiAgICB9XG5cbiAgICBnZXRVcHBlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBwZXI7XG4gICAgfVxuXG4gICAgZ2V0TG93ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvd2VyO1xuICAgIH1cblxuICAgIGdldENvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZDtcbiAgICB9XG5cbiAgICBnZXROdW1HdWVzc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udW1HdWVzc2VzO1xuICAgIH1cblxuICAgIGdldFVwcGVyU3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwcGVyU3RhcnQ7XG4gICAgfVxuXG4gICAgZ2V0TG93ZXJTdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG93ZXJTdGFydDtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dhbWUtZ3JpZCcsIEdhbWVHcmlkKTtcbiIsImltcG9ydCB7IEdhbWVEYXRhIH0gZnJvbSBcIi4vR2FtZURhdGFcIjtcbmltcG9ydCB7IEdhbWVHcmlkLCBHYW1lR3JpZENvbmZpZywgR2FtZUdyaWRBcmVhIH0gZnJvbSAnLi9HYW1lR3JpZCc7XG5cbmZ1bmN0aW9uIHBhcmFncmFwaCh0ZXh0OiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgZWxlbS5pbm5lclRleHQgPSB0ZXh0LmpvaW4oJyAnKTtcbiAgICByZXR1cm4gZWxlbTtcbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVUdXRvcmlhbCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBvdmVybGF5OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHRleHRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBnYW1lRGF0YTogR2FtZURhdGEsIFxuICAgICAgICBncmlkQ29uZmlnOiBHYW1lR3JpZENvbmZpZywgXG4gICAgICAgIGdyaWRBcmVhOiBHYW1lR3JpZEFyZWFcbiAgICApIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknLCAndHV0b3JpYWwnLCAnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcblxuICAgICAgICB0aGlzLnRleHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy50ZXh0Q29udGFpbmVyLnN0eWxlLndpZHRoID0gZ3JpZEFyZWEud2lkdGggKyAncHgnO1xuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuc3R5bGUubWFyZ2luID0gJ2F1dG8nO1xuICAgICAgICB0aGlzLm92ZXJsYXkuYXBwZW5kQ2hpbGQodGhpcy50ZXh0Q29udGFpbmVyKTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0dXRvcmlhbC10aXRsZScpO1xuICAgICAgICB0aXRsZS5pbm5lclRleHQgPSAnSG93IHRvIFBsYXknO1xuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIHRoaXMudGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChwYXJhZ3JhcGgoW1xuICAgICAgICAgICAgJ1RoZSBnb2FsIG9mIExBTUFSRExFIGlzIHRvIGZpbmQgd29yZHMgd2hpY2ggXCJtYXRjaFwiIHRoZSB3b3JkcycsXG4gICAgICAgICAgICAnYWJvdmUgb3IgYmVsb3cgdGhlbS4gVHdvIHdvcmRzIFwibWF0Y2hcIiB3aGVuIHRoZXkgc2hhcmUgMyBvciBtb3JlJyxcbiAgICAgICAgICAgICdsZXR0ZXJzIGluIHRoZSBzYW1lIHBvc2l0aW9uLidcbiAgICAgICAgXSkpO1xuXG4gICAgICAgIGNvbnN0IGV4YW1wbGUxID0gbmV3IEdhbWVHcmlkKHsgLi4uZ3JpZENvbmZpZywgcm93czogMyB9KTtcbiAgICAgICAgZXhhbXBsZTEucmVzaXplKHsgd2lkdGg6IGdyaWRBcmVhLndpZHRoLCBoZWlnaHQ6IDIwMCB9KTtcbiAgICAgICAgZXhhbXBsZTEuZ2V0VXBwZXIoKS5zZXRMZXR0ZXJzKCdoZWxsbycpO1xuICAgICAgICBleGFtcGxlMS5nZXRMb3dlcigpLnNldExldHRlcnMoJ3dvcmxkJyk7XG5cbiAgICAgICAgdGhpcy50ZXh0Q29udGFpbmVyLmFwcGVuZENoaWxkKGV4YW1wbGUxKTtcblxuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQocGFyYWdyYXBoKFtcbiAgICAgICAgICAgICdXaGVuIHlvdSBlbnRlciBhIHdvcmQgdGhhdCBtYXRjaGVzIHRoZSB3b3JkIGFib3ZlIG9yIGJlbG93LCBpdCcsXG4gICAgICAgICAgICAnd2lsbCByZXBsYWNlIHRoYXQgd29yZC4gSWYgdGhlIHdvcmQgbWF0Y2hlcyBib3RoIHdvcmRzLCB5b3Ugd2luISdcbiAgICAgICAgXSkpO1xuXG4gICAgICAgIGNvbnN0IGV4YW1wbGUyID0gbmV3IEdhbWVHcmlkKHsgLi4uZ3JpZENvbmZpZywgcm93czogMyB9KTtcbiAgICAgICAgZXhhbXBsZTIucmVzaXplKHsgd2lkdGg6IGdyaWRBcmVhLndpZHRoLCBoZWlnaHQ6IDIwMCB9KTtcbiAgICAgICAgZXhhbXBsZTIuZ2V0VXBwZXIoKS5zZXRMZXR0ZXJzKCdoZWxsbycpO1xuICAgICAgICBleGFtcGxlMi5nZXRMb3dlcigpLnNldExldHRlcnMoJ3dvcmxkJyk7XG4gICAgICAgIGV4YW1wbGUyLnNldExldHRlcnMoJ3dvdWxkJyk7XG5cbiAgICAgICAgdGhpcy50ZXh0Q29udGFpbmVyLmFwcGVuZENoaWxkKGV4YW1wbGUyKTtcblxuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQocGFyYWdyYXBoKFtcbiAgICAgICAgICAgICdJbiB0aGUgZXhhbXBsZSBhYm92ZSwgdGhlIG1pZGRsZSB3b3JkIFwid291bGRcIiBtYXRjaGVzIFwid1wiLCBcIm9cIiwnLFxuICAgICAgICAgICAgJ1wibFwiLCBhbmQgXCJkXCIgZnJvbSBcIndvcmxkXCIuIEl0IGFsc28gbWF0Y2hlcyBcImxcIiBmcm9tIFwiaGVsbG9cIi4gV2hlbicsXG4gICAgICAgICAgICAnZW50ZXJlZCwgdGhlIGxvd2VyIHdvcmQgXCJ3b3JsZFwiIGlzIHJlcGxhY2VkIHdpdGggXCJ3b3VsZFwiLCBzbyB0aGUnLFxuICAgICAgICAgICAgJ25leHQgd29yZCBzaG91bGQgbWF0Y2ggZWl0aGVyIFwiaGVsbG9cIiBvciBcIndvdWxkXCIuJ1xuICAgICAgICBdKSk7XG5cbiAgICAgICAgY29uc3QgZXhhbXBsZTMgPSBuZXcgR2FtZUdyaWQoeyAuLi5ncmlkQ29uZmlnLCByb3dzOiAzIH0pO1xuICAgICAgICBleGFtcGxlMy5yZXNpemUoeyB3aWR0aDogZ3JpZEFyZWEud2lkdGgsIGhlaWdodDogMjAwIH0pO1xuICAgICAgICBleGFtcGxlMy5nZXRVcHBlcigpLnNldExldHRlcnMoJ2hlbGxvJyk7XG4gICAgICAgIGV4YW1wbGUzLmdldExvd2VyKCkuc2V0TGV0dGVycygnd29ybGQnKTtcbiAgICAgICAgZXhhbXBsZTMuc2V0TGV0dGVycygnd291bGQnKTtcbiAgICAgICAgZXhhbXBsZTMuc3VibWl0KHsgY2hlY2tXb3JkczogZmFsc2UgfSk7XG5cbiAgICAgICAgdGhpcy50ZXh0Q29udGFpbmVyLmFwcGVuZENoaWxkKGV4YW1wbGUzKTtcblxuICAgICAgICB0aGlzLnRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQocGFyYWdyYXBoKFtcbiAgICAgICAgICAgICdUYXAgYW55d2hlcmUgdG8gY29udGludWUuIEhhcHB5IE1vdGhlclxcJ3MgRGF5ISdcbiAgICAgICAgXSkpO1xuXG4gICAgICAgIGlmICghZ2FtZURhdGEuaGFzVmlzaXRlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm92ZXJsYXkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgZ2FtZURhdGEuc2V0VmlzaXRlZCgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHNob3coKSB7XG4gICAgICAgIHRoaXMub3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLm92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdnYW1lLXR1dG9yaWFsJywgR2FtZVR1dG9yaWFsKTtcbiIsInR5cGUgV29yZEdyYXBoID0ge1xuICAgIFt3b3JkOiBzdHJpbmddOiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBjbGFzcyBHYW1lU29sdmVyIHtcbiAgICBncmFwaDogV29yZEdyYXBoO1xuICAgIHByaXZhdGUgb25Mb2FkOiBQcm9taXNlPEdhbWVTb2x2ZXI+IHwgdW5kZWZpbmVkO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgc29sdmUoc3RhcnQ6IHN0cmluZywgZW5kOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IHBhdGhzID0gbmV3IE1hcCgpO1xuICAgICAgICBwYXRocy5zZXQoc3RhcnQsIG51bGwpO1xuICAgICAgICB2YXIgdmlzaXRpbmcgPSBbc3RhcnRdO1xuICAgICAgICB2YXIgdG9WaXNpdDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgd2hpbGUgKHZpc2l0aW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSB2aXNpdGluZy5wb3AoKTtcbiAgICAgICAgICAgIHZhciBkb25lID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmdyYXBoW2N1cnJlbnRdLmZvckVhY2god29yZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXRocy5oYXMod29yZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aHMuc2V0KHdvcmQsIGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0b1Zpc2l0LnB1c2god29yZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3b3JkID09PSBlbmQpXG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZpc2l0aW5nLmxlbmd0aCA9PT0gMCAmJiB0b1Zpc2l0Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHZpc2l0aW5nID0gdG9WaXNpdDtcbiAgICAgICAgICAgICAgICB0b1Zpc2l0ID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXRoID0gW2VuZF07XG4gICAgICAgIHZhciBjdXJyZW50ID0gZW5kO1xuICAgICAgICBpZiAocGF0aHMuaGFzKGVuZCkpIHtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSBzdGFydCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBwYXRocy5nZXQoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgcGF0aC5wdXNoKGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbG9hZEdyYXBoKCk6IFByb21pc2U8R2FtZVNvbHZlcj4ge1xuICAgICAgICBpZiAodGhpcy5vbkxvYWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vbkxvYWQgPSBuZXcgUHJvbWlzZTxHYW1lU29sdmVyPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGggPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsICdncmFwaC5qc29uJyk7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLm9uTG9hZDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDT09LSUVfRVhQSVJBVElPTl9EQVlTIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbnR5cGUgUGVyc2lzdGVkRGF0YSA9IHtcbiAgICB2aXNpdGVkOiBib29sZWFuO1xuICAgIHN0cmVhazogbnVtYmVyO1xuICAgIG1vc3RSZWNlbnQ6IHN0cmluZztcbn1cblxudHlwZSBDb29raWVEYXRhID0ge1xuICAgIFtuYW1lOiBzdHJpbmddOiBhbnk7XG59O1xuXG50eXBlIENvb2tpZVBhcnNlciA9IHtcbiAgICBbbmFtZTogc3RyaW5nXTogKHZhbHVlOiBzdHJpbmcpID0+IGFueVxufTtcblxuZXhwb3J0IGNsYXNzIEdhbWVEYXRhIHtcbiAgICBwcml2YXRlIGRhdGU6IERhdGU7XG4gICAgcHJpdmF0ZSBkYXRhOiBQZXJzaXN0ZWREYXRhO1xuICAgIHByaXZhdGUgc2NoZW1hOiBDb29raWVQYXJzZXIgPSB7XG4gICAgICAgIHZpc2l0ZWQ6ICh2YWx1ZSkgPT4gdmFsdWUgPT09ICd0cnVlJyxcbiAgICAgICAgc3RyZWFrOiAodmFsdWUpID0+IHBhcnNlSW50KHZhbHVlKSxcbiAgICAgICAgbW9zdFJlY2VudDogKHZhbHVlKSA9PiB2YWx1ZSxcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IoZGF0ZTogRGF0ZSkge1xuICAgICAgICB0aGlzLmRhdGUgPSBkYXRlO1xuICAgICAgICBjb25zdCBjb29raWVEYXRhID0gdGhpcy5wYXJzZUNvb2tpZSgpO1xuXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcbiAgICAgICAgICAgIHZpc2l0ZWQ6IGNvb2tpZURhdGEudmlzaXRlZCA/PyBmYWxzZSxcbiAgICAgICAgICAgIHN0cmVhazogY29va2llRGF0YS5zdHJlYWsgPz8gMCxcbiAgICAgICAgICAgIG1vc3RSZWNlbnQ6IGNvb2tpZURhdGEubW9zdFJlY2VudCA/PyAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNoZWNrU3RyZWFrKCk7XG4gICAgfVxuXG4gICAgc2V0VmlzaXRlZCgpIHtcbiAgICAgICAgdGhpcy5kYXRhLnZpc2l0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNhdmVEYXRhKCk7XG4gICAgfVxuXG4gICAgaGFzVmlzaXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS52aXNpdGVkO1xuICAgIH1cblxuICAgIGNoZWNrU3RyZWFrKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhLm1vc3RSZWNlbnQgPT09IHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXlCZWZvcmUgPSBuZXcgRGF0ZSh0aGlzLmRhdGUpO1xuICAgICAgICBkYXlCZWZvcmUuc2V0RGF0ZSh0aGlzLmRhdGUuZ2V0RGF0ZSgpIC0gMSk7XG5cbiAgICAgICAgaWYgKHRoaXMuZGF0YS5tb3N0UmVjZW50ICE9PSB0aGlzLmZvcm1hdERhdGUoZGF5QmVmb3JlKSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhLnN0cmVhayA9IDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRTdHJlYWsoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEubW9zdFJlY2VudCA9PT0gdGhpcy5mb3JtYXREYXRlKHRoaXMuZGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGF0YS5zdHJlYWsrKztcbiAgICAgICAgdGhpcy5kYXRhLm1vc3RSZWNlbnQgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlKTtcbiAgICAgICAgdGhpcy5zYXZlRGF0YSgpO1xuICAgIH1cblxuICAgIHNhdmVEYXRhKCkge1xuICAgICAgICBjb25zdCBjb29raWVFeHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvb2tpZUV4cGlyYXRpb25EYXRlLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgKyBDT09LSUVfRVhQSVJBVElPTl9EQVlTKTtcbiAgICAgICAgY29uc3QgZXhwaXJhdGlvblN0cmluZyA9ICdleHBpcmVzPScgKyBjb29raWVFeHBpcmF0aW9uRGF0ZS50b1VUQ1N0cmluZygpO1xuICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLmRhdGEpLmZvckVhY2goKFtuYW1lLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPScgKyB2YWx1ZS50b1N0cmluZygpICsgJzsnICsgZXhwaXJhdGlvblN0cmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcGFyc2VDb29raWUoKTogQ29va2llRGF0YSB7XG4gICAgICAgIGNvbnN0IGRhdGE6IENvb2tpZURhdGEgPSB7fTtcbiAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZSkge1xuICAgICAgICAgICAgZGVjb2RlVVJJKGRvY3VtZW50LmNvb2tpZSlcbiAgICAgICAgICAgICAgICAuc3BsaXQoJzsnKVxuICAgICAgICAgICAgICAgIC5tYXAoZW50cnkgPT4gZW50cnkuc3BsaXQoXCI9XCIpKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGtleVZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0ga2V5VmFsdWVbMF0udHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGtleVZhbHVlWzFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zY2hlbWEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtrZXldID0gdGhpcy5zY2hlbWFba2V5XSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBmb3JtYXREYXRlKGRhdGU6IERhdGUpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpLFxuICAgICAgICAgICAgKGRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgICAgIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgXS5qb2luKCcnKTtcbiAgICB9XG5cbiAgICBnZXREYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlO1xuICAgIH1cblxuICAgIGdldFN0cmVhaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zdHJlYWs7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFdvcmRMaXN0IHtcbiAgICBwcml2YXRlIHdvcmRzOiBzdHJpbmdbXTtcbiAgICBwcml2YXRlIHdvcmRzUHJvbWlzZTogUHJvbWlzZTxzdHJpbmdbXT4gfCB1bmRlZmluZWQ7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy53b3JkcyA9IFtdO1xuICAgIH1cblxuICAgIHNldFdvcmRzKHJhd1dvcmRzOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy53b3JkcyA9IHJhd1dvcmRzLnNwbGl0KCdcXG4nKTtcbiAgICB9XG5cbiAgICBsb2FkV29yZHMoKSB7XG4gICAgICAgIGlmICh0aGlzLndvcmRzUHJvbWlzZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLndvcmRzUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V29yZHMocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy53b3Jkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgJ2ZpdmUtbGV0dGVycy50eHQnKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndvcmRzUHJvbWlzZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIRUFERVJfSUNPTl9TSVpFLCBNQVhfV0lEVEgsIEdSSURfUEFERElOR19XSURUSCwgS0VZQk9BUkRfSEVJR0hULCBIRUFERVJfSEVJR0hULCBET1dOX0FSUk9XLCBOT19BUlJPVywgVVBfQVJST1csIFNPTFVUSU9OX01BUktFUiwgTlVNX0xFVFRFUlMsIFJFUVVJUkVEX01BVENIRVMsIE5VTV9ST1dTIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgR2FtZUtleWJvYXJkIH0gZnJvbSBcIi4vR2FtZUtleWJvYXJkXCI7XG5pbXBvcnQgeyBHYW1lR3JpZCwgR3JpZFNvbHV0aW9uIH0gZnJvbSAnLi9HYW1lR3JpZCc7XG5pbXBvcnQgeyBHYW1lVHV0b3JpYWwgfSBmcm9tIFwiLi9HYW1lVHV0b3JpYWxcIjtcbmltcG9ydCB7IEdhbWVTb2x2ZXIgfSBmcm9tIFwiLi9HYW1lU29sdmVyXCI7XG5pbXBvcnQgeyBHYW1lRGF0YSB9IGZyb20gXCIuL0dhbWVEYXRhXCI7XG5pbXBvcnQgeyBXb3JkTGlzdCB9IGZyb20gXCIuL1dvcmRMaXN0XCI7XG5cbnR5cGUgSGVhZGVySWNvbk9wdGlvbnMgPSB7XG4gICAgYWx0VGV4dD86IHN0cmluZztcbiAgICB0aXRsZT86IHN0cmluZztcbn07XG5cbnR5cGUgSGVhZGVyTGlua09wdGlvbnMgPSBIZWFkZXJJY29uT3B0aW9ucyAmIHtcbiAgICBuZXdUYWI/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgTGFtYXJkbGVHYW1lIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIHByaXZhdGUgZ2FtZURhdGE6IEdhbWVEYXRhO1xuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHdpblBvcHVwOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIGtleWJvYXJkOiBhbnk7XG4gICAgcHJpdmF0ZSB3aW5NZXNzYWdlOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHdpbk1lc3NhZ2VUZXh0OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHdpbk1lc3NhZ2VTaGFyZTogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBoZWFkZXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgc3BhY2VyTGVmdDogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0aXRsZVRleHQ6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgc3BhY2VyUmlnaHQ6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgdXJsU2VlZDogc3RyaW5nO1xuICAgIHByaXZhdGUgc2VlZDogYW55O1xuICAgIHByaXZhdGUgdHV0b3JpYWw6IEdhbWVUdXRvcmlhbDtcbiAgICBwcml2YXRlIGdyaWQ6IEdhbWVHcmlkO1xuICAgIHByaXZhdGUgc29sdmVyOiBHYW1lU29sdmVyO1xuICAgIHByaXZhdGUgd29yZExpc3Q6IFdvcmRMaXN0O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IG5ldyBHYW1lRGF0YShuZXcgRGF0ZSgpKTtcbiAgICAgICAgdGhpcy53b3JkTGlzdCA9IG5ldyBXb3JkTGlzdCgpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcblxuICAgICAgICB0aGlzLndpblBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMud2luUG9wdXAuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScsICdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy53aW5Qb3B1cCk7XG4gICAgICAgIHRoaXMud2luUG9wdXAub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2luUG9wdXAuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkLmRpc2FibGUoKTtcbiAgICAgICAgICAgIC8vIHRoaXMua2V5Ym9hcmQuaGlkZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMud2luTWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLndpbk1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnd2luTWVzc2FnZScpO1xuICAgICAgICB0aGlzLndpblBvcHVwLmFwcGVuZENoaWxkKHRoaXMud2luTWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy53aW5NZXNzYWdlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLndpbk1lc3NhZ2UuYXBwZW5kQ2hpbGQodGhpcy53aW5NZXNzYWdlVGV4dCk7XG5cbiAgICAgICAgdGhpcy53aW5NZXNzYWdlU2hhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy53aW5NZXNzYWdlU2hhcmUuY2xhc3NMaXN0LmFkZCgnc2hhcmUtcmVzdWx0Jyk7XG4gICAgICAgIHRoaXMud2luTWVzc2FnZVNoYXJlLmlubmVyVGV4dCA9ICdTaGFyZSEnO1xuICAgICAgICB0aGlzLndpbk1lc3NhZ2UuYXBwZW5kQ2hpbGQodGhpcy53aW5NZXNzYWdlU2hhcmUpO1xuXG4gICAgICAgIHRoaXMuaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcicpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmhlYWRlcik7XG5cbiAgICAgICAgdGhpcy5zcGFjZXJMZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuc3BhY2VyTGVmdC5jbGFzc0xpc3QuYWRkKCdzcGFjZXItbGVmdCcpO1xuICAgICAgICB0aGlzLmhlYWRlci5hcHBlbmRDaGlsZCh0aGlzLnNwYWNlckxlZnQpO1xuXG4gICAgICAgIHRoaXMuc3BhY2VyTGVmdC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUhlYWRlckxpbmsoXG4gICAgICAgICAgICAnaG9tZS5zdmcnLFxuICAgICAgICAgICAgdGhpcy5nZXREYWlseVB1enpsZUxpbmsoKSxcbiAgICAgICAgICAgIHsgYWx0VGV4dDogJ2dvIHRvIGRhaWx5IHB1enpsZScgfVxuICAgICAgICApKTtcblxuICAgICAgICB0aGlzLnNwYWNlckxlZnQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIZWFkZXJMaW5rKFxuICAgICAgICAgICAgJ2RpY2UtMy5zdmcnLFxuICAgICAgICAgICAgdGhpcy5nZXRSYW5kb21QdXp6bGVMaW5rKCksXG4gICAgICAgICAgICB7IGFsdFRleHQ6ICdnbyB0byByYW5kb20gcHV6emxlJyB9XG4gICAgICAgICkpO1xuXG4gICAgICAgIHRoaXMudGl0bGVUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMudGl0bGVUZXh0LmlubmVyVGV4dCA9ICdMQU1BUkRMRSc7XG4gICAgICAgIHRoaXMudGl0bGVUZXh0LmNsYXNzTGlzdC5hZGQoJ3RpdGxlLXRleHQnKTtcbiAgICAgICAgdGhpcy5oZWFkZXIuYXBwZW5kQ2hpbGQodGhpcy50aXRsZVRleHQpO1xuXG4gICAgICAgIHRoaXMuc3BhY2VyUmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5zcGFjZXJSaWdodC5jbGFzc0xpc3QuYWRkKCdzcGFjZXItcmlnaHQnKTtcbiAgICAgICAgdGhpcy5oZWFkZXIuYXBwZW5kQ2hpbGQodGhpcy5zcGFjZXJSaWdodCk7XG5cbiAgICAgICAgdGhpcy5zcGFjZXJSaWdodC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUhlYWRlckxpbmsoXG4gICAgICAgICAgICAnc291cmNlLnN2ZycsXG4gICAgICAgICAgICAnaHR0cHM6Ly9naXRodWIuY29tL2FoYWdnYXJ0L2xhbWFyZGxlJyxcbiAgICAgICAgICAgIHsgbmV3VGFiOiB0cnVlLCBhbHRUZXh0OiAnZ28gdG8gc291cmNlIGNvZGUnIH1cbiAgICAgICAgKSk7XG5cbiAgICAgICAgY29uc3QgaGVscEJ1dHRvbiA9IHRoaXMuY3JlYXRlSGVhZGVySWNvbignaGVscC5zdmcnLCB7XG4gICAgICAgICAgICBhbHRUZXh0OiAnc2hvdyB0dXRvcmlhbCdcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3BhY2VyUmlnaHQuYXBwZW5kQ2hpbGQoaGVscEJ1dHRvbik7XG5cbiAgICAgICAgdGhpcy51cmxTZWVkID0gbmV3IFVSTChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KCdzZWVkJyk7XG4gICAgICAgIGNvbnN0IGRhdGVTZWVkID0gdGhpcy5nYW1lRGF0YS5mb3JtYXREYXRlKHRoaXMuZ2FtZURhdGEuZ2V0RGF0ZSgpKTtcbiAgICAgICAgdGhpcy5zZWVkID0gdGhpcy51cmxTZWVkID8/IGRhdGVTZWVkO1xuXG4gICAgICAgIGNvbnN0IGdyaWRDb25maWcgPSB7XG4gICAgICAgICAgICBzZWVkOiB0aGlzLnNlZWQsXG4gICAgICAgICAgICByb3dzOiBOVU1fUk9XUyxcbiAgICAgICAgICAgIGxldHRlcnM6IE5VTV9MRVRURVJTLFxuICAgICAgICAgICAgbWF0Y2hlczogUkVRVUlSRURfTUFUQ0hFUyxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnR1dG9yaWFsID0gbmV3IEdhbWVUdXRvcmlhbChcbiAgICAgICAgICAgIHRoaXMuZ2FtZURhdGEsXG4gICAgICAgICAgICBncmlkQ29uZmlnLFxuICAgICAgICAgICAgdGhpcy5nZXRHcmlkQXJlYSgpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMudHV0b3JpYWwpO1xuXG4gICAgICAgIGhlbHBCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudHV0b3JpYWwuc2hvdygpO1xuXG4gICAgICAgIHRoaXMuZ3JpZCA9IG5ldyBHYW1lR3JpZChncmlkQ29uZmlnLCB7XG4gICAgICAgICAgICBvbldpbjogc29sdXRpb24gPT4gdGhpcy53aW5HYW1lKHNvbHV0aW9uKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmdyaWQpO1xuXG4gICAgICAgIHRoaXMua2V5Ym9hcmQgPSBuZXcgR2FtZUtleWJvYXJkKHRoaXMuZ3JpZCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmtleWJvYXJkKTtcblxuICAgICAgICB0aGlzLnNvbHZlciA9IG5ldyBHYW1lU29sdmVyKCk7XG5cbiAgICAgICAgdGhpcy5yZXNpemVHcmlkKCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLnJlc2l6ZUdyaWQoKSk7XG5cbiAgICAgICAgdGhpcy53b3JkTGlzdC5sb2FkV29yZHMoKS50aGVuKHdvcmRzID0+IHRoaXMuZ3JpZC5pbml0aWFsaXplKHdvcmRzKSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnQmFja3NwYWNlJykge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5Ym9hcmQuYmFja3NwYWNlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlib2FyZC5zdWJtaXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkubWF0Y2goL15bYS16XSQvKSkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5Ym9hcmQuYXBwZW5kTGV0dGVyKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlSGVhZGVyTGluayhcbiAgICAgICAgaWNvblBhdGg6IHN0cmluZywgXG4gICAgICAgIGxpbmtQYXRoOiBzdHJpbmcsIFxuICAgICAgICBvcHRpb25zOiBIZWFkZXJMaW5rT3B0aW9ucyA9IHt9XG4gICAgKTogSFRNTEFuY2hvckVsZW1lbnQge1xuICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGxpbmtQYXRoKTtcbiAgICAgICAgaWYgKG9wdGlvbnMubmV3VGFiKVxuICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICAgICAgbGluay5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUhlYWRlckljb24oaWNvblBhdGgsIG9wdGlvbnMpKTtcbiAgICAgICAgcmV0dXJuIGxpbms7XG4gICAgfVxuXG4gICAgY3JlYXRlSGVhZGVySWNvbihcbiAgICAgICAgcGF0aDogc3RyaW5nLCBcbiAgICAgICAgb3B0aW9uczogSGVhZGVySWNvbk9wdGlvbnMgPSB7fVxuICAgICk6IEhUTUxJbWFnZUVsZW1lbnQge1xuICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIGljb24uc2V0QXR0cmlidXRlKCdzcmMnLCBwYXRoKTtcbiAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgSEVBREVSX0lDT05fU0laRS50b1N0cmluZygpKTtcbiAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIEhFQURFUl9JQ09OX1NJWkUudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChvcHRpb25zLmFsdFRleHQpIHtcbiAgICAgICAgICAgIGljb24uc2V0QXR0cmlidXRlKCdhbHQnLCBvcHRpb25zLmFsdFRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRpdGxlIHx8IG9wdGlvbnMuYWx0VGV4dCkge1xuICAgICAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgb3B0aW9ucy50aXRsZSA/PyBvcHRpb25zLmFsdFRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpY29uO1xuICAgIH1cblxuICAgIGdldEdyaWRBcmVhKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IE1hdGgubWluKE1BWF9XSURUSCwgd2luZG93LmlubmVyV2lkdGggLSBHUklEX1BBRERJTkdfV0lEVEgpLFxuICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLSBLRVlCT0FSRF9IRUlHSFQgLSBIRUFERVJfSEVJR0hULFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJlc2l6ZUdyaWQoKSB7XG4gICAgICAgIGNvbnN0IGxlZnRvdmVyID0gdGhpcy5ncmlkLnJlc2l6ZSh0aGlzLmdldEdyaWRBcmVhKCkpO1xuICAgICAgICB0aGlzLmdyaWQuZ2V0Q29udGFpbmVyKCkuc3R5bGUubWFyZ2luQm90dG9tID0gbGVmdG92ZXIgKyAncHgnO1xuICAgIH1cblxuICAgIGNvbXB1dGVNYXRjaGluZyhzb2x1dGlvbjogc3RyaW5nLCBtYXRjaGVzOiBzdHJpbmdbXSkge1xuICAgICAgICBjb25zdCBtYXRjaGluZ0xldHRlcnMgPSBbXTtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBzb2x1dGlvbjtcblxuICAgICAgICAvLyBpdGVyYXRlIHRoZSBhcnJheSBpbiByZXZlcnNlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSBpIC0gMV07XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TWF0Y2ggPSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLnNwbGl0KCcnKVxuICAgICAgICAgICAgICAgIC5tYXAoKGxldHRlciwgcG9zKSA9PiBbbGV0dGVyLCBuZXh0LmNoYXJBdChwb3MpXSlcbiAgICAgICAgICAgICAgICAubWFwKChbYSwgYl0pID0+IGEgPT09IGIpO1xuICAgICAgICAgICAgbWF0Y2hpbmdMZXR0ZXJzLnB1c2goY3VycmVudE1hdGNoKTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldmVyc2UgdGhlIG91dHB1dFxuICAgICAgICBtYXRjaGluZ0xldHRlcnMucmV2ZXJzZSgpO1xuXG4gICAgICAgIHJldHVybiBtYXRjaGluZ0xldHRlcnM7XG4gICAgfVxuXG4gICAgZm9ybWF0TWF0Y2hpbmcoXG4gICAgICAgIHNlcXVlbmNlOiBib29sZWFuW11bXSwgXG4gICAgICAgIG1hdGNoQ2hhcjogc3RyaW5nLCBcbiAgICAgICAgbm9uTWF0Y2hDaGFyOiBzdHJpbmdcbiAgICApOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBzZXF1ZW5jZVxuICAgICAgICAgICAgLm1hcChyb3dNYXRjaCA9PiByb3dNYXRjaFxuICAgICAgICAgICAgICAgIC5tYXAobGV0dGVyTWF0Y2ggPT4gbGV0dGVyTWF0Y2ggPyBtYXRjaENoYXIgOiBub25NYXRjaENoYXIpXG4gICAgICAgICAgICAgICAgLmpvaW4oJycpXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIGNyZWF0ZVNoYXJlTWVzc2FnZShzb2x1dGlvbjogR3JpZFNvbHV0aW9uLCBocmVmOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgdXBwZXJTZXF1ZW5jZSA9IHRoaXMuZm9ybWF0TWF0Y2hpbmcoXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVNYXRjaGluZyhzb2x1dGlvbi5zb2x1dGlvbiwgc29sdXRpb24udXBwZXIpLFxuICAgICAgICAgICAgRE9XTl9BUlJPVywgTk9fQVJST1dcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBsb3dlclNlcXVlbmNlID0gdGhpcy5mb3JtYXRNYXRjaGluZyhcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hdGNoaW5nKHNvbHV0aW9uLnNvbHV0aW9uLCBzb2x1dGlvbi5sb3dlciksXG4gICAgICAgICAgICBVUF9BUlJPVywgTk9fQVJST1dcbiAgICAgICAgKTtcblxuICAgICAgICBsb3dlclNlcXVlbmNlLnJldmVyc2UoKTtcblxuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdChcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAnbGFtYXJkbGUnLFxuICAgICAgICAgICAgICAgIGhyZWYsXG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkLmdldE51bUd1ZXNzZXMoKS50b1N0cmluZygpICsgJyB0cmllcycsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdXBwZXJTZXF1ZW5jZSxcbiAgICAgICAgICAgIFtzb2x1dGlvbi5zb2x1dGlvbi5zcGxpdCgnJykubWFwKCgpID0+IFNPTFVUSU9OX01BUktFUikuam9pbignJyldLFxuICAgICAgICAgICAgbG93ZXJTZXF1ZW5jZVxuICAgICAgICApLmpvaW4oJ1xcbicpO1xuICAgIH1cblxuICAgIGNvbXB1dGVQYXIoKSB7XG4gICAgICAgIGNvbnN0IG1pblNvbHV0aW9uID0gdGhpcy5zb2x2ZXIuc29sdmUoXG4gICAgICAgICAgICB0aGlzLmdyaWQuZ2V0VXBwZXJTdGFydCgpLFxuICAgICAgICAgICAgdGhpcy5ncmlkLmdldExvd2VyU3RhcnQoKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSwgbWluU29sdXRpb24ubGVuZ3RoIC0gMik7XG4gICAgfVxuXG4gICAgYXN5bmMgd2luR2FtZShzb2x1dGlvbjogR3JpZFNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VMaW5lcyA9IFtdO1xuICAgICAgICBtZXNzYWdlTGluZXMucHVzaCgnWW91IHdvbiBpbiAnICsgdGhpcy5ncmlkLmdldE51bUd1ZXNzZXMoKSArICcgdHJpZXMhJyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zb2x2ZXIubG9hZEdyYXBoKCk7XG5cbiAgICAgICAgbWVzc2FnZUxpbmVzLnB1c2goJ1BhcjogJyArIHRoaXMuY29tcHV0ZVBhcigpKTtcblxuICAgICAgICBpZiAodGhpcy5zZWVkID09PSB0aGlzLmdhbWVEYXRhLmZvcm1hdERhdGUodGhpcy5nYW1lRGF0YS5nZXREYXRlKCkpKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVEYXRhLmFkZFN0cmVhaygpO1xuICAgICAgICAgICAgbWVzc2FnZUxpbmVzLnB1c2goJ0N1cnJlbnQgU3RyZWFrOiAnICsgdGhpcy5nYW1lRGF0YS5nZXRTdHJlYWsoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLndpblBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXG4gICAgICAgIHRoaXMud2luTWVzc2FnZVRleHQuaW5uZXJUZXh0ID0gbWVzc2FnZUxpbmVzLmpvaW4oJ1xcbicpO1xuICAgICAgICB0aGlzLndpbk1lc3NhZ2VTaGFyZS5vbmNsaWNrID0gZSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVNZXNzYWdlID0gdGhpcy5jcmVhdGVTaGFyZU1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgc29sdXRpb24sXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luICsgJz9zZWVkPScgKyB0aGlzLnNlZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBmYWlsTWVzc2FnZSA9ICdGYWlsZWQgdG8gU2hhcmUgOignO1xuXG4gICAgICAgICAgICBjb25zdCBvbGRUZXh0ID0gdGhpcy53aW5NZXNzYWdlU2hhcmUuaW5uZXJUZXh0O1xuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5zaGFyZSkge1xuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5zaGFyZSh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2hhcmVNZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB0aGlzLndpbk1lc3NhZ2VTaGFyZS5pbm5lclRleHQgPSBmYWlsTWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQpIHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzaGFyZU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMud2luTWVzc2FnZVNoYXJlLmlubmVyVGV4dCA9ICdDb3BpZWQgdG8gY2xpcGJvYXJkISc7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy53aW5NZXNzYWdlU2hhcmUuaW5uZXJUZXh0ID0gb2xkVGV4dCwgMzAwMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMud2luTWVzc2FnZVNoYXJlLmlubmVyVGV4dCA9IGZhaWxNZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldERhaWx5UHV6emxlTGluaygpIHtcbiAgICAgICAgcmV0dXJuICcuLyc7XG4gICAgfVxuXG4gICAgZ2V0UmFuZG9tUHV6emxlTGluaygpIHtcbiAgICAgICAgcmV0dXJuICcuLz9zZWVkPScgKyB0aGlzLnJhbmRvbVN0cmluZygpO1xuICAgIH1cblxuICAgIHJhbmRvbVN0cmluZygpIHtcbiAgICAgICAgY29uc3QgY29kZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICBjb2Rlcy5wdXNoKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvZGVzLmpvaW4oJycpO1xuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbGFtYXJkbGUtZ2FtZScsIExhbWFyZGxlR2FtZSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInJlcXVpcmUoJy4vTGFtYXJkbGVHYW1lJyk7XG4iXSwibmFtZXMiOlsiR2FtZUtleWJvYXJkIiwiSFRNTEVsZW1lbnQiLCJjb25zdHJ1Y3RvciIsImdyaWQiLCJzdXBlciIsInRoaXMiLCJsZXR0ZXJzIiwiZW5hYmxlZCIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwibWFyZ2luIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVSb3ciLCJiYWNrc3BhY2UiLCJsZW5ndGgiLCJzdWJzdHJpbmciLCJzZXRMZXR0ZXJzIiwiYXBwZW5kTGV0dGVyIiwibGV0dGVyIiwic3VibWl0Iiwicm93IiwiY2xhc3NMaXN0IiwiYWRkIiwic3BhY2VyIiwia2V5IiwiaW5uZXJUZXh0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc2FibGUiLCJlbmFibGUiLCJzaG93IiwicmVtb3ZlIiwiaGlkZSIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiR3JpZExldHRlciIsInBvcyIsInNldExldHRlciIsInNldE1hdGNoIiwibWF0Y2hVcHBlciIsIm1hdGNoTG93ZXIiLCJzZXRIaWdobGlnaHQiLCJpc0hpZ2hsaWdodGVkIiwiYm9yZGVyQ29sb3IiLCJHcmlkUm93IiwiY29uZmlnIiwidGlsZXMiLCJpIiwidGlsZSIsInB1c2giLCJnZXRBdHRyaWJ1dGUiLCJnZXRMZXR0ZXJzIiwicGFkZGVkTGV0dGVycyIsInBhZEVuZCIsInVwZGF0ZU1hdGNoZXMiLCJ1cHBlciIsImxvd2VyIiwiZm9yRWFjaCIsImlzQ29tcGxldGUiLCJkb2VzTWF0Y2giLCJvdGhlciIsIm1hdGNoQ291bnQiLCJtYXRjaGVzIiwid2lnZ2xlIiwic2V0QXR0cmlidXRlIiwid2luZG93Iiwic2V0VGltZW91dCIsInJlbW92ZUF0dHJpYnV0ZSIsIkdhbWVHcmlkIiwiY2FsbGJhY2tzIiwicm93Q29uZmlnIiwibnVtR3Vlc3NlcyIsInVwcGVyTWF0Y2hlcyIsImxvd2VyTWF0Y2hlcyIsImlkIiwic2V0UHJvcGVydHkiLCJyb3dzIiwidG9TdHJpbmciLCJjcmVhdGVSb3dzIiwiZ2V0UmFuZG9tV29yZCIsInNlZWQiLCJ3b3JkcyIsIk1hdGgiLCJhYnMiLCJnZXRIYXNoQ29kZSIsImN1cnJlbnQiLCJyb3dzQWJvdmUiLCJjZWlsIiwicm93c0JlbG93IiwiZmxvb3IiLCJBcnJheSIsImZpbGwiLCJpbml0aWFsaXplIiwidXBwZXJTdGFydCIsImxvd2VyU3RhcnQiLCJnZXRUaWxlU2l6ZSIsImdyaWRBcmVhIiwiY29sdW1uR2FwV2lkdGgiLCJtYXhUaWxlV2lkdGgiLCJ3aWR0aCIsInJvd0dhcEhlaWdodCIsIm1heFRpbGVIZWlnaHQiLCJoZWlnaHQiLCJHUklEX1BBRERJTkciLCJtaW4iLCJyZXNpemUiLCJzaXplIiwidGlsZVNpemUiLCJncmlkV2lkdGgiLCJncmlkSGVpZ2h0IiwiY2hlY2tXb3JkcyIsImluY2x1ZGVzIiwidXBwZXJNYXRjaCIsImxvd2VyTWF0Y2giLCJvbldpbiIsInNvbHV0aW9uIiwibmV3Um93IiwiY2hpbGRyZW4iLCJpbnNlcnRCZWZvcmUiLCJzdHIiLCJoYXNoIiwiY2hhckNvZGVBdCIsImdldFVwcGVyIiwiZ2V0TG93ZXIiLCJnZXRDb250YWluZXIiLCJnZXROdW1HdWVzc2VzIiwiZ2V0VXBwZXJTdGFydCIsImdldExvd2VyU3RhcnQiLCJwYXJhZ3JhcGgiLCJ0ZXh0IiwiZWxlbSIsImpvaW4iLCJHYW1lVHV0b3JpYWwiLCJnYW1lRGF0YSIsImdyaWRDb25maWciLCJvdmVybGF5IiwidGV4dENvbnRhaW5lciIsInRpdGxlIiwiZXhhbXBsZTEiLCJleGFtcGxlMiIsImV4YW1wbGUzIiwiaGFzVmlzaXRlZCIsIm9uY2xpY2siLCJzZXRWaXNpdGVkIiwiR2FtZVNvbHZlciIsInNvbHZlIiwic3RhcnQiLCJlbmQiLCJwYXRocyIsIk1hcCIsInNldCIsInZpc2l0aW5nIiwidG9WaXNpdCIsInBvcCIsImRvbmUiLCJncmFwaCIsIndvcmQiLCJoYXMiLCJwYXRoIiwiZ2V0IiwibG9hZEdyYXBoIiwidW5kZWZpbmVkIiwib25Mb2FkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJlIiwicmVhZHlTdGF0ZSIsIkRPTkUiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJvcGVuIiwic2VuZCIsIkdhbWVEYXRhIiwiZGF0ZSIsInNjaGVtYSIsInZpc2l0ZWQiLCJ2YWx1ZSIsInN0cmVhayIsInBhcnNlSW50IiwibW9zdFJlY2VudCIsImNvb2tpZURhdGEiLCJwYXJzZUNvb2tpZSIsImRhdGEiLCJjaGVja1N0cmVhayIsInNhdmVEYXRhIiwiZm9ybWF0RGF0ZSIsImRheUJlZm9yZSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImFkZFN0cmVhayIsImNvb2tpZUV4cGlyYXRpb25EYXRlIiwiZXhwaXJhdGlvblN0cmluZyIsInRvVVRDU3RyaW5nIiwiT2JqZWN0IiwiZW50cmllcyIsIm5hbWUiLCJjb29raWUiLCJkZWNvZGVVUkkiLCJzcGxpdCIsIm1hcCIsImVudHJ5Iiwia2V5VmFsdWUiLCJ0cmltIiwiaGFzT3duUHJvcGVydHkiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXRTdHJlYWsiLCJXb3JkTGlzdCIsInNldFdvcmRzIiwicmF3V29yZHMiLCJsb2FkV29yZHMiLCJ3b3Jkc1Byb21pc2UiLCJMYW1hcmRsZUdhbWUiLCJ3b3JkTGlzdCIsIndpblBvcHVwIiwia2V5Ym9hcmQiLCJ3aW5NZXNzYWdlIiwid2luTWVzc2FnZVRleHQiLCJ3aW5NZXNzYWdlU2hhcmUiLCJoZWFkZXIiLCJzcGFjZXJMZWZ0IiwiY3JlYXRlSGVhZGVyTGluayIsImdldERhaWx5UHV6emxlTGluayIsImFsdFRleHQiLCJnZXRSYW5kb21QdXp6bGVMaW5rIiwidGl0bGVUZXh0Iiwic3BhY2VyUmlnaHQiLCJuZXdUYWIiLCJoZWxwQnV0dG9uIiwiY3JlYXRlSGVhZGVySWNvbiIsInVybFNlZWQiLCJVUkwiLCJsb2NhdGlvbiIsImhyZWYiLCJzZWFyY2hQYXJhbXMiLCJkYXRlU2VlZCIsInR1dG9yaWFsIiwiZ2V0R3JpZEFyZWEiLCJ3aW5HYW1lIiwiYXBwZW5kIiwic29sdmVyIiwicmVzaXplR3JpZCIsInRoZW4iLCJtYXRjaCIsImljb25QYXRoIiwibGlua1BhdGgiLCJvcHRpb25zIiwibGluayIsImljb24iLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJLRVlfSEVJR0hUIiwibGVmdG92ZXIiLCJtYXJnaW5Cb3R0b20iLCJjb21wdXRlTWF0Y2hpbmciLCJtYXRjaGluZ0xldHRlcnMiLCJuZXh0IiwiY3VycmVudE1hdGNoIiwiY2hhckF0IiwiYSIsImIiLCJyZXZlcnNlIiwiZm9ybWF0TWF0Y2hpbmciLCJzZXF1ZW5jZSIsIm1hdGNoQ2hhciIsIm5vbk1hdGNoQ2hhciIsInJvd01hdGNoIiwibGV0dGVyTWF0Y2giLCJjcmVhdGVTaGFyZU1lc3NhZ2UiLCJ1cHBlclNlcXVlbmNlIiwibG93ZXJTZXF1ZW5jZSIsInByb3RvdHlwZSIsImNvbmNhdCIsImNvbXB1dGVQYXIiLCJtaW5Tb2x1dGlvbiIsIm1heCIsIm1lc3NhZ2VMaW5lcyIsInN0b3BQcm9wYWdhdGlvbiIsInNoYXJlTWVzc2FnZSIsIm9yaWdpbiIsImZhaWxNZXNzYWdlIiwib2xkVGV4dCIsIm5hdmlnYXRvciIsInNoYXJlIiwiY2F0Y2giLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJyYW5kb21TdHJpbmciLCJjb2RlcyIsInJhbmRvbSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwib2JqIiwicHJvcCIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciXSwic291cmNlUm9vdCI6IiJ9